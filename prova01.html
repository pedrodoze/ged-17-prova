<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>prova01</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="prova01_files/libs/clipboard/clipboard.min.js"></script>
<script src="prova01_files/libs/quarto-html/quarto.js"></script>
<script src="prova01_files/libs/quarto-html/popper.min.js"></script>
<script src="prova01_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="prova01_files/libs/quarto-html/anchor.min.js"></script>
<link href="prova01_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="prova01_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="prova01_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="prova01_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="prova01_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">prova01</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="prova-01-questão-01" class="level2">
<h2 class="anchored" data-anchor-id="prova-01-questão-01">Prova 01 questão 01</h2>
<section id="import-de-dados-e-pacotes" class="level3">
<h3 class="anchored" data-anchor-id="import-de-dados-e-pacotes">import de dados e pacotes</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quantmod) <span class="co"># Para usar o "getSymbols"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'quantmod' was built under R version 4.3.2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: xts</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'xts' was built under R version 4.3.2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: zoo</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'zoo'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    as.Date, as.Date.numeric</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: TTR</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'TTR' was built under R version 4.3.2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Registered S3 method overwritten by 'quantmod':
  method            from
  as.zoo.data.frame zoo </code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggfortify)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'ggfortify' was built under R version 4.3.2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(forecast)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'forecast' was built under R version 4.3.2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Registered S3 methods overwritten by 'forecast':
  method                 from     
  autoplot.Arima         ggfortify
  autoplot.acf           ggfortify
  autoplot.ar            ggfortify
  autoplot.bats          ggfortify
  autoplot.decomposed.ts ggfortify
  autoplot.ets           ggfortify
  autoplot.forecast      ggfortify
  autoplot.stl           ggfortify
  autoplot.ts            ggfortify
  fitted.ar              ggfortify
  fortify.ts             ggfortify
  residuals.ar           ggfortify</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tseries)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'tseries' was built under R version 4.3.2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(fGarch)        <span class="co"># Para usar o garchFit</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'fGarch' was built under R version 4.3.2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>NOTE: Packages 'fBasics', 'timeDate', and 'timeSeries' are no longer
attached to the search() path when 'fGarch' is attached.

If needed attach them yourself in your R script by e.g.,
        require("timeSeries")</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'fGarch'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:TTR':

    volatility</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(FinTS)         <span class="co"># Para usar o ArchTest</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'FinTS' was built under R version 4.3.2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'FinTS'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:forecast':

    Acf</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(aTSA)          <span class="co"># Para usar o arch.test</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'aTSA'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:tseries':

    adf.test, kpss.test, pp.test</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:forecast':

    forecast</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:graphics':

    identify</code></pre>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(nortsTest)   <span class="co"># Para usar o arch.test</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'nortsTest' was built under R version 4.3.2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Registered S3 methods overwritten by 'nortsTest':
  method      from    
  autoplot.ts forecast
  fortify.ts  forecast</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'nortsTest'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:aTSA':

    arch.test</code></pre>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>start <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2023-01-01"</span>)</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>end <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2023-12-01"</span>)</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>dados.sp <span class="ot">&lt;-</span> quantmod<span class="sc">::</span><span class="fu">getSymbols</span>(<span class="st">"^GSPC"</span>, <span class="at">src =</span> <span class="st">"yahoo"</span>, <span class="at">from =</span> start, <span class="at">to =</span> end,</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="at">auto.assign =</span> <span class="cn">FALSE</span>)</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>stdpoors <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(dados.sp)</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>dados.dj <span class="ot">&lt;-</span> quantmod<span class="sc">::</span><span class="fu">getSymbols</span>(<span class="st">"^DJI"</span>, <span class="at">src =</span> <span class="st">"yahoo"</span>, <span class="at">from =</span> start, <span class="at">to =</span> end,</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a><span class="at">auto.assign =</span> <span class="cn">FALSE</span>)</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>dowjones <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(dados.dj)</span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>dados.nasdaq <span class="ot">&lt;-</span> quantmod<span class="sc">::</span><span class="fu">getSymbols</span>(<span class="st">"^IXIC"</span>, <span class="at">src =</span> <span class="st">"yahoo"</span>, <span class="at">from =</span> start, <span class="at">to =</span></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>end, <span class="at">auto.assign =</span> <span class="cn">FALSE</span>)</span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>nasdaq <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(dados.nasdaq)</span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>dados.bovespa <span class="ot">&lt;-</span> quantmod<span class="sc">::</span><span class="fu">getSymbols</span>(<span class="st">"^BVSP"</span>, <span class="at">src =</span> <span class="st">"yahoo"</span>, <span class="at">from =</span> start, <span class="at">to =</span></span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a>end, <span class="at">auto.assign =</span> <span class="cn">FALSE</span>)</span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a>bovespa <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(dados.bovespa)</span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a>dados.brent <span class="ot">&lt;-</span> quantmod<span class="sc">::</span><span class="fu">getSymbols</span>(<span class="st">"BZ=F"</span>, <span class="at">src =</span> <span class="st">"yahoo"</span>, <span class="at">from =</span> start, <span class="at">to =</span> end,</span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a><span class="at">auto.assign =</span> <span class="cn">FALSE</span>)</span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a>brent <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(dados.brent)</span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a>dados.dolar.real <span class="ot">&lt;-</span> quantmod<span class="sc">::</span><span class="fu">getSymbols</span>(<span class="st">"BRL=X"</span>, <span class="at">src =</span> <span class="st">"yahoo"</span>, <span class="at">from =</span> start, to</span>
<span id="cb37-20"><a href="#cb37-20" aria-hidden="true" tabindex="-1"></a><span class="ot">=</span> end, <span class="at">auto.assign =</span> <span class="cn">FALSE</span>)</span>
<span id="cb37-21"><a href="#cb37-21" aria-hidden="true" tabindex="-1"></a>dolar.real <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(dados.dolar.real)</span>
<span id="cb37-22"><a href="#cb37-22" aria-hidden="true" tabindex="-1"></a>dados.btc <span class="ot">&lt;-</span> quantmod<span class="sc">::</span><span class="fu">getSymbols</span>(<span class="st">"BTC-USD"</span>, <span class="at">src =</span> <span class="st">"yahoo"</span>, <span class="at">from =</span> start, <span class="at">to =</span></span>
<span id="cb37-23"><a href="#cb37-23" aria-hidden="true" tabindex="-1"></a>end, <span class="at">auto.assign =</span> <span class="cn">FALSE</span>)</span>
<span id="cb37-24"><a href="#cb37-24" aria-hidden="true" tabindex="-1"></a>dolar.bitcoin <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(dados.btc)</span>
<span id="cb37-25"><a href="#cb37-25" aria-hidden="true" tabindex="-1"></a>stdpoors</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           GSPC.Open GSPC.High GSPC.Low GSPC.Close GSPC.Volume GSPC.Adjusted
2023-01-03   3853.29   3878.46  3794.33    3824.14  3959140000       3824.14
2023-01-04   3840.36   3873.16  3815.77    3852.97  4414080000       3852.97
2023-01-05   3839.74   3839.74  3802.42    3808.10  3893450000       3808.10
2023-01-06   3823.37   3906.19  3809.56    3895.08  3923560000       3895.08
2023-01-09   3910.82   3950.57  3890.42    3892.09  4311770000       3892.09
2023-01-10   3888.57   3919.83  3877.29    3919.25  3851030000       3919.25
2023-01-11   3932.35   3970.07  3928.54    3969.61  4303360000       3969.61
2023-01-12   3977.57   3997.76  3937.56    3983.17  4440260000       3983.17
2023-01-13   3960.60   4003.95  3947.67    3999.09  3939700000       3999.09
2023-01-17   3999.28   4015.39  3984.57    3990.97  4235560000       3990.97
       ...                                                                  
2023-11-16   4497.08   4511.99  4487.83    4508.24  3964520000       4508.24
2023-11-17   4509.55   4520.12  4499.66    4514.02  3777240000       4514.02
2023-11-20   4511.70   4557.11  4510.36    4547.38  3644790000       4547.38
2023-11-21   4538.77   4542.14  4525.51    4538.19  3511080000       4538.19
2023-11-22   4553.04   4568.43  4545.05    4556.62  3042810000       4556.62
2023-11-24   4555.84   4560.31  4552.80    4559.34  1639500000       4559.34
2023-11-27   4554.86   4560.52  4546.32    4550.43  3403990000       4550.43
2023-11-28   4545.55   4568.14  4540.51    4554.89  3586240000       4554.89
2023-11-29   4571.84   4587.64  4547.15    4550.58  4418760000       4550.58
2023-11-30   4554.87   4569.89  4537.24    4567.80  5399300000       4567.80</code></pre>
</div>
</div>
</section>
</section>
<section id="sp-500" class="level2">
<h2 class="anchored" data-anchor-id="sp-500">S&amp;P 500</h2>
<section id="tranformar-para-um-ts" class="level3">
<h3 class="anchored" data-anchor-id="tranformar-para-um-ts">tranformar para um ts</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>stdpoors.ts <span class="ot">&lt;-</span> <span class="fu">ts</span>(stdpoors<span class="sc">$</span>GSPC.Close)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="plotar-a-série-no-nível" class="level4">
<h4 class="anchored" data-anchor-id="plotar-a-série-no-nível">Plotar a série no nível</h4>
<p>vamos usar o valor de fechamento para fazer os procedimentos</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(stdpoors.ts, <span class="at">xlab =</span> <span class="st">"Tempo"</span>, <span class="at">ylab =</span> <span class="st">"preço"</span>, <span class="at">main =</span> <span class="st">"S&amp;P 500"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="fazer-o-teste-adf." class="level4">
<h4 class="anchored" data-anchor-id="fazer-o-teste-adf.">Fazer o teste ADF.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">adf.test</span>(stdpoors.ts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Augmented Dickey-Fuller Test 
alternative: stationary 
 
Type 1: no drift no trend 
     lag  ADF p.value
[1,]   0 1.32   0.952
[2,]   1 1.20   0.939
[3,]   2 1.32   0.953
[4,]   3 1.20   0.940
[5,]   4 1.20   0.939
Type 2: with drift no trend 
     lag   ADF p.value
[1,]   0 -1.67   0.455
[2,]   1 -1.63   0.473
[3,]   2 -1.80   0.405
[4,]   3 -1.44   0.541
[5,]   4 -1.51   0.519
Type 3: with drift and trend 
     lag   ADF p.value
[1,]   0 -2.27   0.460
[2,]   1 -2.33   0.437
[3,]   2 -2.39   0.412
[4,]   3 -2.16   0.508
[5,]   4 -2.21   0.485
---- 
Note: in fact, p.value = 0.01 means p.value &lt;= 0.01 </code></pre>
</div>
</div>
<p>como o p-valor é maior que 0.05, não rejeitamos a hipótese nula de que a série é não estacionária.</p>
</section>
<section id="obter-a-série-do-log." class="level4">
<h4 class="anchored" data-anchor-id="obter-a-série-do-log.">Obter a série do log.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>stdpoors_log.ts <span class="ot">&lt;-</span> <span class="fu">log</span>(stdpoors.ts)</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(stdpoors_log.ts, <span class="at">xlab =</span> <span class="st">"Tempo"</span>, <span class="at">ylab =</span> <span class="st">"log_preço"</span>, <span class="at">main =</span> <span class="st">"S&amp;P 500"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="obter-a-série-da-diferença-do-log." class="level4">
<h4 class="anchored" data-anchor-id="obter-a-série-da-diferença-do-log.">Obter a série da diferença do log.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>stdpoors_log_diff.ts <span class="ot">&lt;-</span> <span class="fu">diff</span>(stdpoors_log.ts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="fazer-novamente-o-teste-adf." class="level4">
<h4 class="anchored" data-anchor-id="fazer-novamente-o-teste-adf.">Fazer novamente o teste ADF.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">adf.test</span>(stdpoors_log_diff.ts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Augmented Dickey-Fuller Test 
alternative: stationary 
 
Type 1: no drift no trend 
     lag    ADF p.value
[1,]   0 -14.40    0.01
[2,]   1 -10.69    0.01
[3,]   2  -8.90    0.01
[4,]   3  -7.54    0.01
[5,]   4  -6.88    0.01
Type 2: with drift no trend 
     lag    ADF p.value
[1,]   0 -14.48    0.01
[2,]   1 -10.81    0.01
[3,]   2  -9.00    0.01
[4,]   3  -7.66    0.01
[5,]   4  -7.01    0.01
Type 3: with drift and trend 
     lag    ADF p.value
[1,]   0 -14.45    0.01
[2,]   1 -10.80    0.01
[3,]   2  -8.98    0.01
[4,]   3  -7.64    0.01
[5,]   4  -6.99    0.01
---- 
Note: in fact, p.value = 0.01 means p.value &lt;= 0.01 </code></pre>
</div>
</div>
<p>como o p-valor é menor que 0.05, rejeitamos a hipótese nula de que a série é não estacionária. então podemos usar a série da diferença do log para fazer a análise.</p>
</section>
<section id="plotar-a-série-da-diferença-do-log." class="level4">
<h4 class="anchored" data-anchor-id="plotar-a-série-da-diferença-do-log.">Plotar a série da diferença do log.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(stdpoors_log_diff.ts, <span class="at">xlab =</span> <span class="st">"Tempo"</span>, <span class="at">ylab =</span> <span class="st">"diff_log_preço"</span>, <span class="at">main =</span> <span class="st">"S&amp;P 500"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="construir-o-correlograma-da-série-da-diferença-do-log." class="level4">
<h4 class="anchored" data-anchor-id="construir-o-correlograma-da-série-da-diferença-do-log.">Construir o correlograma da série da diferença do log.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">acf</span>(stdpoors_log_diff.ts,<span class="at">lag.max=</span><span class="dv">50</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pacf</span>(stdpoors_log_diff.ts,<span class="at">lag.max=</span><span class="dv">50</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-9-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="identificar-o-processo-arma-adequado." class="level3">
<h3 class="anchored" data-anchor-id="identificar-o-processo-arma-adequado.">Identificar o processo ARMA adequado.</h3>
<p>com a análise podemos ver que o melhor modelo para o diff_log_preço é o MA(1)</p>
</section>
<section id="estimar-o-modelo-arma-e-verificar-a-significância-dos-coeficientes." class="level3">
<h3 class="anchored" data-anchor-id="estimar-o-modelo-arma-e-verificar-a-significância-dos-coeficientes.">Estimar o modelo ARMA e verificar a significância dos coeficientes.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>stdpoors_log_diff.ts.arima <span class="ot">&lt;-</span> <span class="fu">arima</span>(stdpoors_log_diff.ts, <span class="at">order =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>))</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(stdpoors_log_diff.ts.arima)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = stdpoors_log_diff.ts, order = c(0, 0, 1))

Coefficients:
         ma1  intercept
      0.0419      8e-04
s.e.  0.0685      6e-04

sigma^2 estimated as 7.041e-05:  log likelihood = 769.82,  aic = -1533.63

Training set error measures:
                        ME        RMSE         MAE      MPE     MAPE      MASE
Training set -1.212201e-06 0.008391069 0.006580332 82.94044 162.8253 0.6997997
                     ACF1
Training set -0.001492554</code></pre>
</div>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>stdpoors_log_diff.ts.arima2 <span class="ot">&lt;-</span> <span class="fu">arima</span>(stdpoors_log_diff.ts, <span class="at">order =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>))</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(stdpoors_log_diff.ts.arima2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = stdpoors_log_diff.ts, order = c(0, 0, 0))

Coefficients:
      intercept
          8e-04
s.e.      6e-04

sigma^2 estimated as 7.053e-05:  log likelihood = 769.63,  aic = -1535.26

Training set error measures:
                       ME        RMSE         MAE     MPE     MAPE      MASE
Training set 5.978499e-19 0.008397932 0.006594162 90.9173 148.2246 0.7012706
                   ACF1
Training set 0.03875689</code></pre>
</div>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>stdpoors_log_diff.ts.arima3 <span class="ot">&lt;-</span> <span class="fu">arima</span>(stdpoors_log_diff.ts, <span class="at">order =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>))</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(stdpoors_log_diff.ts.arima3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = stdpoors_log_diff.ts, order = c(1, 0, 0))

Coefficients:
         ar1  intercept
      0.0387      8e-04
s.e.  0.0660      6e-04

sigma^2 estimated as 7.042e-05:  log likelihood = 769.8,  aic = -1533.6

Training set error measures:
                        ME        RMSE         MAE      MPE     MAPE      MASE
Training set -1.160302e-06 0.008391601 0.006581073 83.17301 161.9851 0.6998786
                    ACF1
Training set 0.001622412</code></pre>
</div>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>stdpoors_log_diff.ts.arima4 <span class="ot">&lt;-</span> <span class="fu">arima</span>(stdpoors_log_diff.ts, <span class="at">order =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>))</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(stdpoors_log_diff.ts.arima4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = stdpoors_log_diff.ts, order = c(1, 0, 1))

Coefficients:
          ar1     ma1  intercept
      -0.9440  1.0000      8e-04
s.e.   0.0244  0.0125      6e-04

sigma^2 estimated as 6.854e-05:  log likelihood = 771.89,  aic = -1535.79

Training set error measures:
                        ME        RMSE         MAE      MPE     MAPE      MASE
Training set -3.739232e-06 0.008278591 0.006484124 122.3659 165.9985 0.6895683
                   ACF1
Training set 0.01043971</code></pre>
</div>
</div>
</section>
<section id="plot-akaike" class="level3">
<h3 class="anchored" data-anchor-id="plot-akaike">plot akaike</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>stdpoors_log_diff.ts.arima<span class="sc">$</span>aic</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -1533.633</code></pre>
</div>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>stdpoors_log_diff.ts.arima2<span class="sc">$</span>aic</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -1535.261</code></pre>
</div>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>stdpoors_log_diff.ts.arima3<span class="sc">$</span>aic</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -1533.605</code></pre>
</div>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>stdpoors_log_diff.ts.arima4<span class="sc">$</span>aic</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -1535.788</code></pre>
</div>
</div>
<p>podemos ver que pelo menor AIC o melhor modelo é o ARIMA(1,0,1) e que os coeficientes são significativos.</p>
</section>
<section id="fazer-o-teste-e-plotar-os-gráficos-associados-ao-teste-de-ljung-box-para-avaliar-a-correlação-dos-resíduos." class="level3">
<h3 class="anchored" data-anchor-id="fazer-o-teste-e-plotar-os-gráficos-associados-ao-teste-de-ljung-box-para-avaliar-a-correlação-dos-resíduos.">Fazer o teste e plotar os gráficos associados ao teste de Ljung-Box para avaliar a correlação dos resíduos.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tsdisplay</span>(<span class="fu">arima.errors</span>(stdpoors_log_diff.ts.arima4))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Deprecated, use residuals.Arima(object, type='regression') instead</code></pre>
</div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Box.test</span>(<span class="fu">resid</span>(stdpoors_log_diff.ts.arima4), <span class="at">type =</span> <span class="st">"Ljung"</span>, <span class="at">lag =</span> <span class="dv">20</span>, <span class="at">fitdf =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Box-Ljung test

data:  resid(stdpoors_log_diff.ts.arima4)
X-squared = 12.132, df = 18, p-value = 0.8404</code></pre>
</div>
</div>
<p>com isso a hipótese nula não pode ser rejeitada, então os resíduos são independentes.</p>
</section>
<section id="para-o-melhor-modelo-arma-estimado-obter-o-correlograma-dos-resíduos-ao-quadrado." class="level3">
<h3 class="anchored" data-anchor-id="para-o-melhor-modelo-arma-estimado-obter-o-correlograma-dos-resíduos-ao-quadrado.">Para o melhor modelo ARMA estimado, obter o correlograma dos resíduos ao quadrado.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">1</span>))</span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a><span class="fu">acf</span>(stdpoors_log_diff.ts.arima4<span class="sc">$</span>residuals<span class="sc">^</span><span class="dv">2</span>, <span class="at">lag.max=</span><span class="dv">20</span>)</span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a><span class="fu">pacf</span>(stdpoors_log_diff.ts.arima4<span class="sc">$</span>residuals<span class="sc">^</span><span class="dv">2</span>, <span class="at">lag.max =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="fazer-o-teste-para-efeitos-arch." class="level3">
<h3 class="anchored" data-anchor-id="fazer-o-teste-para-efeitos-arch.">Fazer o teste para efeitos ARCH.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>residuos_quadrados <span class="ot">&lt;-</span> stdpoors_log_diff.ts.arima4<span class="sc">$</span>residuals<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>residuos_quadrados</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Time Series:
Start = 2 
End = 230 
Frequency = 1 
  [1] 4.406502e-05 1.564034e-04 4.862321e-04 7.190966e-06 5.286513e-05
  [6] 1.104649e-04 1.244350e-05 4.775534e-06 3.671027e-06 2.899436e-04
 [11] 4.999880e-05 2.823140e-04 1.265743e-04 4.764812e-06 4.116922e-08
 [16] 8.782592e-05 4.064967e-06 1.980833e-04 2.104030e-04 6.664000e-05
 [21] 2.153423e-04 1.581312e-04 2.489261e-05 1.065246e-04 1.149632e-04
 [26] 1.036805e-04 5.700039e-06 9.019803e-05 2.149704e-07 2.078375e-06
 [31] 1.989238e-04 1.134431e-05 4.357168e-04 2.153546e-06 1.403728e-05
 [36] 1.151440e-04 4.819640e-06 1.451131e-05 2.807998e-05 4.607479e-05
 [41] 2.189419e-04 1.593145e-07 2.499421e-04 1.045585e-06 3.880975e-04
 [46] 1.965633e-04 8.061224e-06 2.601081e-04 8.218061e-05 3.307901e-04
 [51] 2.003476e-04 1.191435e-04 7.859627e-05 2.151230e-04 1.443426e-07
 [56] 4.239955e-05 1.054588e-06 2.593084e-07 1.341548e-04 3.576140e-05
 [61] 1.485690e-04 1.272568e-05 5.403962e-05 4.712557e-06 3.444129e-06
 [66] 1.010602e-06 2.577027e-06 1.662001e-05 1.381156e-04 7.994421e-06
 [71] 6.942696e-06 2.643927e-08 3.896171e-07 4.772409e-05 3.952525e-07
 [76] 1.866917e-07 2.605786e-04 1.862392e-05 3.402995e-04 4.362253e-05
 [81] 5.064208e-07 1.629843e-04 4.617234e-05 7.367954e-05 3.394942e-04
 [86] 4.486534e-06 1.260863e-05 4.651840e-06 1.276369e-06 1.267103e-05
 [91] 1.209471e-05 7.312551e-05 1.622219e-04 4.014863e-05 1.555936e-07
 [96] 5.385452e-06 1.060840e-04 8.491882e-05 8.871037e-05 1.053190e-04
[101] 2.675607e-07 6.575397e-05 1.113241e-04 1.350339e-04 2.157252e-06
[106] 1.666588e-07 1.229102e-05 2.052119e-05 8.880242e-07 6.214191e-05
[111] 3.941181e-05 1.812770e-07 1.380737e-04 2.976344e-05 1.830819e-05
[116] 4.849129e-05 1.725899e-05 9.627262e-05 1.207738e-05 8.223731e-05
[121] 2.299838e-08 7.617162e-06 1.465700e-04 8.021130e-07 2.190450e-06
[126] 9.642392e-05 4.384777e-06 7.216295e-08 5.163398e-05 2.536570e-05
[131] 7.823850e-05 1.144351e-05 2.234726e-05 2.012725e-05 9.340809e-06
[136] 8.260588e-05 2.161147e-06 1.823984e-06 1.400379e-05 7.492918e-06
[141] 2.871903e-05 5.708681e-05 2.876014e-06 2.001134e-05 1.814020e-04
[146] 1.426613e-05 2.972999e-05 6.195718e-05 2.595071e-05 5.572846e-05
[151] 2.330689e-07 3.455195e-06 2.552617e-05 1.618484e-04 5.410371e-05
[156] 8.197242e-05 3.646958e-09 2.631685e-05 8.587188e-06 9.496138e-05
[161] 2.066341e-04 4.508057e-05 1.888583e-05 2.078367e-04 2.333224e-06
[166] 1.039184e-06 4.222135e-08 1.446612e-05 7.499400e-05 7.220388e-06
[171] 1.942740e-07 4.841180e-05 6.115696e-05 4.550816e-06 3.495177e-05
[176] 1.366894e-04 4.547412e-07 5.318343e-06 1.135898e-04 2.653052e-04
[181] 1.000505e-05 1.212076e-05 2.560728e-04 4.472548e-07 1.524519e-05
[186] 6.594145e-06 2.039990e-06 1.909912e-04 5.290627e-05 5.972149e-06
[191] 1.303061e-04 1.989605e-05 2.655276e-05 6.393610e-06 3.897732e-05
[196] 3.862819e-05 1.093347e-04 4.371136e-06 1.684995e-04 9.587741e-05
[201] 1.542931e-04 7.581985e-06 4.717741e-05 2.541366e-04 1.236047e-04
[206] 4.162757e-05 1.512281e-04 1.546165e-05 1.228844e-04 2.541449e-04
[211] 9.112623e-05 2.112285e-07 1.176160e-05 1.562660e-06 5.502306e-05
[216] 1.876212e-04 1.924675e-06 3.219629e-04 1.789796e-10 1.366031e-06
[221] 7.468476e-08 5.357319e-05 1.506574e-05 2.022100e-05 2.477747e-06
[226] 1.771141e-06 1.098815e-06 2.366025e-07 3.435698e-06</code></pre>
</div>
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ArchTest</span>(residuos_quadrados, <span class="at">lag =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    ARCH LM-test; Null hypothesis: no ARCH effects

data:  residuos_quadrados
Chi-squared = 6.7788, df = 3, p-value = 0.07929</code></pre>
</div>
</div>
</section>
<section id="identificar-o-melhor-processo-archgarch." class="level3">
<h3 class="anchored" data-anchor-id="identificar-o-melhor-processo-archgarch.">Identificar o melhor processo ARCH/GARCH.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>aTSA<span class="sc">::</span><span class="fu">arch.test</span>(stdpoors_log_diff.ts.arima4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>ARCH heteroscedasticity test for residuals 
alternative: heteroscedastic 

Portmanteau-Q test: 
     order    PQ p.value
[1,]     4  8.24  0.0833
[2,]     8 15.74  0.0463
[3,]    12 17.92  0.1181
[4,]    16 19.56  0.2409
[5,]    20 23.38  0.2705
[6,]    24 25.83  0.3616
Lagrange-Multiplier test: 
     order    LM  p.value
[1,]     4 31.94 5.39e-07
[2,]     8 14.51 4.28e-02
[3,]    12  7.63 7.46e-01
[4,]    16  5.44 9.88e-01
[5,]    20  3.80 1.00e+00
[6,]    24  3.36 1.00e+00</code></pre>
</div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>nortsTest<span class="sc">::</span><span class="fu">arch.test</span>(stdpoors_log_diff.ts, <span class="at">lag.max=</span><span class="dv">6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Box-Ljung test

data:  y^2
X-squared = 8.3745, df = 6, p-value = 0.2119
alternative hypothesis: y is heteroscedastic</code></pre>
</div>
</div>
</section>
<section id="estimar-o-modelo-arma-garch-e-verificar-a-significância-dos-coeficientes." class="level3">
<h3 class="anchored" data-anchor-id="estimar-o-modelo-arma-garch-e-verificar-a-significância-dos-coeficientes.">Estimar o modelo ARMA-GARCH e verificar a significância dos coeficientes.</h3>
<p>Como o modelo não apresenta heterocedasticidade condicional, não é necessário estimar o modelo ARMA-GARCH.</p>
</section>
<section id="avaliar-se-os-resíduos-gerados-têm-comportamento-de-ruído-branco." class="level3">
<h3 class="anchored" data-anchor-id="avaliar-se-os-resíduos-gerados-têm-comportamento-de-ruído-branco.">Avaliar se os resíduos gerados têm comportamento de ruído branco.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Box.test</span>(stdpoors_log_diff.ts.arima4<span class="sc">$</span>residuals, <span class="at">type =</span> <span class="st">"Ljung"</span>, <span class="at">lag =</span> <span class="dv">20</span>, <span class="at">fitdf =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Box-Ljung test

data:  stdpoors_log_diff.ts.arima4$residuals
X-squared = 12.132, df = 18, p-value = 0.8404</code></pre>
</div>
</div>
<p>com isso vemos que a hipótese nula não pode ser rejeitada, então os resíduos são independentes.</p>
</section>
<section id="fazer-as-previsões-considerando-os-14-últimos-valores-da-série." class="level3">
<h3 class="anchored" data-anchor-id="fazer-as-previsões-considerando-os-14-últimos-valores-da-série.">Fazer as previsões considerando os 14 últimos valores da série.</h3>
<p>como o modelo é ARIMA(1,0,1) então vamos usar os 14 últimos valores da série para fazer a previsão.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>stdpoors_log_diff.ts.arima4</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = stdpoors_log_diff.ts, order = c(1, 0, 1))

Coefficients:
          ar1     ma1  intercept
      -0.9440  1.0000      8e-04
s.e.   0.0244  0.0125      6e-04

sigma^2 estimated as 6.854e-05:  log likelihood = 771.89,  aic = -1535.79</code></pre>
</div>
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>previsao <span class="ot">&lt;-</span> <span class="fu">predict</span>(stdpoors_log_diff.ts.arima4, <span class="at">n.ahead =</span> <span class="dv">14</span>)</span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>previsao</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$pred
Time Series:
Start = 231 
End = 244 
Frequency = 1 
 [1] -2.036929e-04  1.703945e-03 -9.685244e-05  1.603088e-03 -1.644391e-06
 [6]  1.513212e-03  8.319772e-05  1.433122e-03  1.588025e-04  1.361752e-03
[11]  2.261757e-04  1.298152e-03  2.862135e-04  1.241476e-03

$se
Time Series:
Start = 231 
End = 244 
Frequency = 1 
 [1] 0.008294268 0.008305514 0.008315522 0.008324431 0.008332362 0.008339423
 [7] 0.008345710 0.008351309 0.008356295 0.008360736 0.008364691 0.008368214
[13] 0.008371352 0.008374148</code></pre>
</div>
</div>
</section>
</section>
<section id="dow-jones" class="level2">
<h2 class="anchored" data-anchor-id="dow-jones">Dow Jones</h2>
<section id="tranformar-para-um-ts-1" class="level3">
<h3 class="anchored" data-anchor-id="tranformar-para-um-ts-1">tranformar para um ts</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>dowjones</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           DJI.Open DJI.High  DJI.Low DJI.Close DJI.Volume DJI.Adjusted
2023-01-03 33148.90 33387.52 32850.57  33136.37  355930000     33136.37
2023-01-04 33165.14 33409.10 33033.48  33269.77  379400000     33269.77
2023-01-05 33191.72 33191.72 32812.33  32930.08  337920000     32930.08
2023-01-06 33055.30 33710.66 32997.39  33630.61  360740000     33630.61
2023-01-09 33664.39 33935.11 33487.66  33517.65  327840000     33517.65
2023-01-10 33516.43 33726.54 33421.80  33704.10  268260000     33704.10
2023-01-11 33754.03 33974.69 33711.04  33973.01  301650000     33973.01
2023-01-12 34047.86 34292.67 33792.10  34189.97  308190000     34189.97
2023-01-13 34075.31 34342.32 33915.49  34302.61  274110000     34302.61
2023-01-17 34222.32 34269.97 33860.67  33910.85  353050000     33910.85
       ...                                                             
2023-11-16 34868.03 35022.46 34818.03  34945.47  435540000     34945.47
2023-11-17 34964.82 35028.22 34882.82  34947.28  334820000     34947.28
2023-11-20 34932.49 35227.48 34907.98  35151.04  331050000     35151.04
2023-11-21 35104.84 35118.04 35038.44  35088.29  271120000     35088.29
2023-11-22 35189.33 35315.20 35155.80  35273.03  237290000     35273.03
2023-11-24 35299.90 35399.44 35299.90  35390.15  117040000     35390.15
2023-11-27 35376.44 35410.37 35280.57  35333.47  258340000     35333.47
2023-11-28 35332.13 35518.67 35307.73  35416.98  256210000     35416.98
2023-11-29 35436.80 35579.13 35405.89  35430.42  299330000     35430.42
2023-11-30 35596.57 35970.70 35592.22  35950.89  435540000     35950.89</code></pre>
</div>
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>dowjones.ts <span class="ot">&lt;-</span> <span class="fu">ts</span>(dowjones<span class="sc">$</span>DJI.Close)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="plotar-a-série-no-nível-1" class="level4">
<h4 class="anchored" data-anchor-id="plotar-a-série-no-nível-1">Plotar a série no nível</h4>
<p>vamos usar o valor de fechamento para fazer os procedimentos</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(dowjones.ts, <span class="at">xlab =</span> <span class="st">"Tempo"</span>, <span class="at">ylab =</span> <span class="st">"preço"</span>, <span class="at">main =</span> <span class="st">"Dow Jones"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="fazer-o-teste-adf.-1" class="level4">
<h4 class="anchored" data-anchor-id="fazer-o-teste-adf.-1">Fazer o teste ADF.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="fu">adf.test</span>(dowjones.ts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Augmented Dickey-Fuller Test 
alternative: stationary 
 
Type 1: no drift no trend 
     lag   ADF p.value
[1,]   0 0.716   0.850
[2,]   1 0.664   0.835
[3,]   2 0.745   0.858
[4,]   3 0.597   0.815
[5,]   4 0.640   0.828
Type 2: with drift no trend 
     lag   ADF p.value
[1,]   0 -1.62   0.478
[2,]   1 -1.67   0.458
[3,]   2 -1.81   0.403
[4,]   3 -1.52   0.516
[5,]   4 -1.52   0.514
Type 3: with drift and trend 
     lag   ADF p.value
[1,]   0 -2.13   0.521
[2,]   1 -2.21   0.487
[3,]   2 -2.28   0.457
[4,]   3 -2.14   0.517
[5,]   4 -2.11   0.528
---- 
Note: in fact, p.value = 0.01 means p.value &lt;= 0.01 </code></pre>
</div>
</div>
<p>como o p-valor é maior que 0.05, não rejeitamos a hipótese nula de que a série é não estacionária.</p>
</section>
<section id="obter-a-série-do-log.-1" class="level4">
<h4 class="anchored" data-anchor-id="obter-a-série-do-log.-1">Obter a série do log.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>dowjones_log.ts <span class="ot">&lt;-</span> <span class="fu">log</span>(dowjones.ts)</span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(dowjones_log.ts, <span class="at">xlab =</span> <span class="st">"Tempo"</span>, <span class="at">ylab =</span> <span class="st">"log_preço"</span>, <span class="at">main =</span> <span class="st">"Dow Jones"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="obter-a-série-da-diferença-do-log.-1" class="level4">
<h4 class="anchored" data-anchor-id="obter-a-série-da-diferença-do-log.-1">Obter a série da diferença do log.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>dowjones_log_diff.ts <span class="ot">&lt;-</span> <span class="fu">diff</span>(dowjones_log.ts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="fazer-novamente-o-teste-adf.-1" class="level4">
<h4 class="anchored" data-anchor-id="fazer-novamente-o-teste-adf.-1">Fazer novamente o teste ADF.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="fu">adf.test</span>(dowjones_log_diff.ts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Augmented Dickey-Fuller Test 
alternative: stationary 
 
Type 1: no drift no trend 
     lag    ADF p.value
[1,]   0 -14.61    0.01
[2,]   1 -10.26    0.01
[3,]   2  -8.92    0.01
[4,]   3  -7.70    0.01
[5,]   4  -6.76    0.01
Type 2: with drift no trend 
     lag    ADF p.value
[1,]   0 -14.61    0.01
[2,]   1 -10.28    0.01
[3,]   2  -8.93    0.01
[4,]   3  -7.72    0.01
[5,]   4  -6.78    0.01
Type 3: with drift and trend 
     lag    ADF p.value
[1,]   0 -14.60    0.01
[2,]   1 -10.27    0.01
[3,]   2  -8.95    0.01
[4,]   3  -7.74    0.01
[5,]   4  -6.82    0.01
---- 
Note: in fact, p.value = 0.01 means p.value &lt;= 0.01 </code></pre>
</div>
</div>
<p>como o p-valor é menor que 0.05, rejeitamos a hipótese nula de que a série é não estacionária. então podemos usar a série da diferença do log para fazer a análise.</p>
</section>
<section id="plotar-a-série-da-diferença-do-log.-1" class="level4">
<h4 class="anchored" data-anchor-id="plotar-a-série-da-diferença-do-log.-1">Plotar a série da diferença do log.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(dowjones_log_diff.ts, <span class="at">xlab =</span> <span class="st">"Tempo"</span>, <span class="at">ylab =</span> <span class="st">"diff_log_preço"</span>, <span class="at">main =</span> <span class="st">"Dow Jones"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="construir-o-correlograma-da-série-da-diferença-do-log.-1" class="level4">
<h4 class="anchored" data-anchor-id="construir-o-correlograma-da-série-da-diferença-do-log.-1">Construir o correlograma da série da diferença do log.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="fu">acf</span>(dowjones_log_diff.ts,<span class="at">lag.max=</span><span class="dv">50</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pacf</span>(dowjones_log_diff.ts,<span class="at">lag.max=</span><span class="dv">50</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-25-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="identificar-o-processo-arma-adequado.-1" class="level3">
<h3 class="anchored" data-anchor-id="identificar-o-processo-arma-adequado.-1">Identificar o processo ARMA adequado.</h3>
<p>com a análise podemos ver que o melhor modelo para o diff_log_preço é o MA(1)</p>
</section>
<section id="estimar-o-modelo-arma-e-verificar-a-significância-dos-coeficientes.-1" class="level3">
<h3 class="anchored" data-anchor-id="estimar-o-modelo-arma-e-verificar-a-significância-dos-coeficientes.-1">Estimar o modelo ARMA e verificar a significância dos coeficientes.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>dowjones_log_diff.ts.arima <span class="ot">&lt;-</span> <span class="fu">arima</span>(dowjones_log_diff.ts, <span class="at">order =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>))</span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(dowjones_log_diff.ts.arima)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = dowjones_log_diff.ts, order = c(0, 0, 1))

Coefficients:
         ma1  intercept
      0.0200      4e-04
s.e.  0.0655      5e-04

sigma^2 estimated as 5.334e-05:  log likelihood = 801.6,  aic = -1597.21

Training set error measures:
                       ME        RMSE         MAE      MPE    MAPE     MASE
Training set 1.027176e-07 0.007303535 0.005720551 88.78665 104.726 0.716341
                     ACF1
Training set 0.0003466114</code></pre>
</div>
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>dowjones_log_diff.ts.arima2 <span class="ot">&lt;-</span> <span class="fu">arima</span>(dowjones_log_diff.ts, <span class="at">order =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>))</span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(dowjones_log_diff.ts.arima2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = dowjones_log_diff.ts, order = c(0, 0, 0))

Coefficients:
      intercept
          4e-04
s.e.      5e-04

sigma^2 estimated as 5.336e-05:  log likelihood = 801.56,  aic = -1599.12

Training set error measures:
                       ME        RMSE         MAE      MPE     MAPE      MASE
Training set 3.635325e-19 0.007305022 0.005729851 89.93625 104.8112 0.7175055
                   ACF1
Training set 0.02025273</code></pre>
</div>
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>dowjones_log_diff.ts.arima3 <span class="ot">&lt;-</span> <span class="fu">arima</span>(dowjones_log_diff.ts, <span class="at">order =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>))</span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(dowjones_log_diff.ts.arima3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = dowjones_log_diff.ts, order = c(1, 0, 0))

Coefficients:
         ar1  intercept
      0.0205      4e-04
s.e.  0.0665      5e-04

sigma^2 estimated as 5.334e-05:  log likelihood = 801.61,  aic = -1597.21

Training set error measures:
                        ME        RMSE         MAE      MPE     MAPE      MASE
Training set -3.314186e-07 0.007303496 0.005720262 88.69163 104.7332 0.7163048
                      ACF1
Training set -0.0001736943</code></pre>
</div>
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>dowjones_log_diff.ts.arima4 <span class="ot">&lt;-</span> <span class="fu">arima</span>(dowjones_log_diff.ts, <span class="at">order =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>))</span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(dowjones_log_diff.ts.arima4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = dowjones_log_diff.ts, order = c(1, 0, 1))

Coefficients:
          ar1     ma1  intercept
      -0.9602  1.0000      4e-04
s.e.   0.0202  0.0115      5e-04

sigma^2 estimated as 5.221e-05:  log likelihood = 803.19,  aic = -1598.38

Training set error measures:
                        ME        RMSE         MAE      MPE     MAPE      MASE
Training set -2.550722e-07 0.007225724 0.005628332 72.50811 111.9879 0.7047931
                    ACF1
Training set 0.002363893</code></pre>
</div>
</div>
</section>
<section id="plot-akaike-1" class="level3">
<h3 class="anchored" data-anchor-id="plot-akaike-1">plot akaike</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>dowjones_log_diff.ts.arima<span class="sc">$</span>aic</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -1597.209</code></pre>
</div>
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>dowjones_log_diff.ts.arima2<span class="sc">$</span>aic</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -1599.117</code></pre>
</div>
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a>dowjones_log_diff.ts.arima3<span class="sc">$</span>aic</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -1597.212</code></pre>
</div>
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>dowjones_log_diff.ts.arima4<span class="sc">$</span>aic</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -1598.384</code></pre>
</div>
</div>
<p>podemos ver que pelo menor AIC o melhor modelo é o ARIMA(0,0,0) e que o que indica que os coeficientes não são significativos.</p>
</section>
<section id="fazer-o-teste-e-plotar-os-gráficos-associados-ao-teste-de-ljung-box-para-avaliar-a-correlação-dos-resíduos.-1" class="level3">
<h3 class="anchored" data-anchor-id="fazer-o-teste-e-plotar-os-gráficos-associados-ao-teste-de-ljung-box-para-avaliar-a-correlação-dos-resíduos.-1">Fazer o teste e plotar os gráficos associados ao teste de Ljung-Box para avaliar a correlação dos resíduos.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tsdisplay</span>(<span class="fu">arima.errors</span>(dowjones_log_diff.ts.arima2))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Deprecated, use residuals.Arima(object, type='regression') instead</code></pre>
</div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Box.test</span>(<span class="fu">resid</span>(dowjones_log_diff.ts.arima2), <span class="at">type =</span> <span class="st">"Ljung"</span>, <span class="at">lag =</span> <span class="dv">20</span>, <span class="at">fitdf =</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Box-Ljung test

data:  resid(dowjones_log_diff.ts.arima2)
X-squared = 10.924, df = 20, p-value = 0.9482</code></pre>
</div>
</div>
<p>com isso a hipótese nula não pode ser rejeitada, então os resíduos são independentes.</p>
</section>
<section id="para-o-melhor-modelo-arma-estimado-obter-o-correlograma-dos-resíduos-ao-quadrado.-1" class="level3">
<h3 class="anchored" data-anchor-id="para-o-melhor-modelo-arma-estimado-obter-o-correlograma-dos-resíduos-ao-quadrado.-1">Para o melhor modelo ARMA estimado, obter o correlograma dos resíduos ao quadrado.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">1</span>))</span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a><span class="fu">acf</span>(dowjones_log_diff.ts.arima2<span class="sc">$</span>residuals<span class="sc">^</span><span class="dv">2</span>, <span class="at">lag.max=</span><span class="dv">20</span>)</span>
<span id="cb118-3"><a href="#cb118-3" aria-hidden="true" tabindex="-1"></a><span class="fu">pacf</span>(dowjones_log_diff.ts.arima2<span class="sc">$</span>residuals<span class="sc">^</span><span class="dv">2</span>, <span class="at">lag.max =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="fazer-o-teste-para-efeitos-arch.-1" class="level3">
<h3 class="anchored" data-anchor-id="fazer-o-teste-para-efeitos-arch.-1">Fazer o teste para efeitos ARCH.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a>residuos_quadrados <span class="ot">&lt;-</span> dowjones_log_diff.ts.arima2<span class="sc">$</span>residuals<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a>residuos_quadrados</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Time Series:
Start = 2 
End = 230 
Frequency = 1 
  [1] 1.340780e-05 1.127565e-04 4.282492e-04 1.384226e-05 2.695090e-05
  [6] 5.762185e-05 3.611842e-05 8.603333e-06 1.402413e-04 3.468881e-04
 [11] 6.344459e-05 9.232986e-05 5.223908e-05 7.527779e-06 3.992746e-09
 [16] 3.269106e-05 2.382249e-07 6.507201e-05 1.108192e-04 2.339149e-08
 [21] 2.253458e-06 1.697230e-05 1.926410e-06 5.553897e-05 4.166390e-05
 [26] 5.962145e-05 2.169569e-05 1.145676e-04 2.441398e-05 6.099588e-07
 [31] 1.708572e-04 1.217854e-05 4.485642e-04 8.467175e-06 8.594763e-06
 [36] 1.117749e-04 3.388181e-06 5.545725e-05 3.943842e-08 1.010494e-04
 [41] 1.280004e-04 7.316358e-07 3.134459e-04 4.514402e-06 2.912814e-04
 [46] 1.235771e-04 1.021541e-05 1.031525e-04 8.331822e-05 1.264853e-04
 [51] 1.526118e-04 1.341083e-04 8.830350e-05 2.816547e-04 3.948952e-06
 [56] 1.410543e-05 3.204450e-05 2.319875e-06 9.170393e-05 1.566173e-05
 [61] 1.487948e-04 8.880199e-05 3.955299e-05 4.187477e-06 7.796962e-08
 [66] 7.089329e-06 6.582290e-06 2.230024e-06 1.203055e-04 2.091809e-05
 [71] 6.820506e-06 4.441891e-07 7.300995e-06 1.308960e-05 9.302044e-08
 [76] 2.582978e-06 1.119317e-04 5.195046e-05 2.330170e-04 5.856785e-05
 [81] 2.956633e-06 1.253775e-04 7.077195e-05 8.040981e-05 2.563310e-04
 [86] 4.044391e-06 4.200145e-06 1.599199e-06 4.890441e-05 3.880517e-07
 [91] 1.174619e-06 1.101753e-04 1.427108e-04 9.506541e-06 1.310402e-05
 [96] 2.074430e-05 5.361063e-05 6.590486e-05 2.050407e-06 9.265706e-05
[101] 3.552917e-06 1.967044e-05 1.841798e-05 4.256335e-04 3.961927e-05
[106] 2.072337e-09 5.629988e-06 2.152379e-05 8.449275e-07 2.728597e-05
[111] 1.532374e-05 5.160481e-05 1.484124e-04 1.244016e-05 5.673114e-05
[116] 1.133061e-05 2.476396e-07 4.673799e-05 5.375353e-07 3.496572e-05
[121] 6.461018e-06 5.747346e-05 6.347025e-05 1.616511e-09 1.709966e-05
[126] 1.231795e-04 3.475332e-05 3.405386e-05 7.992639e-05 4.627667e-06
[131] 1.065255e-06 8.701195e-06 3.434236e-06 1.037843e-04 7.649346e-06
[136] 1.857393e-05 8.104880e-08 2.343317e-05 1.611594e-07 3.828517e-06
[141] 4.987227e-05 2.149220e-05 6.086012e-06 2.698904e-06 1.035389e-04
[146] 5.045494e-06 2.145744e-05 1.254017e-04 2.340777e-05 3.344178e-05
[151] 1.312951e-06 6.925445e-06 1.499204e-07 1.132066e-04 3.067846e-05
[156] 7.671875e-05 1.544709e-07 2.039483e-06 2.962352e-05 2.500259e-05
[161] 1.265941e-04 4.726973e-05 3.397333e-05 6.524488e-05 5.202589e-07
[166] 2.695866e-05 8.842003e-06 3.588638e-05 3.733905e-05 1.724397e-06
[171] 3.386959e-06 4.668707e-06 7.527697e-07 5.720185e-06 8.442449e-05
[176] 7.509691e-05 3.271891e-08 1.182428e-05 6.681772e-06 1.247818e-04
[181] 1.217439e-05 8.288417e-07 1.399734e-04 5.754611e-06 9.595315e-06
[186] 2.585945e-05 6.611767e-06 1.776968e-04 1.218022e-05 4.320354e-07
[191] 6.893011e-05 3.053277e-05 1.327113e-05 2.514005e-06 3.034311e-05
[196] 6.518680e-07 7.981415e-05 8.807879e-10 1.037609e-04 6.141728e-05
[201] 8.062173e-05 3.763093e-05 3.419781e-05 1.255189e-05 6.403159e-05
[206] 1.346664e-04 2.339486e-04 1.155931e-05 4.005952e-05 2.711494e-04
[211] 3.831800e-05 4.323317e-07 1.707778e-06 2.364295e-06 4.672889e-05
[216] 1.236389e-04 1.538341e-06 1.906657e-04 1.873069e-05 2.769215e-06
[221] 9.249362e-08 2.978441e-05 4.591342e-06 2.396359e-05 8.754564e-06
[226] 3.837068e-06 4.019017e-06 5.500847e-10 2.024086e-04</code></pre>
</div>
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ArchTest</span>(residuos_quadrados, <span class="at">lag =</span> <span class="dv">16</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    ARCH LM-test; Null hypothesis: no ARCH effects

data:  residuos_quadrados
Chi-squared = 8.8771, df = 16, p-value = 0.9184</code></pre>
</div>
</div>
</section>
<section id="identificar-o-melhor-processo-archgarch.-1" class="level3">
<h3 class="anchored" data-anchor-id="identificar-o-melhor-processo-archgarch.-1">Identificar o melhor processo ARCH/GARCH.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a>aTSA<span class="sc">::</span><span class="fu">arch.test</span>(dowjones_log_diff.ts.arima2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>ARCH heteroscedasticity test for residuals 
alternative: heteroscedastic 

Portmanteau-Q test: 
     order   PQ p.value
[1,]     4  2.5   0.644
[2,]     8 11.9   0.157
[3,]    12 13.2   0.357
[4,]    16 13.8   0.612
[5,]    20 19.3   0.505
[6,]    24 21.6   0.604
Lagrange-Multiplier test: 
     order    LM  p.value
[1,]     4 53.68 1.31e-11
[2,]     8 22.82 1.83e-03
[3,]    12 13.58 2.57e-01
[4,]    16  9.57 8.46e-01
[5,]    20  6.51 9.96e-01
[6,]    24  4.40 1.00e+00</code></pre>
</div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-31-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a>nortsTest<span class="sc">::</span><span class="fu">arch.test</span>(dowjones_log_diff.ts, <span class="at">lag.max=</span><span class="dv">16</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Box-Ljung test

data:  y^2
X-squared = 13.321, df = 16, p-value = 0.6492
alternative hypothesis: y is heteroscedastic</code></pre>
</div>
</div>
</section>
<section id="estimar-o-modelo-arma-garch-e-verificar-a-significância-dos-coeficientes.-1" class="level3">
<h3 class="anchored" data-anchor-id="estimar-o-modelo-arma-garch-e-verificar-a-significância-dos-coeficientes.-1">Estimar o modelo ARMA-GARCH e verificar a significância dos coeficientes.</h3>
<p>Como o modelo não apresenta heterocedasticidade condicional, não é necessário estimar o modelo ARMA-GARCH.</p>
</section>
<section id="avaliar-se-os-resíduos-gerados-têm-comportamento-de-ruído-branco.-1" class="level3">
<h3 class="anchored" data-anchor-id="avaliar-se-os-resíduos-gerados-têm-comportamento-de-ruído-branco.-1">Avaliar se os resíduos gerados têm comportamento de ruído branco.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Box.test</span>(dowjones_log_diff.ts.arima2<span class="sc">$</span>residuals, <span class="at">type =</span> <span class="st">"Ljung"</span>, <span class="at">lag =</span> <span class="dv">20</span>, <span class="at">fitdf =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Box-Ljung test

data:  dowjones_log_diff.ts.arima2$residuals
X-squared = 10.924, df = 18, p-value = 0.8975</code></pre>
</div>
</div>
<p>com isso vemos que a hipótese nula não pode ser rejeitada, então os resíduos são independentes.</p>
</section>
<section id="fazer-as-previsões-considerando-os-14-últimos-valores-da-série.-1" class="level3">
<h3 class="anchored" data-anchor-id="fazer-as-previsões-considerando-os-14-últimos-valores-da-série.-1">Fazer as previsões considerando os 14 últimos valores da série.</h3>
<p>como o modelo é ARIMA(1,0,1) então vamos usar os 14 últimos valores da série para fazer a previsão.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a>dowjones_log_diff.ts.arima2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = dowjones_log_diff.ts, order = c(0, 0, 0))

Coefficients:
      intercept
          4e-04
s.e.      5e-04

sigma^2 estimated as 5.336e-05:  log likelihood = 801.56,  aic = -1599.12</code></pre>
</div>
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a>previsao <span class="ot">&lt;-</span> <span class="fu">predict</span>(dowjones_log_diff.ts.arima2, <span class="at">n.ahead =</span> <span class="dv">14</span>)</span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a>previsao</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$pred
Time Series:
Start = 231 
End = 244 
Frequency = 1 
 [1] 0.0003559928 0.0003559928 0.0003559928 0.0003559928 0.0003559928
 [6] 0.0003559928 0.0003559928 0.0003559928 0.0003559928 0.0003559928
[11] 0.0003559928 0.0003559928 0.0003559928 0.0003559928

$se
Time Series:
Start = 231 
End = 244 
Frequency = 1 
 [1] 0.007305022 0.007305022 0.007305022 0.007305022 0.007305022 0.007305022
 [7] 0.007305022 0.007305022 0.007305022 0.007305022 0.007305022 0.007305022
[13] 0.007305022 0.007305022</code></pre>
</div>
</div>
</section>
</section>
<section id="nasdaq" class="level2">
<h2 class="anchored" data-anchor-id="nasdaq">NASDAQ</h2>
<section id="tranformar-para-um-ts-2" class="level3">
<h3 class="anchored" data-anchor-id="tranformar-para-um-ts-2">tranformar para um ts</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a>nasdaq</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           IXIC.Open IXIC.High IXIC.Low IXIC.Close IXIC.Volume IXIC.Adjusted
2023-01-03  10562.06  10613.06 10309.16   10386.98  4780650000      10386.98
2023-01-04  10467.82  10515.22 10337.64   10458.76  5085380000      10458.76
2023-01-05  10390.31  10393.22 10295.25   10305.24  4764270000      10305.24
2023-01-06  10363.96  10604.14 10265.04   10569.29  5199780000      10569.29
2023-01-09  10662.10  10807.26 10619.12   10635.65  5132190000      10635.65
2023-01-10  10607.72  10743.67 10589.59   10742.63  4710680000      10742.63
2023-01-11  10794.99  10932.44 10762.73   10931.67  5284390000      10931.67
2023-01-12  10969.26  11027.75 10797.12   11001.10  5681240000      11001.10
2023-01-13  10906.37  11084.01 10900.16   11079.16  5077990000      11079.16
2023-01-17  11070.00  11145.44 11024.72   11095.11  5138410000      11095.11
       ...                                                                  
2023-11-16  14066.88  14130.45 14033.79   14113.67  4545180000      14113.67
2023-11-17  14101.44  14154.32 14063.93   14125.48  4408640000      14125.48
2023-11-20  14134.75  14309.80 14134.20   14284.53  4561810000      14284.53
2023-11-21  14217.23  14237.50 14146.31   14199.98  4128600000      14199.98
2023-11-22  14283.82  14359.61 14226.63   14265.86  3855240000      14265.86
2023-11-24  14238.04  14270.28 14214.13   14250.85  2541840000      14250.85
2023-11-27  14239.31  14305.71 14205.24   14241.02  4205880000      14241.02
2023-11-28  14224.63  14303.66 14195.72   14281.76  4474400000      14281.76
2023-11-29  14367.11  14423.22 14247.89   14258.49  4890220000      14258.49
2023-11-30  14265.05  14289.20 14127.05   14226.22  5678070000      14226.22</code></pre>
</div>
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a>nasdaq.ts <span class="ot">&lt;-</span> <span class="fu">ts</span>(nasdaq<span class="sc">$</span>IXIC.Close)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="plotar-a-série-no-nível-2" class="level4">
<h4 class="anchored" data-anchor-id="plotar-a-série-no-nível-2">Plotar a série no nível</h4>
<p>vamos usar o valor de fechamento para fazer os procedimentos</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(nasdaq.ts, <span class="at">xlab =</span> <span class="st">"Tempo"</span>, <span class="at">ylab =</span> <span class="st">"preço"</span>, <span class="at">main =</span> <span class="st">"NASDAQ"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="fazer-o-teste-adf.-2" class="level4">
<h4 class="anchored" data-anchor-id="fazer-o-teste-adf.-2">Fazer o teste ADF.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="fu">adf.test</span>(nasdaq.ts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Augmented Dickey-Fuller Test 
alternative: stationary 
 
Type 1: no drift no trend 
     lag  ADF p.value
[1,]   0 1.64   0.975
[2,]   1 1.53   0.968
[3,]   2 1.66   0.976
[4,]   3 1.58   0.972
[5,]   4 1.48   0.964
Type 2: with drift no trend 
     lag   ADF p.value
[1,]   0 -1.94   0.353
[2,]   1 -1.90   0.368
[3,]   2 -2.10   0.288
[4,]   3 -1.82   0.398
[5,]   4 -1.80   0.404
Type 3: with drift and trend 
     lag   ADF p.value
[1,]   0 -2.32   0.442
[2,]   1 -2.35   0.428
[3,]   2 -2.45   0.388
[4,]   3 -2.22   0.484
[5,]   4 -2.27   0.460
---- 
Note: in fact, p.value = 0.01 means p.value &lt;= 0.01 </code></pre>
</div>
</div>
<p>como o p-valor é maior que 0.05, não rejeitamos a hipótese nula de que a série é não estacionária.</p>
</section>
<section id="obter-a-série-do-log.-2" class="level4">
<h4 class="anchored" data-anchor-id="obter-a-série-do-log.-2">Obter a série do log.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a>nasdaq_log.ts <span class="ot">&lt;-</span> <span class="fu">log</span>(nasdaq.ts)</span>
<span id="cb139-2"><a href="#cb139-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(nasdaq_log.ts, <span class="at">xlab =</span> <span class="st">"Tempo"</span>, <span class="at">ylab =</span> <span class="st">"log_preço"</span>, <span class="at">main =</span> <span class="st">"NASDAQ"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-37-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="obter-a-série-da-diferença-do-log.-2" class="level4">
<h4 class="anchored" data-anchor-id="obter-a-série-da-diferença-do-log.-2">Obter a série da diferença do log.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb140"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a>nasdaq_log_diff.ts <span class="ot">&lt;-</span> <span class="fu">diff</span>(nasdaq_log.ts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="fazer-novamente-o-teste-adf.-2" class="level4">
<h4 class="anchored" data-anchor-id="fazer-novamente-o-teste-adf.-2">Fazer novamente o teste ADF.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="fu">adf.test</span>(nasdaq_log_diff.ts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Augmented Dickey-Fuller Test 
alternative: stationary 
 
Type 1: no drift no trend 
     lag    ADF p.value
[1,]   0 -14.41    0.01
[2,]   1 -10.84    0.01
[3,]   2  -8.82    0.01
[4,]   3  -7.25    0.01
[5,]   4  -6.66    0.01
Type 2: with drift no trend 
     lag    ADF p.value
[1,]   0 -14.58    0.01
[2,]   1 -11.07    0.01
[3,]   2  -9.04    0.01
[4,]   3  -7.47    0.01
[5,]   4  -6.89    0.01
Type 3: with drift and trend 
     lag    ADF p.value
[1,]   0 -14.61    0.01
[2,]   1 -11.14    0.01
[3,]   2  -9.08    0.01
[4,]   3  -7.52    0.01
[5,]   4  -6.93    0.01
---- 
Note: in fact, p.value = 0.01 means p.value &lt;= 0.01 </code></pre>
</div>
</div>
<p>como o p-valor é menor que 0.05, rejeitamos a hipótese nula de que a série é não estacionária. então podemos usar a série da diferença do log para fazer a análise.</p>
</section>
<section id="plotar-a-série-da-diferença-do-log.-2" class="level4">
<h4 class="anchored" data-anchor-id="plotar-a-série-da-diferença-do-log.-2">Plotar a série da diferença do log.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(nasdaq_log_diff.ts, <span class="at">xlab =</span> <span class="st">"Tempo"</span>, <span class="at">ylab =</span> <span class="st">"diff_log_preço"</span>, <span class="at">main =</span> <span class="st">"NASDAQ"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-40-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="construir-o-correlograma-da-série-da-diferença-do-log.-2" class="level4">
<h4 class="anchored" data-anchor-id="construir-o-correlograma-da-série-da-diferença-do-log.-2">Construir o correlograma da série da diferença do log.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb144"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="fu">acf</span>(nasdaq_log_diff.ts,<span class="at">lag.max=</span><span class="dv">50</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-41-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pacf</span>(nasdaq_log_diff.ts,<span class="at">lag.max=</span><span class="dv">50</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-41-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="identificar-o-processo-arma-adequado.-2" class="level3">
<h3 class="anchored" data-anchor-id="identificar-o-processo-arma-adequado.-2">Identificar o processo ARMA adequado.</h3>
<p>com a análise podemos ver que o melhor modelo para o diff_log_preço é o MA(1)</p>
</section>
<section id="estimar-o-modelo-arma-e-verificar-a-significância-dos-coeficientes.-2" class="level3">
<h3 class="anchored" data-anchor-id="estimar-o-modelo-arma-e-verificar-a-significância-dos-coeficientes.-2">Estimar o modelo ARMA e verificar a significância dos coeficientes.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb146"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a>nasdaq_log_diff.ts.arima <span class="ot">&lt;-</span> <span class="fu">arima</span>(nasdaq_log_diff.ts, <span class="at">order =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>))</span>
<span id="cb146-2"><a href="#cb146-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(nasdaq_log_diff.ts.arima)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = nasdaq_log_diff.ts, order = c(0, 0, 1))

Coefficients:
         ma1  intercept
      0.0347     0.0014
s.e.  0.0699     0.0008

sigma^2 estimated as 0.000125:  log likelihood = 704.05,  aic = -1402.1

Training set error measures:
                        ME      RMSE         MAE      MPE    MAPE      MASE
Training set -8.521415e-07 0.0111825 0.008878764 115.8533 135.723 0.7047752
                     ACF1
Training set -0.001854132</code></pre>
</div>
<div class="sourceCode cell-code" id="cb148"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a>nasdaq_log_diff.ts.arima2 <span class="ot">&lt;-</span> <span class="fu">arima</span>(nasdaq_log_diff.ts, <span class="at">order =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>))</span>
<span id="cb148-2"><a href="#cb148-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(nasdaq_log_diff.ts.arima2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = nasdaq_log_diff.ts, order = c(0, 0, 0))

Coefficients:
      intercept
         0.0014
s.e.     0.0007

sigma^2 estimated as 0.0001252:  log likelihood = 703.93,  aic = -1403.86

Training set error measures:
                        ME      RMSE         MAE      MPE     MAPE      MASE
Training set -3.361056e-19 0.0111885 0.008880163 114.7685 135.1409 0.7048862
                   ACF1
Training set 0.03077495</code></pre>
</div>
<div class="sourceCode cell-code" id="cb150"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a>nasdaq_log_diff.ts.arima3 <span class="ot">&lt;-</span> <span class="fu">arima</span>(nasdaq_log_diff.ts, <span class="at">order =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>))</span>
<span id="cb150-2"><a href="#cb150-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(nasdaq_log_diff.ts.arima3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = nasdaq_log_diff.ts, order = c(1, 0, 0))

Coefficients:
         ar1  intercept
      0.0307     0.0014
s.e.  0.0660     0.0008

sigma^2 estimated as 0.0001251:  log likelihood = 704.04,  aic = -1402.08

Training set error measures:
                        ME      RMSE         MAE      MPE     MAPE      MASE
Training set -7.500621e-07 0.0111832 0.008878832 115.9133 135.8529 0.7047806
                    ACF1
Training set 0.001907502</code></pre>
</div>
<div class="sourceCode cell-code" id="cb152"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a>nasdaq_log_diff.ts.arima4 <span class="ot">&lt;-</span> <span class="fu">arima</span>(nasdaq_log_diff.ts, <span class="at">order =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>))</span>
<span id="cb152-2"><a href="#cb152-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(nasdaq_log_diff.ts.arima4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = nasdaq_log_diff.ts, order = c(1, 0, 1))

Coefficients:
          ar1     ma1  intercept
      -0.9567  0.9889     0.0014
s.e.   0.0419  0.0288     0.0007

sigma^2 estimated as 0.0001237:  log likelihood = 705.09,  aic = -1402.19

Training set error measures:
                      ME       RMSE        MAE      MPE     MAPE      MASE
Training set 1.45313e-06 0.01112118 0.00885328 132.8313 154.6837 0.7027523
                   ACF1
Training set 0.01032055</code></pre>
</div>
</div>
</section>
<section id="plot-akaike-2" class="level3">
<h3 class="anchored" data-anchor-id="plot-akaike-2">plot akaike</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb154"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a>nasdaq_log_diff.ts.arima<span class="sc">$</span>aic</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -1402.104</code></pre>
</div>
<div class="sourceCode cell-code" id="cb156"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a>nasdaq_log_diff.ts.arima2<span class="sc">$</span>aic</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -1403.86</code></pre>
</div>
<div class="sourceCode cell-code" id="cb158"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a>nasdaq_log_diff.ts.arima3<span class="sc">$</span>aic</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -1402.076</code></pre>
</div>
<div class="sourceCode cell-code" id="cb160"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a>nasdaq_log_diff.ts.arima4<span class="sc">$</span>aic</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -1402.188</code></pre>
</div>
</div>
<p>podemos ver que pelo menor AIC o melhor modelo é o ARIMA(0,0,0) e que nenhum dos coeficientes são significativos.</p>
</section>
<section id="fazer-o-teste-e-plotar-os-gráficos-associados-ao-teste-de-ljung-box-para-avaliar-a-correlação-dos-resíduos.-2" class="level3">
<h3 class="anchored" data-anchor-id="fazer-o-teste-e-plotar-os-gráficos-associados-ao-teste-de-ljung-box-para-avaliar-a-correlação-dos-resíduos.-2">Fazer o teste e plotar os gráficos associados ao teste de Ljung-Box para avaliar a correlação dos resíduos.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb162"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tsdisplay</span>(<span class="fu">arima.errors</span>(nasdaq_log_diff.ts.arima2))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Deprecated, use residuals.Arima(object, type='regression') instead</code></pre>
</div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-44-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb164"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Box.test</span>(<span class="fu">resid</span>(nasdaq_log_diff.ts.arima2), <span class="at">type =</span> <span class="st">"Ljung"</span>, <span class="at">lag =</span> <span class="dv">20</span>, <span class="at">fitdf =</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Box-Ljung test

data:  resid(nasdaq_log_diff.ts.arima2)
X-squared = 16.298, df = 20, p-value = 0.698</code></pre>
</div>
</div>
<p>com isso a hipótese nula não pode ser rejeitada, então os resíduos são independentes.</p>
</section>
<section id="para-o-melhor-modelo-arma-estimado-obter-o-correlograma-dos-resíduos-ao-quadrado.-2" class="level3">
<h3 class="anchored" data-anchor-id="para-o-melhor-modelo-arma-estimado-obter-o-correlograma-dos-resíduos-ao-quadrado.-2">Para o melhor modelo ARMA estimado, obter o correlograma dos resíduos ao quadrado.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb166"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">1</span>))</span>
<span id="cb166-2"><a href="#cb166-2" aria-hidden="true" tabindex="-1"></a><span class="fu">acf</span>(nasdaq_log_diff.ts.arima2<span class="sc">$</span>residuals<span class="sc">^</span><span class="dv">2</span>, <span class="at">lag.max=</span><span class="dv">20</span>)</span>
<span id="cb166-3"><a href="#cb166-3" aria-hidden="true" tabindex="-1"></a><span class="fu">pacf</span>(nasdaq_log_diff.ts.arima2<span class="sc">$</span>residuals<span class="sc">^</span><span class="dv">2</span>, <span class="at">lag.max =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-45-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="fazer-o-teste-para-efeitos-arch.-2" class="level3">
<h3 class="anchored" data-anchor-id="fazer-o-teste-para-efeitos-arch.-2">Fazer o teste para efeitos ARCH.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb167"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a>residuos_quadrados <span class="ot">&lt;-</span> nasdaq_log_diff.ts.arima2<span class="sc">$</span>residuals<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb167-2"><a href="#cb167-2" aria-hidden="true" tabindex="-1"></a>residuos_quadrados</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Time Series:
Start = 2 
End = 230 
Frequency = 1 
  [1] 3.039570e-05 2.611736e-04 5.724819e-04 2.386775e-05 7.456004e-05
  [6] 2.582654e-04 2.457829e-05 3.245739e-05 4.239709e-09 1.931710e-04
 [11] 1.205316e-04 6.166811e-04 3.434440e-04 1.623467e-05 1.036832e-05
 [16] 2.581719e-04 6.521840e-05 4.485169e-04 2.319103e-04 3.398805e-04
 [21] 9.393015e-04 3.024480e-04 1.294119e-04 3.058207e-04 3.347429e-04
 [26] 1.340829e-04 5.555070e-05 1.779121e-04 1.899708e-05 6.112223e-05
 [31] 3.734817e-04 5.145407e-05 7.137647e-04 7.935556e-09 3.412940e-05
 [36] 3.378713e-04 2.429206e-05 5.624921e-06 6.456434e-05 3.525354e-05
 [41] 3.295242e-04 6.296929e-06 1.933699e-04 6.653916e-06 4.891505e-04
 [46] 3.656395e-04 9.614792e-06 3.916162e-04 7.351768e-07 5.334003e-04
 [51] 7.755286e-05 6.203845e-06 2.048085e-04 3.075180e-04 7.464395e-05
 [56] 2.969664e-06 3.655580e-05 3.441691e-05 2.691326e-04 3.497485e-05
 [61] 2.505335e-04 1.626448e-05 4.310212e-05 1.465954e-04 3.833375e-05
 [66] 2.793371e-06 3.278489e-05 9.865246e-05 3.346310e-04 2.398667e-05
 [71] 2.095565e-06 2.986136e-06 1.121942e-06 8.911231e-05 9.263356e-08
 [76] 1.847676e-05 4.556954e-04 1.084379e-05 5.117520e-04 3.078547e-05
 [81] 6.338371e-06 1.500207e-04 3.542196e-05 3.951403e-05 4.350543e-04
 [86] 1.466434e-07 5.938056e-05 8.083680e-05 1.748919e-07 2.430584e-05
 [91] 2.657930e-05 1.003150e-05 1.278623e-04 1.842827e-04 1.455275e-05
 [96] 1.282952e-05 1.980590e-04 5.550132e-05 2.439036e-04 4.101660e-04
[101] 3.378449e-06 5.934354e-05 1.289207e-04 8.537925e-05 4.974282e-06
[106] 4.718213e-06 2.066923e-04 7.693012e-05 3.343923e-08 1.905599e-04
[111] 4.716478e-05 6.428048e-06 1.006894e-04 6.662100e-05 9.014233e-06
[116] 1.829594e-04 6.547830e-05 1.335437e-04 1.705182e-04 2.244222e-04
[121] 1.650140e-06 1.972353e-06 1.686683e-04 5.136416e-07 1.019641e-05
[126] 9.162580e-05 7.364194e-06 1.913193e-07 1.687367e-05 1.012380e-04
[131] 2.039498e-04 9.822484e-06 6.214156e-05 3.878255e-05 1.141510e-06
[136] 4.889803e-04 1.256439e-05 2.322122e-07 2.211855e-05 6.738579e-06
[141] 4.693563e-05 3.034615e-04 4.557668e-07 3.263024e-05 5.451354e-04
[146] 5.553579e-06 2.496146e-05 2.237653e-05 8.594436e-05 1.724460e-04
[151] 4.423103e-08 6.685322e-05 8.257259e-05 1.650154e-04 1.668004e-04
[156] 1.728179e-04 1.114933e-05 1.978818e-04 5.779558e-07 2.082765e-04
[161] 4.115223e-04 6.386196e-05 4.920479e-05 2.524401e-04 1.624127e-05
[166] 6.609557e-08 2.555834e-06 4.612701e-06 1.444776e-04 1.066274e-04
[171] 2.026857e-07 9.849551e-05 1.391003e-04 2.325325e-06 4.535733e-05
[176] 2.934711e-04 1.523191e-06 1.379305e-05 2.814255e-04 3.897472e-04
[181] 5.263806e-06 9.738995e-06 2.940649e-04 7.434090e-07 4.725265e-05
[186] 6.248666e-11 2.803820e-05 4.083644e-04 1.453013e-04 6.742622e-06
[191] 2.102291e-04 6.539956e-06 1.970087e-05 3.296146e-05 5.851529e-05
[196] 1.891105e-04 1.111966e-04 1.520675e-05 3.140496e-04 1.219446e-04
[201] 2.835732e-04 1.642749e-06 6.271451e-05 6.720044e-04 3.658318e-04
[206] 5.676769e-06 1.029212e-04 1.185989e-05 2.206063e-04 2.652653e-04
[211] 1.532367e-04 2.646543e-06 5.689768e-05 3.604250e-07 1.180645e-04
[216] 3.564852e-04 1.279471e-05 4.872804e-04 4.935730e-07 4.580217e-07
[221] 2.884150e-07 9.649824e-05 5.343716e-05 1.059631e-05 5.886822e-06
[226] 4.258181e-06 2.199803e-06 9.024954e-06 1.324467e-05</code></pre>
</div>
<div class="sourceCode cell-code" id="cb169"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ArchTest</span>(residuos_quadrados, <span class="at">lag =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    ARCH LM-test; Null hypothesis: no ARCH effects

data:  residuos_quadrados
Chi-squared = 2.8765, df = 3, p-value = 0.4111</code></pre>
</div>
</div>
</section>
<section id="identificar-o-melhor-processo-archgarch.-2" class="level3">
<h3 class="anchored" data-anchor-id="identificar-o-melhor-processo-archgarch.-2">Identificar o melhor processo ARCH/GARCH.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb171"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a>aTSA<span class="sc">::</span><span class="fu">arch.test</span>(nasdaq_log_diff.ts.arima2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>ARCH heteroscedasticity test for residuals 
alternative: heteroscedastic 

Portmanteau-Q test: 
     order    PQ p.value
[1,]     4  5.57   0.234
[2,]     8 11.42   0.179
[3,]    12 17.57   0.129
[4,]    16 21.51   0.160
[5,]    20 24.15   0.236
[6,]    24 24.70   0.422
Lagrange-Multiplier test: 
     order    LM  p.value
[1,]     4 31.94 5.39e-07
[2,]     8 14.79 3.88e-02
[3,]    12  7.89 7.23e-01
[4,]    16  4.95 9.93e-01
[5,]    20  3.79 1.00e+00
[6,]    24  2.95 1.00e+00</code></pre>
</div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-47-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb173"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a>nortsTest<span class="sc">::</span><span class="fu">arch.test</span>(nasdaq_log_diff.ts, <span class="at">lag.max=</span><span class="dv">6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Box-Ljung test

data:  y^2
X-squared = 6.9191, df = 6, p-value = 0.3284
alternative hypothesis: y is heteroscedastic</code></pre>
</div>
</div>
</section>
<section id="estimar-o-modelo-arma-garch-e-verificar-a-significância-dos-coeficientes.-2" class="level3">
<h3 class="anchored" data-anchor-id="estimar-o-modelo-arma-garch-e-verificar-a-significância-dos-coeficientes.-2">Estimar o modelo ARMA-GARCH e verificar a significância dos coeficientes.</h3>
<p>Como o modelo não apresenta heterocedasticidade condicional, não é necessário estimar o modelo ARMA-GARCH.</p>
</section>
<section id="avaliar-se-os-resíduos-gerados-têm-comportamento-de-ruído-branco.-2" class="level3">
<h3 class="anchored" data-anchor-id="avaliar-se-os-resíduos-gerados-têm-comportamento-de-ruído-branco.-2">Avaliar se os resíduos gerados têm comportamento de ruído branco.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb175"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Box.test</span>(nasdaq_log_diff.ts.arima2<span class="sc">$</span>residuals, <span class="at">type =</span> <span class="st">"Ljung"</span>, <span class="at">lag =</span> <span class="dv">20</span>, <span class="at">fitdf =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Box-Ljung test

data:  nasdaq_log_diff.ts.arima2$residuals
X-squared = 16.298, df = 18, p-value = 0.5717</code></pre>
</div>
</div>
<p>com isso vemos que a hipótese nula não pode ser rejeitada, então os resíduos são independentes.</p>
</section>
<section id="fazer-as-previsões-considerando-os-14-últimos-valores-da-série.-2" class="level3">
<h3 class="anchored" data-anchor-id="fazer-as-previsões-considerando-os-14-últimos-valores-da-série.-2">Fazer as previsões considerando os 14 últimos valores da série.</h3>
<p>como o modelo é ARIMA(0,0,0) então vamos usar os 14 últimos valores da série para fazer a previsão.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb177"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a>nasdaq_log_diff.ts.arima2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = nasdaq_log_diff.ts, order = c(0, 0, 0))

Coefficients:
      intercept
         0.0014
s.e.     0.0007

sigma^2 estimated as 0.0001252:  log likelihood = 703.93,  aic = -1403.86</code></pre>
</div>
<div class="sourceCode cell-code" id="cb179"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a>previsao <span class="ot">&lt;-</span> <span class="fu">predict</span>(nasdaq_log_diff.ts.arima2, <span class="at">n.ahead =</span> <span class="dv">14</span>)</span>
<span id="cb179-2"><a href="#cb179-2" aria-hidden="true" tabindex="-1"></a>previsao</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$pred
Time Series:
Start = 231 
End = 244 
Frequency = 1 
 [1] 0.001373509 0.001373509 0.001373509 0.001373509 0.001373509 0.001373509
 [7] 0.001373509 0.001373509 0.001373509 0.001373509 0.001373509 0.001373509
[13] 0.001373509 0.001373509

$se
Time Series:
Start = 231 
End = 244 
Frequency = 1 
 [1] 0.0111885 0.0111885 0.0111885 0.0111885 0.0111885 0.0111885 0.0111885
 [8] 0.0111885 0.0111885 0.0111885 0.0111885 0.0111885 0.0111885 0.0111885</code></pre>
</div>
</div>
</section>
</section>
<section id="bovespa" class="level2">
<h2 class="anchored" data-anchor-id="bovespa">BOVESPA</h2>
<section id="tranformar-para-um-ts-3" class="level3">
<h3 class="anchored" data-anchor-id="tranformar-para-um-ts-3">tranformar para um ts</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb181"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a>bovespa.ts <span class="ot">&lt;-</span> <span class="fu">ts</span>(bovespa<span class="sc">$</span>BVSP.Close)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="plotar-a-série-no-nível-3" class="level4">
<h4 class="anchored" data-anchor-id="plotar-a-série-no-nível-3">Plotar a série no nível</h4>
<p>vamos usar o valor de fechamento para fazer os procedimentos</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb182"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb182-1"><a href="#cb182-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(bovespa.ts, <span class="at">xlab =</span> <span class="st">"Tempo"</span>, <span class="at">ylab =</span> <span class="st">"preço"</span>, <span class="at">main =</span> <span class="st">"BOVESPA"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-51-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="fazer-o-teste-adf.-3" class="level4">
<h4 class="anchored" data-anchor-id="fazer-o-teste-adf.-3">Fazer o teste ADF.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb183"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="fu">adf.test</span>(bovespa.ts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Augmented Dickey-Fuller Test 
alternative: stationary 
 
Type 1: no drift no trend 
     lag   ADF p.value
[1,]   0 1.107   0.928
[2,]   1 1.176   0.936
[3,]   2 1.151   0.933
[4,]   3 1.057   0.921
[5,]   4 0.938   0.906
Type 2: with drift no trend 
     lag    ADF p.value
[1,]   0 -0.678   0.809
[2,]   1 -0.895   0.733
[3,]   2 -0.740   0.788
[4,]   3 -0.607   0.834
[5,]   4 -0.644   0.821
Type 3: with drift and trend 
     lag   ADF p.value
[1,]   0 -1.74   0.684
[2,]   1 -1.81   0.657
[3,]   2 -1.73   0.690
[4,]   3 -1.74   0.684
[5,]   4 -1.89   0.623
---- 
Note: in fact, p.value = 0.01 means p.value &lt;= 0.01 </code></pre>
</div>
</div>
<p>como o p-valor é maior que 0.05, não rejeitamos a hipótese nula de que a série é não estacionária.</p>
</section>
<section id="obter-a-série-do-log.-3" class="level4">
<h4 class="anchored" data-anchor-id="obter-a-série-do-log.-3">Obter a série do log.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb185"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a>bovespa_log.ts <span class="ot">&lt;-</span> <span class="fu">log</span>(bovespa.ts)</span>
<span id="cb185-2"><a href="#cb185-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(bovespa_log.ts, <span class="at">xlab =</span> <span class="st">"Tempo"</span>, <span class="at">ylab =</span> <span class="st">"log_preço"</span>, <span class="at">main =</span> <span class="st">"BOVESPA"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-53-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="obter-a-série-da-diferença-do-log.-3" class="level4">
<h4 class="anchored" data-anchor-id="obter-a-série-da-diferença-do-log.-3">Obter a série da diferença do log.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb186"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a>bovespa_log_diff.ts <span class="ot">&lt;-</span> <span class="fu">diff</span>(bovespa_log.ts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="fazer-novamente-o-teste-adf.-3" class="level4">
<h4 class="anchored" data-anchor-id="fazer-novamente-o-teste-adf.-3">Fazer novamente o teste ADF.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb187"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="fu">adf.test</span>(bovespa_log_diff.ts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Augmented Dickey-Fuller Test 
alternative: stationary 
 
Type 1: no drift no trend 
     lag    ADF p.value
[1,]   0 -14.36    0.01
[2,]   1 -10.70    0.01
[3,]   2  -8.83    0.01
[4,]   3  -7.20    0.01
[5,]   4  -6.54    0.01
Type 2: with drift no trend 
     lag    ADF p.value
[1,]   0 -14.42    0.01
[2,]   1 -10.77    0.01
[3,]   2  -8.89    0.01
[4,]   3  -7.26    0.01
[5,]   4  -6.60    0.01
Type 3: with drift and trend 
     lag    ADF p.value
[1,]   0 -14.40    0.01
[2,]   1 -10.77    0.01
[3,]   2  -8.92    0.01
[4,]   3  -7.30    0.01
[5,]   4  -6.66    0.01
---- 
Note: in fact, p.value = 0.01 means p.value &lt;= 0.01 </code></pre>
</div>
</div>
<p>como o p-valor é menor que 0.05, rejeitamos a hipótese nula de que a série é não estacionária. então podemos usar a série da diferença do log para fazer a análise.</p>
</section>
<section id="plotar-a-série-da-diferença-do-log.-3" class="level4">
<h4 class="anchored" data-anchor-id="plotar-a-série-da-diferença-do-log.-3">Plotar a série da diferença do log.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb189"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(bovespa_log_diff.ts, <span class="at">xlab =</span> <span class="st">"Tempo"</span>, <span class="at">ylab =</span> <span class="st">"diff_log_preço"</span>, <span class="at">main =</span> <span class="st">"BOVESPA"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-56-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="construir-o-correlograma-da-série-da-diferença-do-log.-3" class="level4">
<h4 class="anchored" data-anchor-id="construir-o-correlograma-da-série-da-diferença-do-log.-3">Construir o correlograma da série da diferença do log.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb190"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true" tabindex="-1"></a><span class="fu">acf</span>(bovespa_log_diff.ts,<span class="at">lag.max=</span><span class="dv">50</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-57-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb191"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pacf</span>(bovespa_log_diff.ts,<span class="at">lag.max=</span><span class="dv">50</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-57-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="identificar-o-processo-arma-adequado.-3" class="level3">
<h3 class="anchored" data-anchor-id="identificar-o-processo-arma-adequado.-3">Identificar o processo ARMA adequado.</h3>
<p>com a análise podemos ver que o melhor modelo para o diff_log_preço é o MA(1)</p>
</section>
<section id="estimar-o-modelo-arma-e-verificar-a-significância-dos-coeficientes.-3" class="level3">
<h3 class="anchored" data-anchor-id="estimar-o-modelo-arma-e-verificar-a-significância-dos-coeficientes.-3">Estimar o modelo ARMA e verificar a significância dos coeficientes.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb192"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb192-1"><a href="#cb192-1" aria-hidden="true" tabindex="-1"></a>bovespa_log_diff.ts.arima <span class="ot">&lt;-</span> <span class="fu">arima</span>(bovespa_log_diff.ts, <span class="at">order =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>))</span>
<span id="cb192-2"><a href="#cb192-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(bovespa_log_diff.ts.arima)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = bovespa_log_diff.ts, order = c(0, 0, 1))

Coefficients:
         ma1  intercept
      0.0523      8e-04
s.e.  0.0696      8e-04

sigma^2 estimated as 0.0001167:  log likelihood = 708.88,  aic = -1411.76

Training set error measures:
                       ME       RMSE         MAE      MPE     MAPE      MASE
Training set 4.908561e-06 0.01080163 0.008690822 101.0195 101.7354 0.7298515
                     ACF1
Training set -0.002921497</code></pre>
</div>
<div class="sourceCode cell-code" id="cb194"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb194-1"><a href="#cb194-1" aria-hidden="true" tabindex="-1"></a>bovespa_log_diff.ts.arima2 <span class="ot">&lt;-</span> <span class="fu">arima</span>(bovespa_log_diff.ts, <span class="at">order =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>))</span>
<span id="cb194-2"><a href="#cb194-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(bovespa_log_diff.ts.arima2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = bovespa_log_diff.ts, order = c(0, 0, 0))

Coefficients:
      intercept
          8e-04
s.e.      7e-04

sigma^2 estimated as 0.000117:  log likelihood = 708.6,  aic = -1413.19

Training set error measures:
                      ME       RMSE         MAE     MPE     MAPE      MASE
Training set 7.25298e-19 0.01081499 0.008743094 103.457 104.5477 0.7342413
                   ACF1
Training set 0.04688106</code></pre>
</div>
<div class="sourceCode cell-code" id="cb196"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb196-1"><a href="#cb196-1" aria-hidden="true" tabindex="-1"></a>bovespa_log_diff.ts.arima3 <span class="ot">&lt;-</span> <span class="fu">arima</span>(bovespa_log_diff.ts, <span class="at">order =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>))</span>
<span id="cb196-2"><a href="#cb196-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(bovespa_log_diff.ts.arima3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = bovespa_log_diff.ts, order = c(1, 0, 0))

Coefficients:
         ar1  intercept
      0.0477      8e-04
s.e.  0.0667      8e-04

sigma^2 estimated as 0.0001167:  log likelihood = 708.85,  aic = -1411.71

Training set error measures:
                       ME       RMSE         MAE      MPE     MAPE     MASE
Training set 4.662123e-06 0.01080284 0.008694483 101.0801 101.7124 0.730159
                    ACF1
Training set 0.001600315</code></pre>
</div>
<div class="sourceCode cell-code" id="cb198"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb198-1"><a href="#cb198-1" aria-hidden="true" tabindex="-1"></a>bovespa_log_diff.ts.arima4 <span class="ot">&lt;-</span> <span class="fu">arima</span>(bovespa_log_diff.ts, <span class="at">order =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>))</span>
<span id="cb198-2"><a href="#cb198-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(bovespa_log_diff.ts.arima4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = bovespa_log_diff.ts, order = c(1, 0, 1))

Coefficients:
          ar1    ma1  intercept
      -0.2265  0.281      8e-04
s.e.   0.6298  0.621      7e-04

sigma^2 estimated as 0.0001166:  log likelihood = 708.95,  aic = -1409.89

Training set error measures:
                       ME       RMSE         MAE      MPE     MAPE      MASE
Training set 3.410008e-06 0.01079835 0.008685161 101.5395 102.0987 0.7293761
                     ACF1
Training set -0.005490905</code></pre>
</div>
</div>
</section>
<section id="plot-akaike-3" class="level3">
<h3 class="anchored" data-anchor-id="plot-akaike-3">plot akaike</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb200"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb200-1"><a href="#cb200-1" aria-hidden="true" tabindex="-1"></a>bovespa_log_diff.ts.arima<span class="sc">$</span>aic</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -1411.756</code></pre>
</div>
<div class="sourceCode cell-code" id="cb202"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb202-1"><a href="#cb202-1" aria-hidden="true" tabindex="-1"></a>bovespa_log_diff.ts.arima2<span class="sc">$</span>aic</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -1413.195</code></pre>
</div>
<div class="sourceCode cell-code" id="cb204"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb204-1"><a href="#cb204-1" aria-hidden="true" tabindex="-1"></a>bovespa_log_diff.ts.arima3<span class="sc">$</span>aic</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -1411.705</code></pre>
</div>
<div class="sourceCode cell-code" id="cb206"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb206-1"><a href="#cb206-1" aria-hidden="true" tabindex="-1"></a>bovespa_log_diff.ts.arima4<span class="sc">$</span>aic</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -1409.894</code></pre>
</div>
</div>
<p>podemos ver que pelo menor AIC o melhor modelo é o ARIMA(0,0,0) e que os coeficientes são significativos.</p>
</section>
<section id="fazer-o-teste-e-plotar-os-gráficos-associados-ao-teste-de-ljung-box-para-avaliar-a-correlação-dos-resíduos.-3" class="level3">
<h3 class="anchored" data-anchor-id="fazer-o-teste-e-plotar-os-gráficos-associados-ao-teste-de-ljung-box-para-avaliar-a-correlação-dos-resíduos.-3">Fazer o teste e plotar os gráficos associados ao teste de Ljung-Box para avaliar a correlação dos resíduos.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb208"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb208-1"><a href="#cb208-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tsdisplay</span>(<span class="fu">arima.errors</span>(bovespa_log_diff.ts.arima2))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Deprecated, use residuals.Arima(object, type='regression') instead</code></pre>
</div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-60-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb210"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb210-1"><a href="#cb210-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Box.test</span>(<span class="fu">resid</span>(bovespa_log_diff.ts.arima2), <span class="at">type =</span> <span class="st">"Ljung"</span>, <span class="at">lag =</span> <span class="dv">20</span>, <span class="at">fitdf =</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Box-Ljung test

data:  resid(bovespa_log_diff.ts.arima2)
X-squared = 16.039, df = 20, p-value = 0.7142</code></pre>
</div>
</div>
<p>com isso a hipótese nula não pode ser rejeitada, então os resíduos são independentes.</p>
</section>
<section id="para-o-melhor-modelo-arma-estimado-obter-o-correlograma-dos-resíduos-ao-quadrado.-3" class="level3">
<h3 class="anchored" data-anchor-id="para-o-melhor-modelo-arma-estimado-obter-o-correlograma-dos-resíduos-ao-quadrado.-3">Para o melhor modelo ARMA estimado, obter o correlograma dos resíduos ao quadrado.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb212"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb212-1"><a href="#cb212-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">1</span>))</span>
<span id="cb212-2"><a href="#cb212-2" aria-hidden="true" tabindex="-1"></a><span class="fu">acf</span>(bovespa_log_diff.ts.arima2<span class="sc">$</span>residuals<span class="sc">^</span><span class="dv">2</span>, <span class="at">lag.max=</span><span class="dv">20</span>)</span>
<span id="cb212-3"><a href="#cb212-3" aria-hidden="true" tabindex="-1"></a><span class="fu">pacf</span>(bovespa_log_diff.ts.arima2<span class="sc">$</span>residuals<span class="sc">^</span><span class="dv">2</span>, <span class="at">lag.max =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-61-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="fazer-o-teste-para-efeitos-arch.-3" class="level3">
<h3 class="anchored" data-anchor-id="fazer-o-teste-para-efeitos-arch.-3">Fazer o teste para efeitos ARCH.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb213"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb213-1"><a href="#cb213-1" aria-hidden="true" tabindex="-1"></a>residuos_quadrados <span class="ot">&lt;-</span> bovespa_log_diff.ts.arima2<span class="sc">$</span>residuals<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb213-2"><a href="#cb213-2" aria-hidden="true" tabindex="-1"></a>residuos_quadrados</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Time Series:
Start = 2 
End = 229 
Frequency = 1 
  [1] 4.744924e-04 1.073676e-04 3.894063e-04 1.298516e-04 7.825912e-06
  [6] 2.108353e-04 4.698860e-05 5.329418e-08 8.865232e-05 2.644427e-04
 [11] 3.759183e-04 6.823532e-05 1.702231e-05 4.965723e-05 3.689507e-05
 [16] 1.198950e-04 8.993293e-05 2.377831e-06 2.241540e-04 3.920349e-05
 [21] 1.903772e-04 1.362543e-04 4.884071e-04 1.965581e-04 1.214586e-06
 [26] 3.298193e-05 2.968112e-04 4.030360e-04 6.815052e-06 3.165465e-05
 [31] 1.381531e-04 2.445240e-04 1.178540e-05 3.945290e-05 4.270048e-04
 [36] 2.023417e-05 3.270182e-04 5.382156e-06 6.699545e-05 3.618233e-05
 [41] 1.206832e-04 1.957114e-05 5.196782e-05 2.816373e-05 4.473671e-04
 [46] 2.152919e-04 2.164986e-04 3.132243e-05 6.880761e-06 1.081460e-05
 [51] 4.337666e-05 2.230754e-04 1.260482e-04 2.095402e-09 7.244746e-05
 [56] 5.738083e-04 7.039801e-05 5.905930e-05 2.044086e-04 2.706262e-05
 [61] 3.203201e-04 3.459908e-04 2.012430e-05 7.734649e-06 9.165464e-05
 [66] 5.450945e-06 8.698287e-05 1.697077e-03 3.086581e-05 2.340980e-05
 [71] 6.108163e-06 1.066889e-05 3.563879e-07 4.932965e-04 1.275120e-05
 [76] 2.324223e-05 6.095177e-05 9.262725e-05 2.668267e-05 1.895128e-04
 [81] 6.284002e-04 4.263717e-06 8.456276e-06 7.785773e-04 5.894739e-05
 [86] 8.592929e-05 5.404143e-06 4.493212e-05 1.278907e-06 1.942113e-05
 [91] 7.185326e-05 1.176061e-04 2.615173e-05 2.479959e-05 3.140531e-05
 [96] 1.134878e-05 1.234767e-04 1.138741e-04 4.793071e-05 3.562383e-05
[101] 1.754730e-04 4.363192e-05 3.836374e-04 2.916041e-04 1.906573e-07
[106] 2.576825e-04 4.682566e-05 1.532903e-04 3.673581e-06 3.428473e-05
[111] 3.587077e-04 2.372822e-07 2.190001e-05 7.108613e-05 7.615271e-06
[116] 3.434219e-05 1.743867e-04 1.824662e-07 4.867865e-05 4.756047e-05
[121] 6.366419e-05 1.874921e-04 1.083812e-05 1.575713e-04 3.352084e-05
[126] 1.008535e-05 3.499377e-04 1.361654e-04 7.852875e-05 4.801253e-05
[131] 9.053787e-06 1.613098e-04 1.930904e-04 1.237441e-05 1.592983e-05
[136] 1.052425e-05 1.382604e-05 2.931641e-04 7.269134e-05 2.194895e-05
[141] 1.387897e-05 4.831617e-04 7.255919e-07 1.881347e-04 4.230628e-05
[146] 1.601679e-05 9.302658e-06 9.542392e-05 3.460613e-06 1.037364e-05
[151] 4.255497e-05 1.656466e-06 1.023780e-05 1.316820e-04 3.936408e-05
[156] 3.346778e-05 3.696392e-05 8.515342e-06 8.679601e-05 2.013825e-04
[161] 2.593801e-04 1.044596e-04 1.210163e-04 1.047535e-04 1.021368e-04
[166] 6.650377e-05 2.611852e-04 3.106483e-04 3.143770e-06 2.100064e-05
[171] 1.519492e-04 4.355132e-05 1.621706e-04 7.142492e-05 9.467232e-07
[176] 8.927449e-05 3.736912e-05 2.260166e-05 2.054158e-05 4.083018e-05
[181] 5.065384e-04 3.842684e-06 2.289122e-06 2.509712e-04 1.475510e-07
[186] 1.303508e-04 4.085619e-05 1.907172e-04 2.288374e-04 7.526568e-07
[191] 1.321922e-05 4.902780e-05 6.100430e-05 1.650498e-04 3.600717e-06
[196] 1.423518e-04 3.513153e-05 3.812993e-05 2.842862e-04 1.637710e-06
[201] 6.828734e-05 1.651487e-05 6.141159e-05 8.126889e-05 2.663494e-04
[206] 1.885613e-04 5.774494e-05 2.148395e-05 2.541763e-04 6.686416e-04
[211] 3.900512e-06 3.342194e-05 4.869181e-06 2.308552e-06 1.629396e-04
[216] 8.680154e-06 5.493705e-04 8.611577e-05 9.641041e-06 5.531397e-05
[221] 2.177386e-05 6.827878e-06 1.221245e-05 8.084158e-05 1.114622e-07
[226] 3.589393e-05 1.804657e-05 7.953396e-05</code></pre>
</div>
<div class="sourceCode cell-code" id="cb215"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb215-1"><a href="#cb215-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ArchTest</span>(residuos_quadrados, <span class="at">lag =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    ARCH LM-test; Null hypothesis: no ARCH effects

data:  residuos_quadrados
Chi-squared = 0.46371, df = 3, p-value = 0.9268</code></pre>
</div>
</div>
</section>
<section id="identificar-o-melhor-processo-archgarch.-3" class="level3">
<h3 class="anchored" data-anchor-id="identificar-o-melhor-processo-archgarch.-3">Identificar o melhor processo ARCH/GARCH.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb217"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb217-1"><a href="#cb217-1" aria-hidden="true" tabindex="-1"></a>aTSA<span class="sc">::</span><span class="fu">arch.test</span>(bovespa_log_diff.ts.arima2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>ARCH heteroscedasticity test for residuals 
alternative: heteroscedastic 

Portmanteau-Q test: 
     order    PQ p.value
[1,]     4  4.34   0.361
[2,]     8  9.16   0.329
[3,]    12 11.94   0.451
[4,]    16 27.23   0.039
[5,]    20 28.34   0.102
[6,]    24 32.05   0.126
Lagrange-Multiplier test: 
     order    LM  p.value
[1,]     4 66.35 2.58e-14
[2,]     8 29.86 1.01e-04
[3,]    12 19.30 5.60e-02
[4,]    16 12.38 6.50e-01
[5,]    20  8.17 9.85e-01
[6,]    24  6.40 1.00e+00</code></pre>
</div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-63-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb219"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb219-1"><a href="#cb219-1" aria-hidden="true" tabindex="-1"></a>nortsTest<span class="sc">::</span><span class="fu">arch.test</span>(bovespa_log_diff.ts, <span class="at">lag.max=</span><span class="dv">6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Box-Ljung test

data:  y^2
X-squared = 6.197, df = 6, p-value = 0.4015
alternative hypothesis: y is heteroscedastic</code></pre>
</div>
</div>
</section>
<section id="estimar-o-modelo-arma-garch-e-verificar-a-significância-dos-coeficientes.-3" class="level3">
<h3 class="anchored" data-anchor-id="estimar-o-modelo-arma-garch-e-verificar-a-significância-dos-coeficientes.-3">Estimar o modelo ARMA-GARCH e verificar a significância dos coeficientes.</h3>
<p>Como o modelo não apresenta heterocedasticidade condicional, não é necessário estimar o modelo ARMA-GARCH.</p>
</section>
<section id="avaliar-se-os-resíduos-gerados-têm-comportamento-de-ruído-branco.-3" class="level3">
<h3 class="anchored" data-anchor-id="avaliar-se-os-resíduos-gerados-têm-comportamento-de-ruído-branco.-3">Avaliar se os resíduos gerados têm comportamento de ruído branco.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb221"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb221-1"><a href="#cb221-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Box.test</span>(bovespa_log_diff.ts.arima2<span class="sc">$</span>residuals, <span class="at">type =</span> <span class="st">"Ljung"</span>, <span class="at">lag =</span> <span class="dv">20</span>, <span class="at">fitdf =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Box-Ljung test

data:  bovespa_log_diff.ts.arima2$residuals
X-squared = 16.039, df = 18, p-value = 0.5898</code></pre>
</div>
</div>
<p>com isso vemos que a hipótese nula não pode ser rejeitada, então os resíduos são independentes.</p>
</section>
<section id="fazer-as-previsões-considerando-os-14-últimos-valores-da-série.-3" class="level3">
<h3 class="anchored" data-anchor-id="fazer-as-previsões-considerando-os-14-últimos-valores-da-série.-3">Fazer as previsões considerando os 14 últimos valores da série.</h3>
<p>como o modelo é ARIMA(0,0,0) então vamos usar os 14 últimos valores da série para fazer a previsão.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb223"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb223-1"><a href="#cb223-1" aria-hidden="true" tabindex="-1"></a>bovespa_log_diff.ts.arima2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = bovespa_log_diff.ts, order = c(0, 0, 0))

Coefficients:
      intercept
          8e-04
s.e.      7e-04

sigma^2 estimated as 0.000117:  log likelihood = 708.6,  aic = -1413.19</code></pre>
</div>
<div class="sourceCode cell-code" id="cb225"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb225-1"><a href="#cb225-1" aria-hidden="true" tabindex="-1"></a>previsao <span class="ot">&lt;-</span> <span class="fu">predict</span>(bovespa_log_diff.ts.arima2, <span class="at">n.ahead =</span> <span class="dv">14</span>)</span>
<span id="cb225-2"><a href="#cb225-2" aria-hidden="true" tabindex="-1"></a>previsao</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$pred
Time Series:
Start = 230 
End = 243 
Frequency = 1 
 [1] 0.0007886404 0.0007886404 0.0007886404 0.0007886404 0.0007886404
 [6] 0.0007886404 0.0007886404 0.0007886404 0.0007886404 0.0007886404
[11] 0.0007886404 0.0007886404 0.0007886404 0.0007886404

$se
Time Series:
Start = 230 
End = 243 
Frequency = 1 
 [1] 0.01081499 0.01081499 0.01081499 0.01081499 0.01081499 0.01081499
 [7] 0.01081499 0.01081499 0.01081499 0.01081499 0.01081499 0.01081499
[13] 0.01081499 0.01081499</code></pre>
</div>
</div>
</section>
</section>
<section id="brent" class="level2">
<h2 class="anchored" data-anchor-id="brent">BRENT</h2>
<section id="tranformar-para-um-ts-4" class="level3">
<h3 class="anchored" data-anchor-id="tranformar-para-um-ts-4">tranformar para um ts</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb227"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb227-1"><a href="#cb227-1" aria-hidden="true" tabindex="-1"></a>brent.ts <span class="ot">&lt;-</span> <span class="fu">ts</span>(brent[,<span class="dv">4</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="plotar-a-série-no-nível-4" class="level4">
<h4 class="anchored" data-anchor-id="plotar-a-série-no-nível-4">Plotar a série no nível</h4>
<p>vamos usar o valor de fechamento para fazer os procedimentos</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb228"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb228-1"><a href="#cb228-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(brent.ts, <span class="at">xlab =</span> <span class="st">"Tempo"</span>, <span class="at">ylab =</span> <span class="st">"preço"</span>, <span class="at">main =</span> <span class="st">"BRENT"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-67-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="fazer-o-teste-adf.-4" class="level4">
<h4 class="anchored" data-anchor-id="fazer-o-teste-adf.-4">Fazer o teste ADF.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb229"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb229-1"><a href="#cb229-1" aria-hidden="true" tabindex="-1"></a><span class="fu">adf.test</span>(brent.ts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Augmented Dickey-Fuller Test 
alternative: stationary 
 
Type 1: no drift no trend 
     lag      ADF p.value
[1,]   0 -0.11806   0.610
[2,]   1  0.04975   0.658
[3,]   2  0.00625   0.646
[4,]   3  0.01783   0.649
[5,]   4 -0.00523   0.642
Type 2: with drift no trend 
     lag   ADF p.value
[1,]   0 -2.21   0.246
[2,]   1 -2.34   0.196
[3,]   2 -2.41   0.169
[4,]   3 -2.04   0.311
[5,]   4 -2.26   0.227
Type 3: with drift and trend 
     lag   ADF p.value
[1,]   0 -2.33   0.437
[2,]   1 -2.36   0.425
[3,]   2 -2.46   0.383
[4,]   3 -2.06   0.550
[5,]   4 -2.31   0.447
---- 
Note: in fact, p.value = 0.01 means p.value &lt;= 0.01 </code></pre>
</div>
</div>
<p>como o p-valor é maior que 0.05, não rejeitamos a hipótese nula de que a série é não estacionária.</p>
</section>
<section id="obter-a-série-do-log.-4" class="level4">
<h4 class="anchored" data-anchor-id="obter-a-série-do-log.-4">Obter a série do log.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb231"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb231-1"><a href="#cb231-1" aria-hidden="true" tabindex="-1"></a>brent_log.ts <span class="ot">&lt;-</span> <span class="fu">log</span>(brent.ts)</span>
<span id="cb231-2"><a href="#cb231-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(brent_log.ts, <span class="at">xlab =</span> <span class="st">"Tempo"</span>, <span class="at">ylab =</span> <span class="st">"log_preço"</span>, <span class="at">main =</span> <span class="st">"BRENT"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-69-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="obter-a-série-da-diferença-do-log.-4" class="level4">
<h4 class="anchored" data-anchor-id="obter-a-série-da-diferença-do-log.-4">Obter a série da diferença do log.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb232"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb232-1"><a href="#cb232-1" aria-hidden="true" tabindex="-1"></a>brent_log_diff.ts <span class="ot">&lt;-</span> <span class="fu">diff</span>(brent_log.ts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="fazer-novamente-o-teste-adf.-4" class="level4">
<h4 class="anchored" data-anchor-id="fazer-novamente-o-teste-adf.-4">Fazer novamente o teste ADF.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb233"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb233-1"><a href="#cb233-1" aria-hidden="true" tabindex="-1"></a><span class="fu">adf.test</span>(brent_log_diff.ts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Augmented Dickey-Fuller Test 
alternative: stationary 
 
Type 1: no drift no trend 
     lag    ADF p.value
[1,]   0 -14.89    0.01
[2,]   1 -10.29    0.01
[3,]   2 -10.04    0.01
[4,]   3  -7.66    0.01
[5,]   4  -6.60    0.01
Type 2: with drift no trend 
     lag    ADF p.value
[1,]   0 -14.86    0.01
[2,]   1 -10.27    0.01
[3,]   2 -10.02    0.01
[4,]   3  -7.65    0.01
[5,]   4  -6.59    0.01
Type 3: with drift and trend 
     lag    ADF p.value
[1,]   0 -14.83    0.01
[2,]   1 -10.25    0.01
[3,]   2 -10.00    0.01
[4,]   3  -7.64    0.01
[5,]   4  -6.58    0.01
---- 
Note: in fact, p.value = 0.01 means p.value &lt;= 0.01 </code></pre>
</div>
</div>
<p>como o p-valor é menor que 0.05, rejeitamos a hipótese nula de que a série é não estacionária. então podemos usar a série da diferença do log para fazer a análise.</p>
</section>
<section id="plotar-a-série-da-diferença-do-log.-4" class="level4">
<h4 class="anchored" data-anchor-id="plotar-a-série-da-diferença-do-log.-4">Plotar a série da diferença do log.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb235"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb235-1"><a href="#cb235-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(brent_log_diff.ts, <span class="at">xlab =</span> <span class="st">"Tempo"</span>, <span class="at">ylab =</span> <span class="st">"diff_log_preço"</span>, <span class="at">main =</span> <span class="st">"BRENT"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-72-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="construir-o-correlograma-da-série-da-diferença-do-log.-4" class="level4">
<h4 class="anchored" data-anchor-id="construir-o-correlograma-da-série-da-diferença-do-log.-4">Construir o correlograma da série da diferença do log.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb236"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb236-1"><a href="#cb236-1" aria-hidden="true" tabindex="-1"></a><span class="fu">acf</span>(brent_log_diff.ts,<span class="at">lag.max=</span><span class="dv">50</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-73-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb237"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb237-1"><a href="#cb237-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pacf</span>(brent_log_diff.ts,<span class="at">lag.max=</span><span class="dv">50</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-73-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="identificar-o-processo-arma-adequado.-4" class="level3">
<h3 class="anchored" data-anchor-id="identificar-o-processo-arma-adequado.-4">Identificar o processo ARMA adequado.</h3>
<p>com a análise podemos ver que o melhor modelo para o diff_log_preço é o MA(1)</p>
</section>
<section id="estimar-o-modelo-arma-e-verificar-a-significância-dos-coeficientes.-4" class="level3">
<h3 class="anchored" data-anchor-id="estimar-o-modelo-arma-e-verificar-a-significância-dos-coeficientes.-4">Estimar o modelo ARMA e verificar a significância dos coeficientes.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb238"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb238-1"><a href="#cb238-1" aria-hidden="true" tabindex="-1"></a>brent_log_diff.ts.arima1 <span class="ot">&lt;-</span> <span class="fu">arima</span>(brent_log_diff.ts, <span class="at">order =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>))</span>
<span id="cb238-2"><a href="#cb238-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(brent_log_diff.ts.arima1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = brent_log_diff.ts, order = c(0, 0, 0))

Coefficients:
      intercept
         0.0000
s.e.     0.0013

sigma^2 estimated as 0.0003907:  log likelihood = 576.11,  aic = -1148.22

Training set error measures:
                        ME       RMSE       MAE      MPE     MAPE      MASE
Training set -2.899674e-15 0.01976651 0.0153099 100.0112 100.0112 0.7061593
                   ACF1
Training set 0.02983643</code></pre>
</div>
<div class="sourceCode cell-code" id="cb240"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb240-1"><a href="#cb240-1" aria-hidden="true" tabindex="-1"></a>brent_log_diff.ts.arima2 <span class="ot">&lt;-</span> <span class="fu">arima</span>(brent_log_diff.ts, <span class="at">order =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>))</span>
<span id="cb240-2"><a href="#cb240-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(brent_log_diff.ts.arima2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = brent_log_diff.ts, order = c(0, 0, 1))

Coefficients:
         ma1  intercept
      0.0291     0.0000
s.e.  0.0646     0.0013

sigma^2 estimated as 0.0003904:  log likelihood = 576.21,  aic = -1146.42

Training set error measures:
                       ME       RMSE        MAE      MPE     MAPE     MASE
Training set 6.441816e-06 0.01975784 0.01533567 94.28994 112.1886 0.707348
                     ACF1
Training set 4.410957e-05</code></pre>
</div>
<div class="sourceCode cell-code" id="cb242"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb242-1"><a href="#cb242-1" aria-hidden="true" tabindex="-1"></a>brent_log_diff.ts.arima3 <span class="ot">&lt;-</span> <span class="fu">arima</span>(brent_log_diff.ts, <span class="at">order =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">2</span>))</span>
<span id="cb242-2"><a href="#cb242-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(brent_log_diff.ts.arima3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = brent_log_diff.ts, order = c(0, 0, 2))

Coefficients:
         ma1     ma2  intercept
      0.0404  0.0301     0.0000
s.e.  0.0715  0.0674     0.0014

sigma^2 estimated as 0.00039:  log likelihood = 576.31,  aic = -1144.62

Training set error measures:
                       ME       RMSE        MAE      MPE     MAPE      MASE
Training set 1.441894e-05 0.01974912 0.01538353 90.87517 117.3159 0.7095552
                     ACF1
Training set -0.006187907</code></pre>
</div>
<div class="sourceCode cell-code" id="cb244"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb244-1"><a href="#cb244-1" aria-hidden="true" tabindex="-1"></a>brent_log_diff.ts.arima4 <span class="ot">&lt;-</span> <span class="fu">arima</span>(brent_log_diff.ts, <span class="at">order =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">3</span>))</span>
<span id="cb244-2"><a href="#cb244-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(brent_log_diff.ts.arima4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = brent_log_diff.ts, order = c(0, 0, 3))

Coefficients:
         ma1     ma2      ma3  intercept
      0.0566  0.0424  -0.1977     0.0000
s.e.  0.0646  0.0641   0.0687     0.0012

sigma^2 estimated as 0.0003765:  log likelihood = 580.29,  aic = -1150.59

Training set error measures:
                       ME       RMSE        MAE      MPE     MAPE      MASE
Training set -1.14265e-05 0.01940467 0.01528269 71.78551 154.6443 0.7049042
                    ACF1
Training set -0.00978705</code></pre>
</div>
<div class="sourceCode cell-code" id="cb246"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb246-1"><a href="#cb246-1" aria-hidden="true" tabindex="-1"></a>brent_log_diff.ts.arima5 <span class="ot">&lt;-</span> <span class="fu">arima</span>(brent_log_diff.ts, <span class="at">order =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>))</span>
<span id="cb246-2"><a href="#cb246-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(brent_log_diff.ts.arima5)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = brent_log_diff.ts, order = c(1, 0, 0))

Coefficients:
         ar1  intercept
      0.0307     0.0000
s.e.  0.0668     0.0013

sigma^2 estimated as 0.0003904:  log likelihood = 576.22,  aic = -1146.43

Training set error measures:
                       ME       RMSE        MAE      MPE     MAPE      MASE
Training set 7.219788e-06 0.01975742 0.01533809 93.95261 112.9055 0.7074593
                     ACF1
Training set -0.001402484</code></pre>
</div>
<div class="sourceCode cell-code" id="cb248"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb248-1"><a href="#cb248-1" aria-hidden="true" tabindex="-1"></a>brent_log_diff.ts.arima6 <span class="ot">&lt;-</span> <span class="fu">arima</span>(brent_log_diff.ts, <span class="at">order =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>))</span>
<span id="cb248-2"><a href="#cb248-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(brent_log_diff.ts.arima6)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = brent_log_diff.ts, order = c(1, 0, 1))

Coefficients:
        ar1      ma1  intercept
      0.060  -0.0292     0.0000
s.e.  0.638   0.6309     0.0013

sigma^2 estimated as 0.0003903:  log likelihood = 576.22,  aic = -1144.44

Training set error measures:
                       ME       RMSE        MAE      MPE    MAPE      MASE
Training set 9.944179e-06 0.01975719 0.01533919 93.90234 112.894 0.7075101
                     ACF1
Training set -0.001374325</code></pre>
</div>
<div class="sourceCode cell-code" id="cb250"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb250-1"><a href="#cb250-1" aria-hidden="true" tabindex="-1"></a>brent_log_diff.ts.arima7 <span class="ot">&lt;-</span> <span class="fu">arima</span>(brent_log_diff.ts, <span class="at">order =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">2</span>))</span>
<span id="cb250-2"><a href="#cb250-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(brent_log_diff.ts.arima7)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = brent_log_diff.ts, order = c(1, 0, 2))

Coefficients:
          ar1     ma1     ma2  intercept
      -0.7463  0.8065  0.1384     0.0000
s.e.   0.2087  0.2054  0.0783     0.0014

sigma^2 estimated as 0.0003834:  log likelihood = 578.25,  aic = -1146.5

Training set error measures:
                       ME       RMSE        MAE      MPE     MAPE      MASE
Training set 1.977416e-05 0.01958085 0.01547575 83.95032 137.0641 0.7138088
                    ACF1
Training set -0.01041974</code></pre>
</div>
<div class="sourceCode cell-code" id="cb252"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb252-1"><a href="#cb252-1" aria-hidden="true" tabindex="-1"></a>brent_log_diff.ts.arima8 <span class="ot">&lt;-</span> <span class="fu">arima</span>(brent_log_diff.ts, <span class="at">order =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">3</span>))</span>
<span id="cb252-2"><a href="#cb252-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(brent_log_diff.ts.arima8)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = brent_log_diff.ts, order = c(1, 0, 3))

Coefficients:
          ar1     ma1     ma2      ma3  intercept
      -0.1325  0.1804  0.0511  -0.1870     0.0000
s.e.   0.2676  0.2590  0.0685   0.0725     0.0012

sigma^2 estimated as 0.0003761:  log likelihood = 580.42,  aic = -1148.84

Training set error measures:
                        ME       RMSE        MAE      MPE     MAPE      MASE
Training set -1.063881e-05 0.01939424 0.01530216 74.75853 156.1962 0.7058022
                    ACF1
Training set -0.00259222</code></pre>
</div>
</div>
</section>
<section id="plot-akaike-4" class="level3">
<h3 class="anchored" data-anchor-id="plot-akaike-4">plot akaike</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb254"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb254-1"><a href="#cb254-1" aria-hidden="true" tabindex="-1"></a>brent_log_diff.ts.arima1<span class="sc">$</span>aic</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -1148.221</code></pre>
</div>
<div class="sourceCode cell-code" id="cb256"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb256-1"><a href="#cb256-1" aria-hidden="true" tabindex="-1"></a>brent_log_diff.ts.arima2<span class="sc">$</span>aic</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -1146.422</code></pre>
</div>
<div class="sourceCode cell-code" id="cb258"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb258-1"><a href="#cb258-1" aria-hidden="true" tabindex="-1"></a>brent_log_diff.ts.arima3<span class="sc">$</span>aic</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -1144.622</code></pre>
</div>
<div class="sourceCode cell-code" id="cb260"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb260-1"><a href="#cb260-1" aria-hidden="true" tabindex="-1"></a>brent_log_diff.ts.arima4<span class="sc">$</span>aic</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -1150.589</code></pre>
</div>
<div class="sourceCode cell-code" id="cb262"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb262-1"><a href="#cb262-1" aria-hidden="true" tabindex="-1"></a>brent_log_diff.ts.arima5<span class="sc">$</span>aic</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -1146.431</code></pre>
</div>
<div class="sourceCode cell-code" id="cb264"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb264-1"><a href="#cb264-1" aria-hidden="true" tabindex="-1"></a>brent_log_diff.ts.arima6<span class="sc">$</span>aic</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -1144.437</code></pre>
</div>
<div class="sourceCode cell-code" id="cb266"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb266-1"><a href="#cb266-1" aria-hidden="true" tabindex="-1"></a>brent_log_diff.ts.arima7<span class="sc">$</span>aic</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -1146.5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb268"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb268-1"><a href="#cb268-1" aria-hidden="true" tabindex="-1"></a>brent_log_diff.ts.arima8<span class="sc">$</span>aic</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -1148.839</code></pre>
</div>
</div>
<p>podemos ver que pelo menor AIC o melhor modelo é o ARIMA(0,0,3) e que os coeficientes são significativos.</p>
</section>
<section id="fazer-o-teste-e-plotar-os-gráficos-associados-ao-teste-de-ljung-box-para-avaliar-a-correlação-dos-resíduos.-4" class="level3">
<h3 class="anchored" data-anchor-id="fazer-o-teste-e-plotar-os-gráficos-associados-ao-teste-de-ljung-box-para-avaliar-a-correlação-dos-resíduos.-4">Fazer o teste e plotar os gráficos associados ao teste de Ljung-Box para avaliar a correlação dos resíduos.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb270"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb270-1"><a href="#cb270-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tsdisplay</span>(<span class="fu">arima.errors</span>(brent_log_diff.ts.arima4))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Deprecated, use residuals.Arima(object, type='regression') instead</code></pre>
</div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-76-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb272"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb272-1"><a href="#cb272-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Box.test</span>(<span class="fu">resid</span>(brent_log_diff.ts.arima4), <span class="at">type =</span> <span class="st">"Ljung"</span>, <span class="at">lag =</span> <span class="dv">20</span>, <span class="at">fitdf =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Box-Ljung test

data:  resid(brent_log_diff.ts.arima4)
X-squared = 17.652, df = 18, p-value = 0.4788</code></pre>
</div>
</div>
<p>com isso a hipótese nula não pode ser rejeitada, então os resíduos são independentes.</p>
</section>
<section id="para-o-melhor-modelo-arma-estimado-obter-o-correlograma-dos-resíduos-ao-quadrado.-4" class="level3">
<h3 class="anchored" data-anchor-id="para-o-melhor-modelo-arma-estimado-obter-o-correlograma-dos-resíduos-ao-quadrado.-4">Para o melhor modelo ARMA estimado, obter o correlograma dos resíduos ao quadrado.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb274"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb274-1"><a href="#cb274-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">1</span>))</span>
<span id="cb274-2"><a href="#cb274-2" aria-hidden="true" tabindex="-1"></a><span class="fu">acf</span>(brent_log_diff.ts.arima4<span class="sc">$</span>residuals<span class="sc">^</span><span class="dv">2</span>, <span class="at">lag.max=</span><span class="dv">20</span>)</span>
<span id="cb274-3"><a href="#cb274-3" aria-hidden="true" tabindex="-1"></a><span class="fu">pacf</span>(brent_log_diff.ts.arima4<span class="sc">$</span>residuals<span class="sc">^</span><span class="dv">2</span>, <span class="at">lag.max =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-77-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="fazer-o-teste-para-efeitos-arch.-4" class="level3">
<h3 class="anchored" data-anchor-id="fazer-o-teste-para-efeitos-arch.-4">Fazer o teste para efeitos ARCH.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb275"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb275-1"><a href="#cb275-1" aria-hidden="true" tabindex="-1"></a>residuos_quadrados <span class="ot">&lt;-</span> brent_log_diff.ts.arima4<span class="sc">$</span>residuals<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb275-2"><a href="#cb275-2" aria-hidden="true" tabindex="-1"></a>residuos_quadrados</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Time Series:
Start = 2 
End = 231 
Frequency = 1 
  [1] 2.721675e-03 1.728774e-04 3.325339e-07 9.214861e-06 6.401942e-05
  [6] 9.514241e-04 2.194393e-04 2.010839e-04 1.467749e-04 8.805175e-05
 [11] 2.750905e-04 3.514626e-04 7.432613e-06 4.550120e-04 2.168620e-05
 [16] 2.792223e-04 2.157389e-04 3.802545e-04 2.699207e-08 4.766638e-04
 [21] 1.160390e-04 6.744601e-04 1.130987e-04 9.696758e-04 8.497430e-05
 [26] 4.519318e-05 7.975698e-04 9.171661e-06 2.156971e-04 1.537643e-05
 [31] 3.384247e-06 8.092140e-04 9.244026e-06 8.583635e-04 2.451910e-04
 [36] 1.543289e-04 2.483229e-04 4.305638e-04 4.788444e-05 6.298249e-07
 [41] 2.690263e-04 1.981385e-05 1.219753e-03 6.694931e-06 1.112156e-04
 [46] 6.818013e-05 6.318614e-04 1.849910e-03 1.994319e-03 1.682224e-04
 [51] 9.485591e-04 1.234762e-05 5.841725e-04 1.080713e-04 1.246851e-04
 [56] 5.255250e-05 1.918950e-03 5.562179e-06 6.666665e-05 4.650544e-04
 [61] 3.428840e-05 3.575449e-03 5.255838e-07 7.328625e-07 1.780301e-04
 [66] 1.369970e-04 2.804661e-04 4.863857e-04 3.458709e-04 3.546374e-05
 [71] 1.778033e-04 9.495894e-06 3.155451e-04 6.826416e-04 7.189969e-05
 [76] 1.022160e-04 9.059114e-04 1.292633e-03 1.959932e-04 9.171789e-05
 [81] 1.246344e-04 2.366824e-03 1.253998e-03 1.749898e-05 8.712300e-04
 [86] 1.844789e-04 1.892244e-05 7.058387e-05 2.541088e-04 7.687873e-05
 [91] 1.870650e-04 6.147521e-05 6.301993e-04 1.639596e-04 3.150478e-05
 [96] 1.256430e-04 6.677247e-05 3.068187e-04 6.922853e-04 1.286799e-04
[101] 1.715097e-03 2.372436e-04 7.234425e-04 2.408804e-04 6.254783e-06
[106] 9.945275e-07 1.347451e-04 1.714418e-04 2.401268e-04 1.335201e-03
[111] 1.132094e-03 3.320675e-04 6.523743e-04 3.349250e-04 2.267132e-04
[116] 4.429521e-04 1.322496e-03 3.312865e-05 1.094762e-04 1.141472e-03
[121] 6.004882e-04 3.930489e-05 3.520081e-07 1.547939e-06 7.622393e-04
[126] 1.193191e-05 5.958452e-04 3.353400e-05 4.143863e-04 1.637724e-04
[131] 1.619524e-04 2.479526e-04 2.086656e-04 3.337489e-04 3.243994e-05
[136] 1.145648e-06 4.702711e-04 3.260919e-04 7.466546e-05 3.178636e-05
[141] 3.721584e-04 9.399470e-05 1.745737e-05 2.010962e-05 3.376791e-04
[146] 6.290553e-04 1.273840e-04 2.512487e-04 2.259214e-04 3.210076e-04
[151] 3.251511e-04 6.306265e-05 9.625865e-06 3.678971e-04 2.058224e-04
[156] 8.071511e-05 1.879163e-05 5.632141e-05 9.684072e-06 7.190232e-05
[161] 8.182509e-07 1.693898e-04 1.015219e-05 1.532018e-04 3.971459e-05
[166] 1.008708e-04 4.349962e-04 2.657492e-04 4.037386e-05 2.012603e-05
[171] 1.269694e-04 4.542696e-07 1.992973e-04 3.380749e-07 3.670096e-04
[176] 1.729523e-05 1.698665e-05 5.757930e-06 6.619519e-05 1.724889e-06
[181] 2.998215e-07 1.942889e-06 4.799180e-05 7.259098e-04 2.047925e-04
[186] 7.703251e-08 1.898685e-03 3.656605e-06 3.144290e-03 6.777297e-04
[191] 1.051261e-04 9.459383e-04 1.699018e-04 3.866868e-04 9.636342e-05
[196] 2.806875e-03 4.436446e-04 1.328686e-05 8.281490e-04 1.296027e-05
[201] 9.688581e-06 3.967753e-04 3.182981e-04 5.922178e-04 8.581736e-04
[206] 6.585015e-04 8.693342e-04 3.241950e-05 6.604665e-04 4.724414e-04
[211] 5.815827e-04 1.568744e-06 1.402392e-03 8.015737e-04 7.761292e-05
[216] 1.180839e-04 4.471030e-05 7.384256e-08 1.943521e-04 2.056554e-03
[221] 1.897813e-03 3.122154e-04 1.052623e-04 6.041933e-06 1.197069e-05
[226] 1.373024e-04 3.847447e-05 4.482509e-04 1.948711e-04 3.835503e-05</code></pre>
</div>
<div class="sourceCode cell-code" id="cb277"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb277-1"><a href="#cb277-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ArchTest</span>(residuos_quadrados, <span class="at">lag =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    ARCH LM-test; Null hypothesis: no ARCH effects

data:  residuos_quadrados
Chi-squared = 0.48764, df = 3, p-value = 0.9216</code></pre>
</div>
</div>
</section>
<section id="identificar-o-melhor-processo-archgarch.-4" class="level3">
<h3 class="anchored" data-anchor-id="identificar-o-melhor-processo-archgarch.-4">Identificar o melhor processo ARCH/GARCH.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb279"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb279-1"><a href="#cb279-1" aria-hidden="true" tabindex="-1"></a>aTSA<span class="sc">::</span><span class="fu">arch.test</span>(brent_log_diff.ts.arima4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>ARCH heteroscedasticity test for residuals 
alternative: heteroscedastic 

Portmanteau-Q test: 
     order     PQ p.value
[1,]     4  0.865   0.930
[2,]     8  5.003   0.757
[3,]    12  6.276   0.902
[4,]    16  8.247   0.941
[5,]    20  9.282   0.979
[6,]    24 12.978   0.966
Lagrange-Multiplier test: 
     order    LM  p.value
[1,]     4 66.03 3.03e-14
[2,]     8 30.00 9.49e-05
[3,]    12 18.53 7.00e-02
[4,]    16 12.78 6.19e-01
[5,]    20  9.60 9.62e-01
[6,]    24  7.12 9.99e-01</code></pre>
</div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-79-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb281"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb281-1"><a href="#cb281-1" aria-hidden="true" tabindex="-1"></a>nortsTest<span class="sc">::</span><span class="fu">arch.test</span>(brent_log_diff.ts, <span class="at">lag.max=</span><span class="dv">6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Box-Ljung test

data:  y^2
X-squared = 2.4031, df = 6, p-value = 0.8792
alternative hypothesis: y is heteroscedastic</code></pre>
</div>
</div>
</section>
<section id="estimar-o-modelo-arma-garch-e-verificar-a-significância-dos-coeficientes.-4" class="level3">
<h3 class="anchored" data-anchor-id="estimar-o-modelo-arma-garch-e-verificar-a-significância-dos-coeficientes.-4">Estimar o modelo ARMA-GARCH e verificar a significância dos coeficientes.</h3>
<p>Como o modelo não apresenta heterocedasticidade condicional, não é necessário estimar o modelo ARMA-GARCH.</p>
</section>
<section id="avaliar-se-os-resíduos-gerados-têm-comportamento-de-ruído-branco.-4" class="level3">
<h3 class="anchored" data-anchor-id="avaliar-se-os-resíduos-gerados-têm-comportamento-de-ruído-branco.-4">Avaliar se os resíduos gerados têm comportamento de ruído branco.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb283"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb283-1"><a href="#cb283-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Box.test</span>(brent_log_diff.ts.arima4<span class="sc">$</span>residuals, <span class="at">type =</span> <span class="st">"Ljung"</span>, <span class="at">lag =</span> <span class="dv">20</span>, <span class="at">fitdf =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Box-Ljung test

data:  brent_log_diff.ts.arima4$residuals
X-squared = 17.652, df = 18, p-value = 0.4788</code></pre>
</div>
</div>
<p>com isso vemos que a hipótese nula não pode ser rejeitada, então os resíduos são independentes.</p>
</section>
<section id="fazer-as-previsões-considerando-os-14-últimos-valores-da-série.-4" class="level3">
<h3 class="anchored" data-anchor-id="fazer-as-previsões-considerando-os-14-últimos-valores-da-série.-4">Fazer as previsões considerando os 14 últimos valores da série.</h3>
<p>como o modelo é ARIMA(1,0,1) então vamos usar os 14 últimos valores da série para fazer a previsão.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb285"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb285-1"><a href="#cb285-1" aria-hidden="true" tabindex="-1"></a>brent_log_diff.ts.arima4</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = brent_log_diff.ts, order = c(0, 0, 3))

Coefficients:
         ma1     ma2      ma3  intercept
      0.0566  0.0424  -0.1977     0.0000
s.e.  0.0646  0.0641   0.0687     0.0012

sigma^2 estimated as 0.0003765:  log likelihood = 580.29,  aic = -1150.59</code></pre>
</div>
<div class="sourceCode cell-code" id="cb287"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb287-1"><a href="#cb287-1" aria-hidden="true" tabindex="-1"></a>previsao <span class="ot">&lt;-</span> <span class="fu">predict</span>(brent_log_diff.ts.arima4, <span class="at">n.ahead =</span> <span class="dv">14</span>)</span>
<span id="cb287-2"><a href="#cb287-2" aria-hidden="true" tabindex="-1"></a>previsao</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$pred
Time Series:
Start = 232 
End = 245 
Frequency = 1 
 [1] -3.919233e-03 -2.997872e-03  1.248959e-03  2.460055e-05  2.460055e-05
 [6]  2.460055e-05  2.460055e-05  2.460055e-05  2.460055e-05  2.460055e-05
[11]  2.460055e-05  2.460055e-05  2.460055e-05  2.460055e-05

$se
Time Series:
Start = 232 
End = 245 
Frequency = 1 
 [1] 0.01940467 0.01943570 0.01945312 0.01982777 0.01982777 0.01982777
 [7] 0.01982777 0.01982777 0.01982777 0.01982777 0.01982777 0.01982777
[13] 0.01982777 0.01982777</code></pre>
</div>
</div>
</section>
</section>
<section id="dolar_real" class="level2">
<h2 class="anchored" data-anchor-id="dolar_real">DOLAR_REAL</h2>
<section id="tranformar-para-um-ts-5" class="level3">
<h3 class="anchored" data-anchor-id="tranformar-para-um-ts-5">tranformar para um ts</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb289"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb289-1"><a href="#cb289-1" aria-hidden="true" tabindex="-1"></a>dolar.real.ts <span class="ot">&lt;-</span> <span class="fu">ts</span>(dolar.real[,<span class="dv">4</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="plotar-a-série-no-nível-5" class="level4">
<h4 class="anchored" data-anchor-id="plotar-a-série-no-nível-5">Plotar a série no nível</h4>
<p>vamos usar o valor de fechamento para fazer os procedimentos</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb290"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb290-1"><a href="#cb290-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(dolar.real.ts, <span class="at">xlab =</span> <span class="st">"Tempo"</span>, <span class="at">ylab =</span> <span class="st">"preço"</span>, <span class="at">main =</span> <span class="st">"DOLAR_REAL"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-83-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="fazer-o-teste-adf.-5" class="level4">
<h4 class="anchored" data-anchor-id="fazer-o-teste-adf.-5">Fazer o teste ADF.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb291"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb291-1"><a href="#cb291-1" aria-hidden="true" tabindex="-1"></a><span class="fu">adf.test</span>(dolar.real.ts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Augmented Dickey-Fuller Test 
alternative: stationary 
 
Type 1: no drift no trend 
     lag    ADF p.value
[1,]   0 -0.671   0.439
[2,]   1 -0.812   0.389
[3,]   2 -1.018   0.315
[4,]   3 -0.983   0.327
[5,]   4 -0.791   0.396
Type 2: with drift no trend 
     lag   ADF p.value
[1,]   0 -2.46  0.1469
[2,]   1 -2.74  0.0737
[3,]   2 -3.48  0.0100
[4,]   3 -3.05  0.0335
[5,]   4 -2.78  0.0673
Type 3: with drift and trend 
     lag   ADF p.value
[1,]   0 -2.67  0.2935
[2,]   1 -2.84  0.2220
[3,]   2 -3.48  0.0447
[4,]   3 -3.01  0.1501
[5,]   4 -2.88  0.2058
---- 
Note: in fact, p.value = 0.01 means p.value &lt;= 0.01 </code></pre>
</div>
</div>
<p>como o p-valor é maior que 0.05, não rejeitamos a hipótese nula de que a série é não estacionária.</p>
</section>
<section id="obter-a-série-do-log.-5" class="level4">
<h4 class="anchored" data-anchor-id="obter-a-série-do-log.-5">Obter a série do log.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb293"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb293-1"><a href="#cb293-1" aria-hidden="true" tabindex="-1"></a>dolar.real_log.ts <span class="ot">&lt;-</span> <span class="fu">log</span>(dolar.real.ts)</span>
<span id="cb293-2"><a href="#cb293-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(dolar.real_log.ts, <span class="at">xlab =</span> <span class="st">"Tempo"</span>, <span class="at">ylab =</span> <span class="st">"log_preço"</span>, <span class="at">main =</span> <span class="st">"DOLAR_REAL"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-85-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="obter-a-série-da-diferença-do-log.-5" class="level4">
<h4 class="anchored" data-anchor-id="obter-a-série-da-diferença-do-log.-5">Obter a série da diferença do log.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb294"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb294-1"><a href="#cb294-1" aria-hidden="true" tabindex="-1"></a>dolar.real_log_diff.ts <span class="ot">&lt;-</span> <span class="fu">diff</span>(dolar.real_log.ts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="fazer-novamente-o-teste-adf.-5" class="level4">
<h4 class="anchored" data-anchor-id="fazer-novamente-o-teste-adf.-5">Fazer novamente o teste ADF.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb295"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb295-1"><a href="#cb295-1" aria-hidden="true" tabindex="-1"></a><span class="fu">adf.test</span>(dolar.real_log_diff.ts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Augmented Dickey-Fuller Test 
alternative: stationary 
 
Type 1: no drift no trend 
     lag    ADF p.value
[1,]   0 -15.66    0.01
[2,]   1 -10.54    0.01
[3,]   2  -9.58    0.01
[4,]   3  -7.74    0.01
[5,]   4  -6.89    0.01
Type 2: with drift no trend 
     lag    ADF p.value
[1,]   0 -15.66    0.01
[2,]   1 -10.58    0.01
[3,]   2  -9.62    0.01
[4,]   3  -7.76    0.01
[5,]   4  -6.90    0.01
Type 3: with drift and trend 
     lag    ADF p.value
[1,]   0 -15.67    0.01
[2,]   1 -10.63    0.01
[3,]   2  -9.67    0.01
[4,]   3  -7.80    0.01
[5,]   4  -6.89    0.01
---- 
Note: in fact, p.value = 0.01 means p.value &lt;= 0.01 </code></pre>
</div>
</div>
<p>como o p-valor é menor que 0.05, rejeitamos a hipótese nula de que a série é não estacionária. então podemos usar a série da diferença do log para fazer a análise.</p>
</section>
<section id="plotar-a-série-da-diferença-do-log.-5" class="level4">
<h4 class="anchored" data-anchor-id="plotar-a-série-da-diferença-do-log.-5">Plotar a série da diferença do log.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb297"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb297-1"><a href="#cb297-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(dolar.real_log_diff.ts, <span class="at">xlab =</span> <span class="st">"Tempo"</span>, <span class="at">ylab =</span> <span class="st">"diff_log_preço"</span>, <span class="at">main =</span> <span class="st">"DOLAR_REAL"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-88-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="construir-o-correlograma-da-série-da-diferença-do-log.-5" class="level4">
<h4 class="anchored" data-anchor-id="construir-o-correlograma-da-série-da-diferença-do-log.-5">Construir o correlograma da série da diferença do log.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb298"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb298-1"><a href="#cb298-1" aria-hidden="true" tabindex="-1"></a><span class="fu">acf</span>(dolar.real_log_diff.ts,<span class="at">lag.max=</span><span class="dv">50</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-89-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb299"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb299-1"><a href="#cb299-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pacf</span>(dolar.real_log_diff.ts,<span class="at">lag.max=</span><span class="dv">50</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-89-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="identificar-o-processo-arma-adequado.-5" class="level3">
<h3 class="anchored" data-anchor-id="identificar-o-processo-arma-adequado.-5">Identificar o processo ARMA adequado.</h3>
<p>com a análise podemos ver que o melhor modelo para o diff_log_preço é o MA(1)</p>
</section>
<section id="estimar-o-modelo-arma-e-verificar-a-significância-dos-coeficientes.-5" class="level3">
<h3 class="anchored" data-anchor-id="estimar-o-modelo-arma-e-verificar-a-significância-dos-coeficientes.-5">Estimar o modelo ARMA e verificar a significância dos coeficientes.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb300"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb300-1"><a href="#cb300-1" aria-hidden="true" tabindex="-1"></a>dolar.real_log_diff.ts.arima <span class="ot">&lt;-</span> <span class="fu">arima</span>(dolar.real_log_diff.ts, <span class="at">order=</span><span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">0</span>,<span class="dv">5</span>))    </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in arima(dolar.real_log_diff.ts, order = c(5, 0, 5)): possible
convergence problem: optim gave code = 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb302"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb302-1"><a href="#cb302-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(dolar.real_log_diff.ts.arima)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = dolar.real_log_diff.ts, order = c(5, 0, 5))

Coefficients:
         ar1      ar2     ar3      ar4     ar5      ma1     ma2      ma3
      1.3837  -1.8698  1.6721  -1.0087  0.5089  -1.3584  1.9909  -1.9606
s.e.  0.1245   0.1760  0.1989   0.1627  0.1264   0.0916  0.1203   0.1389
         ma4      ma5  intercept
      1.3203  -0.8343     -3e-04
s.e.  0.1245   0.1013      2e-04

sigma^2 estimated as 4.977e-05:  log likelihood = 841.65,  aic = -1659.31

Training set error measures:
                        ME        RMSE         MAE       MPE     MAPE      MASE
Training set -5.074959e-05 0.007054625 0.005560224 -26.27184 288.3624 0.6408133
                    ACF1
Training set -0.03728267</code></pre>
</div>
<div class="sourceCode cell-code" id="cb304"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb304-1"><a href="#cb304-1" aria-hidden="true" tabindex="-1"></a>dolar.real_log_diff.ts.arima2 <span class="ot">&lt;-</span> <span class="fu">arima</span>(dolar.real_log_diff.ts, <span class="at">order=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>))    </span>
<span id="cb304-2"><a href="#cb304-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(dolar.real_log_diff.ts.arima2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = dolar.real_log_diff.ts, order = c(1, 0, 0))

Coefficients:
          ar1  intercept
      -0.0127     -3e-04
s.e.   0.0651      5e-04

sigma^2 estimated as 5.972e-05:  log likelihood = 823.11,  aic = -1640.22

Training set error measures:
                       ME        RMSE         MAE      MPE     MAPE      MASE
Training set 7.572778e-07 0.007727866 0.005893192 89.14502 111.9314 0.6791877
                    ACF1
Training set 0.001045404</code></pre>
</div>
<div class="sourceCode cell-code" id="cb306"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb306-1"><a href="#cb306-1" aria-hidden="true" tabindex="-1"></a>dolar.real_log_diff.ts.arima3 <span class="ot">&lt;-</span> <span class="fu">arima</span>(dolar.real_log_diff.ts, <span class="at">order=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>))    </span>
<span id="cb306-2"><a href="#cb306-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(dolar.real_log_diff.ts.arima3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = dolar.real_log_diff.ts, order = c(0, 0, 1))

Coefficients:
          ma1  intercept
      -0.0111     -3e-04
s.e.   0.0610      5e-04

sigma^2 estimated as 5.972e-05:  log likelihood = 823.11,  aic = -1640.22

Training set error measures:
                       ME        RMSE        MAE     MPE     MAPE      MASE
Training set 6.297188e-07 0.007727943 0.00589413 89.4325 111.8339 0.6792959
                      ACF1
Training set -0.0006373476</code></pre>
</div>
<div class="sourceCode cell-code" id="cb308"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb308-1"><a href="#cb308-1" aria-hidden="true" tabindex="-1"></a>dolar.real_log_diff.ts.arima4 <span class="ot">&lt;-</span> <span class="fu">arima</span>(dolar.real_log_diff.ts, <span class="at">order=</span><span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">0</span>,<span class="dv">0</span>))    </span>
<span id="cb308-2"><a href="#cb308-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(dolar.real_log_diff.ts.arima4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = dolar.real_log_diff.ts, order = c(5, 0, 0))

Coefficients:
         ar1     ar2      ar3     ar4      ar5  intercept
      0.0037  0.0704  -0.1324  0.0207  -0.0034     -3e-04
s.e.  0.0650  0.0661   0.0661  0.0668   0.0678      5e-04

sigma^2 estimated as 5.836e-05:  log likelihood = 825.84,  aic = -1637.68

Training set error measures:
                       ME        RMSE         MAE      MPE     MAPE      MASE
Training set 3.298753e-06 0.007639128 0.005817633 41.41706 165.1453 0.6704796
                     ACF1
Training set -0.003260816</code></pre>
</div>
<div class="sourceCode cell-code" id="cb310"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb310-1"><a href="#cb310-1" aria-hidden="true" tabindex="-1"></a>dolar.real_log_diff.ts.arima5 <span class="ot">&lt;-</span> <span class="fu">arima</span>(dolar.real_log_diff.ts, <span class="at">order=</span><span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">fixed =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>,<span class="cn">NA</span>,<span class="cn">NA</span>))    </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in arima(dolar.real_log_diff.ts, order = c(5, 0, 0), fixed = c(0, :
some AR parameters were fixed: setting transform.pars = FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb312"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb312-1"><a href="#cb312-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(dolar.real_log_diff.ts.arima5)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = dolar.real_log_diff.ts, order = c(5, 0, 0), fixed = c(0, 0, 0, 0, 
    NA, NA))

Coefficients:
      ar1  ar2  ar3  ar4      ar5  intercept
        0    0    0    0  -0.0240     -3e-04
s.e.    0    0    0    0   0.0679      5e-04

sigma^2 estimated as 5.97e-05:  log likelihood = 823.16,  aic = -1640.31

Training set error measures:
                        ME        RMSE         MAE      MPE     MAPE      MASE
Training set -9.938761e-07 0.007726425 0.005907379 88.30306 114.5443 0.6808228
                    ACF1
Training set -0.01613025</code></pre>
</div>
<div class="sourceCode cell-code" id="cb314"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb314-1"><a href="#cb314-1" aria-hidden="true" tabindex="-1"></a>dolar.real_log_diff.ts.arima6 <span class="ot">&lt;-</span> <span class="fu">arima</span>(dolar.real_log_diff.ts, <span class="at">order=</span><span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">0</span>,<span class="dv">5</span>), <span class="at">fixed =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>,<span class="cn">NA</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>,<span class="cn">NA</span>,<span class="cn">NA</span>))    </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in arima(dolar.real_log_diff.ts, order = c(5, 0, 5), fixed = c(0, :
some AR parameters were fixed: setting transform.pars = FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb316"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb316-1"><a href="#cb316-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(dolar.real_log_diff.ts.arima6)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = dolar.real_log_diff.ts, order = c(5, 0, 5), fixed = c(0, 0, 0, 0, 
    NA, 0, 0, 0, 0, NA, NA))

Coefficients:
      ar1  ar2  ar3  ar4     ar5  ma1  ma2  ma3  ma4      ma5  intercept
        0    0    0    0  0.4821    0    0    0    0  -0.5399     -3e-04
s.e.    0    0    0    0  0.3576    0    0    0    0   0.3401      5e-04

sigma^2 estimated as 5.949e-05:  log likelihood = 823.56,  aic = -1639.12

Training set error measures:
                        ME        RMSE         MAE      MPE     MAPE      MASE
Training set -9.635441e-06 0.007712882 0.005935071 70.60088 132.6991 0.6840142
                    ACF1
Training set -0.02456744</code></pre>
</div>
<div class="sourceCode cell-code" id="cb318"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb318-1"><a href="#cb318-1" aria-hidden="true" tabindex="-1"></a>dolar.real_log_diff.ts.arima7 <span class="ot">&lt;-</span> <span class="fu">arima</span>(dolar.real_log_diff.ts, <span class="at">order=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">5</span>), <span class="at">fixed =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>,<span class="cn">NA</span>,<span class="cn">NA</span>))    </span>
<span id="cb318-2"><a href="#cb318-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(dolar.real_log_diff.ts.arima7)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = dolar.real_log_diff.ts, order = c(0, 0, 5), fixed = c(0, 0, 0, 0, 
    NA, NA))

Coefficients:
      ma1  ma2  ma3  ma4      ma5  intercept
        0    0    0    0  -0.0298     -3e-04
s.e.    0    0    0    0   0.0758      5e-04

sigma^2 estimated as 5.969e-05:  log likelihood = 823.17,  aic = -1640.34

Training set error measures:
                        ME        RMSE         MAE      MPE     MAPE      MASE
Training set -1.374494e-06 0.007725916 0.005909472 87.19401 116.6183 0.6810639
                    ACF1
Training set -0.01700951</code></pre>
</div>
</div>
</section>
<section id="plot-akaike-5" class="level3">
<h3 class="anchored" data-anchor-id="plot-akaike-5">plot akaike</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb320"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb320-1"><a href="#cb320-1" aria-hidden="true" tabindex="-1"></a>dolar.real_log_diff.ts.arima<span class="sc">$</span>aic</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -1659.306</code></pre>
</div>
<div class="sourceCode cell-code" id="cb322"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb322-1"><a href="#cb322-1" aria-hidden="true" tabindex="-1"></a>dolar.real_log_diff.ts.arima2<span class="sc">$</span>aic</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -1640.224</code></pre>
</div>
<div class="sourceCode cell-code" id="cb324"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb324-1"><a href="#cb324-1" aria-hidden="true" tabindex="-1"></a>dolar.real_log_diff.ts.arima3<span class="sc">$</span>aic</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -1640.219</code></pre>
</div>
<div class="sourceCode cell-code" id="cb326"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb326-1"><a href="#cb326-1" aria-hidden="true" tabindex="-1"></a>dolar.real_log_diff.ts.arima4<span class="sc">$</span>aic</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -1637.679</code></pre>
</div>
<div class="sourceCode cell-code" id="cb328"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb328-1"><a href="#cb328-1" aria-hidden="true" tabindex="-1"></a>dolar.real_log_diff.ts.arima5<span class="sc">$</span>aic</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -1640.311</code></pre>
</div>
<div class="sourceCode cell-code" id="cb330"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb330-1"><a href="#cb330-1" aria-hidden="true" tabindex="-1"></a>dolar.real_log_diff.ts.arima6<span class="sc">$</span>aic</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -1639.121</code></pre>
</div>
<div class="sourceCode cell-code" id="cb332"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb332-1"><a href="#cb332-1" aria-hidden="true" tabindex="-1"></a>dolar.real_log_diff.ts.arima7<span class="sc">$</span>aic</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -1640.341</code></pre>
</div>
</div>
<p>podemos ver que pelo menor AIC o melhor modelo é o ARIMA(5,0,5) e que os coeficientes são significativos.</p>
</section>
<section id="fazer-o-teste-e-plotar-os-gráficos-associados-ao-teste-de-ljung-box-para-avaliar-a-correlação-dos-resíduos.-5" class="level3">
<h3 class="anchored" data-anchor-id="fazer-o-teste-e-plotar-os-gráficos-associados-ao-teste-de-ljung-box-para-avaliar-a-correlação-dos-resíduos.-5">Fazer o teste e plotar os gráficos associados ao teste de Ljung-Box para avaliar a correlação dos resíduos.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb334"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb334-1"><a href="#cb334-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tsdisplay</span>(<span class="fu">arima.errors</span>(dolar.real_log_diff.ts.arima))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Deprecated, use residuals.Arima(object, type='regression') instead</code></pre>
</div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-92-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb336"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb336-1"><a href="#cb336-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Box.test</span>(<span class="fu">resid</span>(dolar.real_log_diff.ts.arima), <span class="at">type =</span> <span class="st">"Ljung"</span>, <span class="at">lag =</span> <span class="dv">20</span>, <span class="at">fitdf =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Box-Ljung test

data:  resid(dolar.real_log_diff.ts.arima)
X-squared = 8.5496, df = 10, p-value = 0.5753</code></pre>
</div>
</div>
<p>com isso a hipótese nula não pode ser rejeitada, então os resíduos são independentes.</p>
</section>
<section id="para-o-melhor-modelo-arma-estimado-obter-o-correlograma-dos-resíduos-ao-quadrado.-5" class="level3">
<h3 class="anchored" data-anchor-id="para-o-melhor-modelo-arma-estimado-obter-o-correlograma-dos-resíduos-ao-quadrado.-5">Para o melhor modelo ARMA estimado, obter o correlograma dos resíduos ao quadrado.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb338"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb338-1"><a href="#cb338-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">1</span>))</span>
<span id="cb338-2"><a href="#cb338-2" aria-hidden="true" tabindex="-1"></a><span class="fu">acf</span>(dolar.real_log_diff.ts.arima<span class="sc">$</span>residuals<span class="sc">^</span><span class="dv">2</span>, <span class="at">lag.max=</span><span class="dv">20</span>)</span>
<span id="cb338-3"><a href="#cb338-3" aria-hidden="true" tabindex="-1"></a><span class="fu">pacf</span>(dolar.real_log_diff.ts.arima<span class="sc">$</span>residuals<span class="sc">^</span><span class="dv">2</span>, <span class="at">lag.max =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-93-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="fazer-o-teste-para-efeitos-arch.-5" class="level3">
<h3 class="anchored" data-anchor-id="fazer-o-teste-para-efeitos-arch.-5">Fazer o teste para efeitos ARCH.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb339"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb339-1"><a href="#cb339-1" aria-hidden="true" tabindex="-1"></a>residuos_quadrados <span class="ot">&lt;-</span> dolar.real_log_diff.ts.arima<span class="sc">$</span>residuals<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb339-2"><a href="#cb339-2" aria-hidden="true" tabindex="-1"></a>residuos_quadrados</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Time Series:
Start = 2 
End = 240 
Frequency = 1 
  [1] 1.697757e-04 3.859095e-04 8.475196e-05 1.673718e-04 3.506436e-04
  [6] 5.002174e-05 5.437561e-05 2.397723e-05 9.379749e-05 1.213421e-04
 [11] 9.039843e-05 2.068196e-05 2.725286e-04 4.199030e-05 4.571152e-08
 [16] 9.073648e-07 1.030384e-04 1.340619e-04 2.706643e-07 7.178606e-05
 [21] 1.069553e-05 1.238524e-04 2.851107e-06 5.683503e-07 2.710320e-04
 [26] 8.405334e-08 1.217481e-04 3.253608e-05 1.669870e-04 7.931376e-05
 [31] 3.233429e-05 6.964748e-05 1.186640e-05 3.267289e-06 5.010313e-05
 [36] 4.364615e-06 5.174140e-07 4.914445e-06 6.609674e-07 1.767622e-04
 [41] 3.619092e-05 3.263970e-05 2.500864e-05 1.503125e-05 5.282148e-06
 [46] 3.150273e-05 1.116983e-04 1.035533e-04 4.171028e-08 2.194686e-04
 [51] 5.209124e-05 1.833222e-05 5.303789e-05 3.228623e-05 5.907748e-05
 [56] 3.995614e-05 3.101645e-05 2.799629e-06 4.970935e-05 9.688579e-05
 [61] 1.808612e-05 6.214215e-06 5.758687e-05 5.171906e-05 2.410785e-06
 [66] 1.779501e-06 1.493434e-05 4.657577e-05 5.878237e-05 1.274068e-05
 [71] 9.871124e-06 9.085483e-05 2.480117e-04 1.255571e-06 1.379648e-05
 [76] 5.333390e-05 4.206424e-05 9.803976e-05 9.012405e-05 1.704388e-06
 [81] 7.789633e-07 8.003168e-06 3.756755e-06 1.361602e-04 3.164216e-07
 [86] 1.182517e-06 1.200430e-04 3.166513e-05 2.744962e-05 8.716822e-05
 [91] 1.334759e-04 8.689022e-07 8.371869e-05 1.005033e-05 8.685340e-06
 [96] 8.897765e-05 1.439056e-04 1.481913e-05 3.393026e-08 1.282799e-06
[101] 2.712991e-05 8.490843e-06 1.202000e-06 2.562766e-04 6.252670e-05
[106] 7.031746e-07 1.521105e-05 3.789982e-05 4.004261e-05 8.922313e-05
[111] 2.041585e-05 1.248545e-05 3.769700e-06 1.006540e-05 8.283459e-05
[116] 6.912711e-05 4.139972e-07 4.619450e-05 4.741678e-07 8.225284e-07
[121] 8.379896e-05 6.884452e-07 3.411831e-05 1.781708e-06 1.075893e-05
[126] 3.774661e-05 2.995167e-05 5.221563e-05 5.739689e-07 2.311937e-04
[131] 4.741230e-05 6.712546e-05 8.486186e-06 2.140872e-04 3.812416e-05
[136] 8.621589e-08 9.973266e-05 8.775054e-07 6.341328e-08 2.015251e-05
[141] 1.960483e-06 7.467698e-06 3.161990e-05 1.126710e-06 6.333408e-07
[146] 8.437451e-05 4.777779e-06 9.030897e-06 1.684001e-06 1.704250e-05
[151] 2.908391e-06 1.842178e-04 1.274671e-05 3.571211e-04 4.209350e-05
[156] 1.624634e-06 7.563095e-06 1.119693e-05 3.729077e-07 4.536555e-05
[161] 1.084387e-04 2.246468e-06 2.724670e-06 1.410254e-05 8.744592e-07
[166] 4.090733e-06 2.557636e-05 1.694564e-04 3.955194e-05 1.048810e-07
[171] 1.477371e-06 6.268862e-06 3.824966e-05 1.127309e-04 2.194330e-05
[176] 2.671113e-05 5.978027e-05 2.866157e-06 4.269742e-07 3.987691e-05
[181] 5.282715e-05 5.843810e-07 2.173413e-05 3.179824e-05 3.135309e-06
[186] 1.044098e-05 2.695015e-06 1.406391e-05 1.039008e-04 5.577301e-06
[191] 4.961697e-05 4.462046e-05 9.865494e-05 6.464364e-06 2.692357e-05
[196] 5.782121e-05 3.691364e-04 2.787382e-06 3.198812e-05 5.448895e-07
[201] 8.170034e-06 1.642349e-04 8.263226e-05 1.242954e-05 2.989955e-05
[206] 2.104330e-06 4.064496e-05 5.597674e-06 2.655301e-06 2.488216e-07
[211] 4.758309e-09 8.455654e-05 8.207105e-08 4.096293e-05 3.905811e-05
[216] 1.504315e-04 1.139921e-06 2.208645e-04 2.452239e-08 6.833645e-05
[221] 3.027530e-06 8.782771e-07 3.272036e-05 6.438736e-07 1.114162e-04
[226] 1.975803e-05 3.998007e-05 1.221361e-05 1.528446e-06 6.003049e-05
[231] 9.172414e-06 6.930957e-05 2.625587e-06 2.851434e-06 2.714152e-06
[236] 2.427453e-06 1.820639e-05 8.454404e-05 2.471546e-05</code></pre>
</div>
<div class="sourceCode cell-code" id="cb341"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb341-1"><a href="#cb341-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ArchTest</span>(residuos_quadrados, <span class="at">lag =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    ARCH LM-test; Null hypothesis: no ARCH effects

data:  residuos_quadrados
Chi-squared = 6.0161, df = 3, p-value = 0.1108</code></pre>
</div>
</div>
</section>
<section id="identificar-o-melhor-processo-archgarch.-5" class="level3">
<h3 class="anchored" data-anchor-id="identificar-o-melhor-processo-archgarch.-5">Identificar o melhor processo ARCH/GARCH.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb343"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb343-1"><a href="#cb343-1" aria-hidden="true" tabindex="-1"></a>aTSA<span class="sc">::</span><span class="fu">arch.test</span>(dolar.real_log_diff.ts.arima)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>ARCH heteroscedasticity test for residuals 
alternative: heteroscedastic 

Portmanteau-Q test: 
     order    PQ p.value
[1,]     4  2.59   0.628
[2,]     8  4.43   0.816
[3,]    12  6.68   0.878
[4,]    16  6.80   0.977
[5,]    20 12.77   0.887
[6,]    24 18.67   0.769
Lagrange-Multiplier test: 
     order    LM  p.value
[1,]     4 51.33 4.15e-11
[2,]     8 23.27 1.53e-03
[3,]    12 15.26 1.71e-01
[4,]    16  9.84 8.30e-01
[5,]    20  7.81 9.88e-01
[6,]    24  4.93 1.00e+00</code></pre>
</div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-95-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb345"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb345-1"><a href="#cb345-1" aria-hidden="true" tabindex="-1"></a>nortsTest<span class="sc">::</span><span class="fu">arch.test</span>(dolar.real_log_diff.ts, <span class="at">lag.max=</span><span class="dv">6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Box-Ljung test

data:  y^2
X-squared = 4.9077, df = 6, p-value = 0.5557
alternative hypothesis: y is heteroscedastic</code></pre>
</div>
</div>
</section>
<section id="estimar-o-modelo-arma-garch-e-verificar-a-significância-dos-coeficientes.-5" class="level3">
<h3 class="anchored" data-anchor-id="estimar-o-modelo-arma-garch-e-verificar-a-significância-dos-coeficientes.-5">Estimar o modelo ARMA-GARCH e verificar a significância dos coeficientes.</h3>
<p>Como o modelo não apresenta heterocedasticidade condicional, não é necessário estimar o modelo ARMA-GARCH.</p>
</section>
<section id="avaliar-se-os-resíduos-gerados-têm-comportamento-de-ruído-branco.-5" class="level3">
<h3 class="anchored" data-anchor-id="avaliar-se-os-resíduos-gerados-têm-comportamento-de-ruído-branco.-5">Avaliar se os resíduos gerados têm comportamento de ruído branco.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb347"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb347-1"><a href="#cb347-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Box.test</span>(dolar.real_log_diff.ts.arima<span class="sc">$</span>residuals, <span class="at">type =</span> <span class="st">"Ljung"</span>, <span class="at">lag =</span> <span class="dv">20</span>, <span class="at">fitdf =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Box-Ljung test

data:  dolar.real_log_diff.ts.arima$residuals
X-squared = 8.5496, df = 18, p-value = 0.9693</code></pre>
</div>
</div>
<p>com isso vemos que a hipótese nula não pode ser rejeitada, então os resíduos são independentes.</p>
</section>
<section id="fazer-as-previsões-considerando-os-14-últimos-valores-da-série.-5" class="level3">
<h3 class="anchored" data-anchor-id="fazer-as-previsões-considerando-os-14-últimos-valores-da-série.-5">Fazer as previsões considerando os 14 últimos valores da série.</h3>
<p>como o modelo é ARIMA(1,0,1) então vamos usar os 14 últimos valores da série para fazer a previsão.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb349"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb349-1"><a href="#cb349-1" aria-hidden="true" tabindex="-1"></a>dolar.real_log_diff.ts.arima</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = dolar.real_log_diff.ts, order = c(5, 0, 5))

Coefficients:
         ar1      ar2     ar3      ar4     ar5      ma1     ma2      ma3
      1.3837  -1.8698  1.6721  -1.0087  0.5089  -1.3584  1.9909  -1.9606
s.e.  0.1245   0.1760  0.1989   0.1627  0.1264   0.0916  0.1203   0.1389
         ma4      ma5  intercept
      1.3203  -0.8343     -3e-04
s.e.  0.1245   0.1013      2e-04

sigma^2 estimated as 4.977e-05:  log likelihood = 841.65,  aic = -1659.31</code></pre>
</div>
<div class="sourceCode cell-code" id="cb351"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb351-1"><a href="#cb351-1" aria-hidden="true" tabindex="-1"></a>previsao <span class="ot">&lt;-</span> <span class="fu">predict</span>(dolar.real_log_diff.ts.arima, <span class="at">n.ahead =</span> <span class="dv">14</span>)</span>
<span id="cb351-2"><a href="#cb351-2" aria-hidden="true" tabindex="-1"></a>previsao</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$pred
Time Series:
Start = 241 
End = 254 
Frequency = 1 
 [1]  0.0035041114  0.0016226901 -0.0017846978 -0.0011654932 -0.0013440322
 [6] -0.0026012532 -0.0004919964  0.0021200922  0.0001837070 -0.0026754463
[11] -0.0014109865  0.0008852771  0.0002002893 -0.0010280031

$se
Time Series:
Start = 241 
End = 254 
Frequency = 1 
 [1] 0.007081961 0.007083988 0.007161944 0.007208972 0.007242932 0.007243550
 [7] 0.007338725 0.007444677 0.007468354 0.007526722 0.007566149 0.007654566
[13] 0.007656346 0.007670514</code></pre>
</div>
</div>
</section>
</section>
<section id="dolar-bitcoin" class="level2">
<h2 class="anchored" data-anchor-id="dolar-bitcoin">DOLAR BITCOIN</h2>
<section id="tranformar-para-um-ts-6" class="level3">
<h3 class="anchored" data-anchor-id="tranformar-para-um-ts-6">tranformar para um ts</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb353"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb353-1"><a href="#cb353-1" aria-hidden="true" tabindex="-1"></a>dolar.bitcoin.ts <span class="ot">&lt;-</span> <span class="fu">ts</span>(dolar.bitcoin[,<span class="dv">4</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="plotar-a-série-no-nível-6" class="level4">
<h4 class="anchored" data-anchor-id="plotar-a-série-no-nível-6">Plotar a série no nível</h4>
<p>vamos usar o valor de fechamento para fazer os procedimentos</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb354"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb354-1"><a href="#cb354-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(dolar.bitcoin.ts, <span class="at">xlab =</span> <span class="st">"Tempo"</span>, <span class="at">ylab =</span> <span class="st">"preço"</span>, <span class="at">main =</span> <span class="st">"DOLAR BITCOIN"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-99-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="fazer-o-teste-adf.-6" class="level4">
<h4 class="anchored" data-anchor-id="fazer-o-teste-adf.-6">Fazer o teste ADF.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb355"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb355-1"><a href="#cb355-1" aria-hidden="true" tabindex="-1"></a><span class="fu">adf.test</span>(dolar.bitcoin.ts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Augmented Dickey-Fuller Test 
alternative: stationary 
 
Type 1: no drift no trend 
     lag  ADF p.value
[1,]   0 1.73   0.979
[2,]   1 1.83   0.983
[3,]   2 1.65   0.976
[4,]   3 1.51   0.966
[5,]   4 1.49   0.965
[6,]   5 1.45   0.962
Type 2: with drift no trend 
     lag   ADF p.value
[1,]   0 -1.28   0.599
[2,]   1 -1.23   0.616
[3,]   2 -1.36   0.573
[4,]   3 -1.42   0.551
[5,]   4 -1.45   0.538
[6,]   5 -1.48   0.529
Type 3: with drift and trend 
     lag   ADF p.value
[1,]   0 -1.95   0.595
[2,]   1 -1.87   0.632
[3,]   2 -2.05   0.556
[4,]   3 -2.17   0.506
[5,]   4 -2.21   0.488
[6,]   5 -2.25   0.468
---- 
Note: in fact, p.value = 0.01 means p.value &lt;= 0.01 </code></pre>
</div>
</div>
<p>como o p-valor é maior que 0.05, não rejeitamos a hipótese nula de que a série é não estacionária.</p>
</section>
<section id="obter-a-série-do-log.-6" class="level4">
<h4 class="anchored" data-anchor-id="obter-a-série-do-log.-6">Obter a série do log.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb357"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb357-1"><a href="#cb357-1" aria-hidden="true" tabindex="-1"></a>dolar.bitcoin_log.ts <span class="ot">&lt;-</span> <span class="fu">log</span>(dolar.bitcoin.ts)</span>
<span id="cb357-2"><a href="#cb357-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(dolar.bitcoin_log.ts, <span class="at">xlab =</span> <span class="st">"Tempo"</span>, <span class="at">ylab =</span> <span class="st">"log_preço"</span>, <span class="at">main =</span> <span class="st">"DOLAR BITCOIN"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-101-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="obter-a-série-da-diferença-do-log.-6" class="level4">
<h4 class="anchored" data-anchor-id="obter-a-série-da-diferença-do-log.-6">Obter a série da diferença do log.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb358"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb358-1"><a href="#cb358-1" aria-hidden="true" tabindex="-1"></a>dolar.bitcoin_log_diff.ts <span class="ot">&lt;-</span> <span class="fu">diff</span>(dolar.bitcoin_log.ts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="fazer-novamente-o-teste-adf.-6" class="level4">
<h4 class="anchored" data-anchor-id="fazer-novamente-o-teste-adf.-6">Fazer novamente o teste ADF.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb359"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb359-1"><a href="#cb359-1" aria-hidden="true" tabindex="-1"></a><span class="fu">adf.test</span>(dolar.bitcoin_log_diff.ts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Augmented Dickey-Fuller Test 
alternative: stationary 
 
Type 1: no drift no trend 
     lag    ADF p.value
[1,]   0 -17.70    0.01
[2,]   1 -11.56    0.01
[3,]   2  -9.15    0.01
[4,]   3  -8.07    0.01
[5,]   4  -7.26    0.01
[6,]   5  -6.47    0.01
Type 2: with drift no trend 
     lag    ADF p.value
[1,]   0 -17.89    0.01
[2,]   1 -11.75    0.01
[3,]   2  -9.33    0.01
[4,]   3  -8.27    0.01
[5,]   4  -7.46    0.01
[6,]   5  -6.68    0.01
Type 3: with drift and trend 
     lag    ADF p.value
[1,]   0 -17.88    0.01
[2,]   1 -11.75    0.01
[3,]   2  -9.34    0.01
[4,]   3  -8.27    0.01
[5,]   4  -7.47    0.01
[6,]   5  -6.69    0.01
---- 
Note: in fact, p.value = 0.01 means p.value &lt;= 0.01 </code></pre>
</div>
</div>
<p>como o p-valor é menor que 0.05, rejeitamos a hipótese nula de que a série é não estacionária. então podemos usar a série da diferença do log para fazer a análise.</p>
</section>
<section id="plotar-a-série-da-diferença-do-log.-6" class="level4">
<h4 class="anchored" data-anchor-id="plotar-a-série-da-diferença-do-log.-6">Plotar a série da diferença do log.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb361"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb361-1"><a href="#cb361-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(dolar.bitcoin_log_diff.ts, <span class="at">xlab =</span> <span class="st">"Tempo"</span>, <span class="at">ylab =</span> <span class="st">"diff_log_preço"</span>, <span class="at">main =</span> <span class="st">"DOLAR BITCOIN"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-104-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="construir-o-correlograma-da-série-da-diferença-do-log.-6" class="level4">
<h4 class="anchored" data-anchor-id="construir-o-correlograma-da-série-da-diferença-do-log.-6">Construir o correlograma da série da diferença do log.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb362"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb362-1"><a href="#cb362-1" aria-hidden="true" tabindex="-1"></a><span class="fu">acf</span>(dolar.bitcoin_log_diff.ts,<span class="at">lag.max=</span><span class="dv">50</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-105-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb363"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb363-1"><a href="#cb363-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pacf</span>(dolar.bitcoin_log_diff.ts,<span class="at">lag.max=</span><span class="dv">50</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-105-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="identificar-o-processo-arma-adequado.-6" class="level3">
<h3 class="anchored" data-anchor-id="identificar-o-processo-arma-adequado.-6">Identificar o processo ARMA adequado.</h3>
<p>com a análise podemos ver que o melhor modelo para o diff_log_preço é o MA(1)</p>
</section>
<section id="estimar-o-modelo-arma-e-verificar-a-significância-dos-coeficientes.-6" class="level3">
<h3 class="anchored" data-anchor-id="estimar-o-modelo-arma-e-verificar-a-significância-dos-coeficientes.-6">Estimar o modelo ARMA e verificar a significância dos coeficientes.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb364"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb364-1"><a href="#cb364-1" aria-hidden="true" tabindex="-1"></a>dolar.bitcoin_log_diff.ts.arima <span class="ot">&lt;-</span> <span class="fu">arima</span>(dolar.bitcoin_log_diff.ts, <span class="at">order =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>))</span>
<span id="cb364-2"><a href="#cb364-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(dolar.bitcoin_log_diff.ts.arima)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = dolar.bitcoin_log_diff.ts, order = c(0, 0, 1))

Coefficients:
         ma1  intercept
      0.0133     0.0025
s.e.  0.0510     0.0013

sigma^2 estimated as 0.0005118:  log likelihood = 791.54,  aic = -1577.08

Training set error measures:
                       ME       RMSE        MAE      MPE     MAPE      MASE
Training set 1.445891e-07 0.02262227 0.01534496 327.2635 382.1457 0.6648408
                    ACF1
Training set 0.001071996</code></pre>
</div>
<div class="sourceCode cell-code" id="cb366"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb366-1"><a href="#cb366-1" aria-hidden="true" tabindex="-1"></a>dolar.bitcoin_log_diff.ts.arima2 <span class="ot">&lt;-</span> <span class="fu">arima</span>(dolar.bitcoin_log_diff.ts, <span class="at">order =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>))</span>
<span id="cb366-2"><a href="#cb366-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(dolar.bitcoin_log_diff.ts.arima2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = dolar.bitcoin_log_diff.ts, order = c(0, 0, 0))

Coefficients:
      intercept
         0.0025
s.e.     0.0012

sigma^2 estimated as 0.0005119:  log likelihood = 791.51,  aic = -1579.01

Training set error measures:
                       ME       RMSE        MAE      MPE     MAPE      MASE
Training set 1.096984e-19 0.02262459 0.01533499 327.6473 388.0734 0.6644088
                   ACF1
Training set 0.01535824</code></pre>
</div>
<div class="sourceCode cell-code" id="cb368"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb368-1"><a href="#cb368-1" aria-hidden="true" tabindex="-1"></a>dolar.bitcoin_log_diff.ts.arima3 <span class="ot">&lt;-</span> <span class="fu">arima</span>(dolar.bitcoin_log_diff.ts, <span class="at">order =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>))</span>
<span id="cb368-2"><a href="#cb368-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(dolar.bitcoin_log_diff.ts.arima3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = dolar.bitcoin_log_diff.ts, order = c(1, 0, 0))

Coefficients:
         ar1  intercept
      0.0154     0.0025
s.e.  0.0547     0.0013

sigma^2 estimated as 0.0005118:  log likelihood = 791.55,  aic = -1577.09

Training set error measures:
                       ME       RMSE        MAE      MPE     MAPE      MASE
Training set 1.939547e-06 0.02262191 0.01534621 326.7349 380.7706 0.6648949
                     ACF1
Training set -0.001158464</code></pre>
</div>
<div class="sourceCode cell-code" id="cb370"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb370-1"><a href="#cb370-1" aria-hidden="true" tabindex="-1"></a>dolar.bitcoin_log_diff.ts.arima4 <span class="ot">&lt;-</span> <span class="fu">arima</span>(dolar.bitcoin_log_diff.ts, <span class="at">order =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>))</span>
<span id="cb370-2"><a href="#cb370-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(dolar.bitcoin_log_diff.ts.arima4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = dolar.bitcoin_log_diff.ts, order = c(1, 0, 1))

Coefficients:
         ar1      ma1  intercept
      0.7337  -0.6877     0.0025
s.e.  0.2263   0.2404     0.0014

sigma^2 estimated as 0.0005095:  log likelihood = 792.27,  aic = -1576.54

Training set error measures:
                        ME       RMSE        MAE      MPE    MAPE     MASE
Training set -1.102077e-06 0.02257269 0.01539542 268.7681 320.417 0.667027
                    ACF1
Training set -0.03604222</code></pre>
</div>
</div>
</section>
<section id="plot-akaike-6" class="level3">
<h3 class="anchored" data-anchor-id="plot-akaike-6">plot akaike</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb372"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb372-1"><a href="#cb372-1" aria-hidden="true" tabindex="-1"></a>dolar.bitcoin_log_diff.ts.arima<span class="sc">$</span>aic</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -1577.081</code></pre>
</div>
<div class="sourceCode cell-code" id="cb374"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb374-1"><a href="#cb374-1" aria-hidden="true" tabindex="-1"></a>dolar.bitcoin_log_diff.ts.arima2<span class="sc">$</span>aic</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -1579.013</code></pre>
</div>
<div class="sourceCode cell-code" id="cb376"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb376-1"><a href="#cb376-1" aria-hidden="true" tabindex="-1"></a>dolar.bitcoin_log_diff.ts.arima3<span class="sc">$</span>aic</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -1577.091</code></pre>
</div>
<div class="sourceCode cell-code" id="cb378"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb378-1"><a href="#cb378-1" aria-hidden="true" tabindex="-1"></a>dolar.bitcoin_log_diff.ts.arima4<span class="sc">$</span>aic</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -1576.538</code></pre>
</div>
</div>
<p>podemos ver que pelo menor AIC o melhor modelo é o ARIMA(0,0,0) e que os coeficientes são significativos.</p>
</section>
<section id="fazer-o-teste-e-plotar-os-gráficos-associados-ao-teste-de-ljung-box-para-avaliar-a-correlação-dos-resíduos.-6" class="level3">
<h3 class="anchored" data-anchor-id="fazer-o-teste-e-plotar-os-gráficos-associados-ao-teste-de-ljung-box-para-avaliar-a-correlação-dos-resíduos.-6">Fazer o teste e plotar os gráficos associados ao teste de Ljung-Box para avaliar a correlação dos resíduos.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb380"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb380-1"><a href="#cb380-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tsdisplay</span>(<span class="fu">arima.errors</span>(dolar.bitcoin_log_diff.ts.arima2))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Deprecated, use residuals.Arima(object, type='regression') instead</code></pre>
</div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-108-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb382"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb382-1"><a href="#cb382-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Box.test</span>(<span class="fu">resid</span>(dolar.bitcoin_log_diff.ts.arima2), <span class="at">type =</span> <span class="st">"Ljung"</span>, <span class="at">lag =</span> <span class="dv">20</span>, <span class="at">fitdf =</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Box-Ljung test

data:  resid(dolar.bitcoin_log_diff.ts.arima2)
X-squared = 17.351, df = 20, p-value = 0.6301</code></pre>
</div>
</div>
<p>com isso a hipótese nula não pode ser rejeitada, então os resíduos são independentes.</p>
</section>
<section id="para-o-melhor-modelo-arma-estimado-obter-o-correlograma-dos-resíduos-ao-quadrado.-6" class="level3">
<h3 class="anchored" data-anchor-id="para-o-melhor-modelo-arma-estimado-obter-o-correlograma-dos-resíduos-ao-quadrado.-6">Para o melhor modelo ARMA estimado, obter o correlograma dos resíduos ao quadrado.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb384"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb384-1"><a href="#cb384-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">1</span>))</span>
<span id="cb384-2"><a href="#cb384-2" aria-hidden="true" tabindex="-1"></a><span class="fu">acf</span>(dolar.bitcoin_log_diff.ts.arima2<span class="sc">$</span>residuals<span class="sc">^</span><span class="dv">2</span>, <span class="at">lag.max=</span><span class="dv">20</span>)</span>
<span id="cb384-3"><a href="#cb384-3" aria-hidden="true" tabindex="-1"></a><span class="fu">pacf</span>(dolar.bitcoin_log_diff.ts.arima2<span class="sc">$</span>residuals<span class="sc">^</span><span class="dv">2</span>, <span class="at">lag.max =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-109-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="fazer-o-teste-para-efeitos-arch.-6" class="level3">
<h3 class="anchored" data-anchor-id="fazer-o-teste-para-efeitos-arch.-6">Fazer o teste para efeitos ARCH.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb385"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb385-1"><a href="#cb385-1" aria-hidden="true" tabindex="-1"></a>residuos_quadrados <span class="ot">&lt;-</span> dolar.bitcoin_log_diff.ts.arima2<span class="sc">$</span>residuals<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb385-2"><a href="#cb385-2" aria-hidden="true" tabindex="-1"></a>residuos_quadrados</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Time Series:
Start = 2 
End = 335 
Frequency = 1 
  [1] 1.630343e-06 9.272674e-06 7.064911e-05 1.682369e-05 1.842075e-05
  [6] 5.501116e-06 2.985782e-05 1.310250e-05 1.413550e-04 6.296235e-04
 [11] 2.330411e-03 2.613291e-03 2.466472e-03 5.029653e-05 1.256387e-04
 [16] 8.480769e-06 6.310989e-04 2.731246e-04 4.921822e-03 3.680149e-06
 [21] 2.543832e-05 4.687580e-05 2.435451e-04 3.427805e-04 3.863866e-05
 [26] 2.870872e-07 2.111555e-05 8.551229e-04 1.816956e-03 1.099024e-04
 [31] 5.025166e-04 1.743351e-04 1.218002e-05 5.702010e-05 3.528139e-04
 [36] 1.228601e-04 3.756365e-04 2.753135e-04 2.766949e-03 1.050967e-04
 [41] 5.725751e-05 3.989201e-05 2.611462e-06 2.630435e-04 7.611019e-03
 [46] 9.663987e-04 1.337906e-03 2.991783e-07 2.352718e-04 3.195583e-04
 [51] 3.413342e-04 1.615250e-04 1.576724e-04 1.177925e-03 1.232080e-05
 [56] 1.955157e-04 1.728484e-05 3.467633e-04 3.537391e-04 9.584805e-05
 [61] 2.610319e-03 8.679830e-06 1.299835e-06 7.758653e-06 1.424440e-04
 [66] 6.434424e-04 4.482753e-03 1.254066e-04 3.718483e-04 4.771364e-03
 [71] 7.268378e-03 3.955052e-04 3.096992e-04 6.179634e-04 7.726756e-03
 [76] 3.752941e-04 1.331058e-03 1.502319e-04 1.458879e-04 1.144725e-03
 [81] 1.181543e-03 1.065930e-03 6.136202e-06 2.396188e-04 1.124012e-03
 [86] 4.775311e-06 1.319473e-03 1.876475e-04 1.747040e-04 2.401086e-05
 [91] 1.001806e-04 2.938525e-04 1.204887e-04 4.742142e-06 5.314569e-05
 [96] 4.563614e-05 3.040377e-06 1.245867e-04 1.849412e-03 2.859697e-04
[101] 3.259519e-05 3.673914e-05 1.004550e-07 6.445824e-05 6.929766e-06
[106] 1.002202e-03 8.589360e-04 3.105653e-03 5.171066e-04 1.401733e-03
[111] 2.922700e-04 1.142888e-04 2.425957e-05 6.499622e-04 2.338068e-06
[116] 1.141378e-03 4.997719e-05 3.205434e-05 3.365068e-06 1.899365e-03
[121] 3.319837e-04 7.683836e-05 6.418493e-05 4.408182e-04 5.799655e-04
[126] 3.315045e-04 8.777195e-04 1.452720e-05 1.496286e-05 6.383950e-04
[131] 9.617468e-05 1.095156e-05 8.574119e-06 5.119169e-05 6.862126e-05
[136] 1.161458e-04 5.487388e-04 1.388168e-07 4.015438e-05 2.714658e-04
[141] 1.225546e-06 1.281449e-04 1.281586e-03 7.984437e-06 4.369846e-05
[146] 9.208061e-06 1.745623e-03 2.160889e-04 1.680304e-05 4.042771e-04
[151] 3.000321e-04 1.785633e-04 8.013413e-05 8.233161e-07 2.909437e-03
[156] 2.839426e-03 1.285529e-03 1.302859e-05 1.281434e-05 7.061863e-04
[161] 8.194315e-07 1.585646e-05 3.619600e-06 1.131933e-03 2.338001e-04
[166] 6.976953e-04 1.941327e-05 8.338347e-05 2.832622e-04 2.600964e-03
[171] 3.107545e-03 4.053328e-05 5.436850e-04 5.361051e-05 2.276733e-05
[176] 8.861751e-05 1.244053e-04 4.989759e-04 8.716735e-05 2.195163e-06
[181] 1.360239e-06 2.328805e-06 2.194420e-04 2.179530e-04 1.237519e-04
[186] 5.084642e-04 1.402343e-04 1.738045e-05 4.278987e-05 3.025756e-05
[191] 1.795299e-05 1.009125e-04 1.058218e-03 1.559010e-03 1.437162e-05
[196] 1.657014e-05 3.537653e-05 1.481756e-04 3.714472e-07 4.372486e-05
[201] 1.908837e-06 5.066602e-05 6.273919e-05 1.099744e-03 6.406341e-07
[206] 3.337204e-06 5.559328e-05 1.393799e-06 1.549504e-06 2.822399e-05
[211] 1.659678e-05 1.587948e-04 4.135675e-04 2.600707e-06 3.745055e-05
[216] 1.316880e-05 6.442458e-06 5.001584e-06 2.998970e-04 8.847195e-05
[221] 4.901121e-05 1.305087e-05 3.641409e-06 4.987456e-05 3.058170e-06
[226] 1.135924e-04 3.505296e-04 5.799275e-03 6.689000e-04 5.471498e-07
[231] 1.087886e-06 2.530905e-05 3.690953e-05 1.617883e-04 1.630325e-04
[236] 4.792577e-05 1.628214e-05 3.475260e-07 3.603406e-06 3.331719e-03
[241] 3.298997e-04 2.900684e-03 5.751199e-05 1.126468e-08 1.846647e-06
[246] 7.393531e-05 1.433496e-05 1.272253e-05 2.625454e-04 2.359296e-04
[251] 8.491613e-06 2.482152e-05 8.289063e-04 5.653113e-04 1.598961e-04
[256] 8.596968e-05 4.677157e-09 1.639247e-05 1.453840e-05 3.285192e-05
[261] 2.074248e-04 2.959720e-05 5.545704e-04 4.325157e-06 6.428956e-06
[266] 2.172375e-04 8.905525e-07 3.161162e-05 6.890264e-06 5.077971e-04
[271] 4.358015e-05 1.961547e-07 1.186614e-03 3.552470e-04 3.840490e-05
[276] 1.176979e-04 2.696004e-04 2.769905e-04 3.004282e-06 1.395979e-05
[281] 2.306826e-04 9.097073e-05 4.669952e-04 4.725508e-05 1.985715e-06
[286] 6.521477e-06 7.228245e-05 2.146056e-03 3.809668e-05 3.146729e-05
[291] 1.253365e-04 9.276238e-04 2.886320e-05 8.139129e-11 9.138319e-03
[296] 4.758462e-04 2.265672e-04 1.590794e-04 9.568793e-05 7.610223e-06
[301] 1.113791e-04 1.278139e-05 5.080909e-06 3.772927e-04 2.792406e-04
[306] 7.123459e-05 5.616164e-05 1.200881e-05 8.241715e-06 8.095597e-05
[311] 1.174209e-05 6.845229e-04 2.030481e-04 5.262826e-05 2.285408e-05
[316] 3.077354e-04 8.592643e-04 3.759817e-03 2.416569e-03 9.254239e-05
[321] 8.002883e-06 3.657480e-04 1.288616e-08 2.296468e-03 1.736600e-03
[326] 4.030791e-05 8.017464e-05 2.525150e-07 1.203212e-04 7.308589e-05
[331] 1.648261e-04 3.256858e-06 4.078152e-05 5.300069e-04</code></pre>
</div>
<div class="sourceCode cell-code" id="cb387"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb387-1"><a href="#cb387-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ArchTest</span>(residuos_quadrados, <span class="at">lag =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    ARCH LM-test; Null hypothesis: no ARCH effects

data:  residuos_quadrados
Chi-squared = 0.85176, df = 3, p-value = 0.8371</code></pre>
</div>
</div>
</section>
<section id="identificar-o-melhor-processo-archgarch.-6" class="level3">
<h3 class="anchored" data-anchor-id="identificar-o-melhor-processo-archgarch.-6">Identificar o melhor processo ARCH/GARCH.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb389"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb389-1"><a href="#cb389-1" aria-hidden="true" tabindex="-1"></a>aTSA<span class="sc">::</span><span class="fu">arch.test</span>(dolar.bitcoin_log_diff.ts.arima2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>ARCH heteroscedasticity test for residuals 
alternative: heteroscedastic 

Portmanteau-Q test: 
     order   PQ p.value
[1,]     4 11.0  0.0265
[2,]     8 13.4  0.0981
[3,]    12 15.3  0.2273
[4,]    16 17.4  0.3574
[5,]    20 21.5  0.3707
[6,]    24 23.0  0.5205
Lagrange-Multiplier test: 
     order    LM  p.value
[1,]     4 296.3 0.00e+00
[2,]     8 127.4 0.00e+00
[3,]    12  80.6 1.14e-12
[4,]    16  59.7 2.84e-07
[5,]    20  44.5 8.05e-04
[6,]    24  33.9 6.63e-02</code></pre>
</div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-111-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb391"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb391-1"><a href="#cb391-1" aria-hidden="true" tabindex="-1"></a>nortsTest<span class="sc">::</span><span class="fu">arch.test</span>(dolar.bitcoin_log_diff.ts, <span class="at">lag.max=</span><span class="dv">6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Box-Ljung test

data:  y^2
X-squared = 13.717, df = 6, p-value = 0.03297
alternative hypothesis: y is heteroscedastic</code></pre>
</div>
</div>
</section>
<section id="estimar-o-modelo-arma-garch-e-verificar-a-significância-dos-coeficientes.-6" class="level3">
<h3 class="anchored" data-anchor-id="estimar-o-modelo-arma-garch-e-verificar-a-significância-dos-coeficientes.-6">Estimar o modelo ARMA-GARCH e verificar a significância dos coeficientes.</h3>
<p>O modelo apresenta heterocedasticidade condicional, então é necessário estimar o modelo ARMA-GARCH.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb393"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb393-1"><a href="#cb393-1" aria-hidden="true" tabindex="-1"></a>dolar.bitcoin_log_diff.ts.arima2<span class="sc">$</span>aic</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -1579.013</code></pre>
</div>
<div class="sourceCode cell-code" id="cb395"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb395-1"><a href="#cb395-1" aria-hidden="true" tabindex="-1"></a>dolar.bitcoin_log_diff.ts.arima2.garch <span class="ot">&lt;-</span> <span class="fu">garchFit</span>(<span class="sc">~</span> <span class="fu">garch</span>(<span class="dv">1</span>,<span class="dv">1</span>), <span class="at">data =</span> dolar.bitcoin_log_diff.ts, <span class="at">trace =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Series Initialization:
 ARMA Model:                arma
 Formula Mean:              ~ arma(0, 0)
 GARCH Model:               garch
 Formula Variance:          ~ garch(1, 1)
 ARMA Order:                0 0
 Max ARMA Order:            0
 GARCH Order:               1 1
 Max GARCH Order:           1
 Maximum Order:             1
 Conditional Dist:          norm
 h.start:                   2
 llh.start:                 1
 Length of Series:          334
 Recursion Init:            mci
 Series Scale:              0.02265853

Parameter Initialization:
 Initial Parameters:          $params
 Limits of Transformations:   $U, $V
 Which Parameters are Fixed?  $includes
 Parameter Matrix:
                     U         V   params includes
    mu     -1.11607026   1.11607 0.111607     TRUE
    omega   0.00000100 100.00000 0.100000     TRUE
    alpha1  0.00000001   1.00000 0.100000     TRUE
    gamma1 -0.99999999   1.00000 0.100000    FALSE
    beta1   0.00000001   1.00000 0.800000     TRUE
    delta   0.00000000   2.00000 2.000000    FALSE
    skew    0.10000000  10.00000 1.000000    FALSE
    shape   1.00000000  10.00000 4.000000    FALSE
 Index List of Parameters to be Optimized:
    mu  omega alpha1  beta1 
     1      2      3      5 
 Persistence:                  0.9 


--- START OF TRACE ---
Selected Algorithm: nlminb 

R coded nlminb Solver: 

  0:     470.87892: 0.111607 0.100000 0.100000 0.800000
  1:     470.42771: 0.111589 0.114754 0.100293 0.806460
  2:     469.66040: 0.111558 0.116988 0.0871553 0.797413
  3:     469.36716: 0.111512 0.131975 0.0816536 0.799526
  4:     469.01672: 0.111442 0.135348 0.0689890 0.790180
  5:     468.76094: 0.111282 0.149696 0.0710281 0.783292
  6:     468.61045: 0.111071 0.156165 0.0739628 0.768957
  7:     468.49720: 0.110764 0.165963 0.0804009 0.758257
  8:     468.35842: 0.110108 0.173301 0.0804507 0.745172
  9:     468.25233: 0.109162 0.183738 0.0836628 0.736902
 10:     468.17416: 0.108423 0.186955 0.0897674 0.723940
 11:     468.08186: 0.107186 0.197466 0.0881400 0.719075
 12:     468.01712: 0.105774 0.200495 0.0867715 0.709676
 13:     467.94044: 0.104763 0.206362 0.0950987 0.701094
 14:     467.88014: 0.104548 0.216343 0.0875644 0.691123
 15:     467.79435: 0.103345 0.223451 0.0951414 0.685182
 16:     467.73399: 0.102278 0.226289 0.0999031 0.673460
 17:     467.68177: 0.100794 0.232868 0.103488 0.668295
 18:     467.04375: 0.0538619 0.329511 0.124174 0.547693
 19:     464.68516: 0.0385743 0.547084 0.260271 0.206343
 20:     462.83646: 0.0841973 0.724534 0.293112 1.00000e-08
 21:     462.71482: 0.0434142 0.689820 0.334338 1.00000e-08
 22:     462.60689: 0.0599828 0.694734 0.333703 1.00000e-08
 23:     462.55335: 0.0659535 0.689716 0.347879 1.00000e-08
 24:     462.49628: 0.0682687 0.680171 0.375342 1.00000e-08
 25:     462.46088: 0.0659939 0.675705 0.396324 1.00000e-08
 26:     462.43502: 0.0619884 0.677046 0.411746 1.00000e-08
 27:     462.42725: 0.0600632 0.682044 0.413316 1.00000e-08
 28:     462.42583: 0.0598643 0.685495 0.409854 1.00000e-08
 29:     462.42571: 0.0600417 0.686483 0.407842 1.00000e-08
 30:     462.42570: 0.0600932 0.686527 0.407544 1.00000e-08
 31:     462.42570: 0.0600967 0.686517 0.407534 1.00000e-08

Final Estimate of the Negative LLH:
 LLH:  -802.5053    norm LLH:  -2.402711 
          mu        omega       alpha1        beta1 
0.0013617033 0.0003524639 0.4075335229 0.0000000100 

R-optimhess Difference Approximated Hessian Matrix:
                 mu        omega        alpha1        beta1
mu     -828002.1973     738879.0    -913.67787   -2065.7153
omega   738879.0358 -894553323.8 -152640.23436 -427604.9890
alpha1    -913.6779    -152640.2     -72.36915    -107.5367
beta1    -2065.7153    -427605.0    -107.53675    -384.9203
attr(,"time")
Time difference of 0.00968504 secs

--- END OF TRACE ---


Time to Estimate Parameters:
 Time difference of 0.04577398 secs</code></pre>
</div>
<div class="sourceCode cell-code" id="cb397"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb397-1"><a href="#cb397-1" aria-hidden="true" tabindex="-1"></a>dolar.bitcoin_log_diff.ts.arima2.garch</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Title:
 GARCH Modelling 

Call:
 garchFit(formula = ~garch(1, 1), data = dolar.bitcoin_log_diff.ts, 
    trace = T) 

Mean and Variance Equation:
 data ~ garch(1, 1)
&lt;environment: 0x0000024fc615ed08&gt;
 [data = dolar.bitcoin_log_diff.ts]

Conditional Distribution:
 norm 

Coefficient(s):
        mu       omega      alpha1       beta1  
0.00136170  0.00035246  0.40753352  0.00000001  

Std. Errors:
 based on Hessian 

Error Analysis:
        Estimate  Std. Error  t value Pr(&gt;|t|)    
mu     1.362e-03   1.128e-03    1.208   0.2272    
omega  3.525e-04   5.129e-05    6.872 6.32e-12 ***
alpha1 4.075e-01   1.595e-01    2.554   0.0106 *  
beta1  1.000e-08   8.128e-02    0.000   1.0000    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Log Likelihood:
 802.5053    normalized:  2.402711 

Description:
 Tue Dec  5 06:52:56 2023 by user: pedro </code></pre>
</div>
</div>
</section>
<section id="avaliar-se-os-resíduos-gerados-têm-comportamento-de-ruído-branco.-6" class="level3">
<h3 class="anchored" data-anchor-id="avaliar-se-os-resíduos-gerados-têm-comportamento-de-ruído-branco.-6">Avaliar se os resíduos gerados têm comportamento de ruído branco.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb399"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb399-1"><a href="#cb399-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Box.test</span>(dolar.bitcoin_log_diff.ts.arima2<span class="sc">$</span>residuals, <span class="at">type =</span> <span class="st">"Ljung"</span>, <span class="at">lag =</span> <span class="dv">20</span>, <span class="at">fitdf =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Box-Ljung test

data:  dolar.bitcoin_log_diff.ts.arima2$residuals
X-squared = 17.351, df = 18, p-value = 0.4991</code></pre>
</div>
</div>
<p>com isso vemos que a hipótese nula não pode ser rejeitada, então os resíduos são independentes.</p>
</section>
<section id="fazer-as-previsões-considerando-os-14-últimos-valores-da-série.-6" class="level3">
<h3 class="anchored" data-anchor-id="fazer-as-previsões-considerando-os-14-últimos-valores-da-série.-6">Fazer as previsões considerando os 14 últimos valores da série.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb401"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb401-1"><a href="#cb401-1" aria-hidden="true" tabindex="-1"></a>dolar.bitcoin_log_diff.ts.arima2.garch</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Title:
 GARCH Modelling 

Call:
 garchFit(formula = ~garch(1, 1), data = dolar.bitcoin_log_diff.ts, 
    trace = T) 

Mean and Variance Equation:
 data ~ garch(1, 1)
&lt;environment: 0x0000024fc615ed08&gt;
 [data = dolar.bitcoin_log_diff.ts]

Conditional Distribution:
 norm 

Coefficient(s):
        mu       omega      alpha1       beta1  
0.00136170  0.00035246  0.40753352  0.00000001  

Std. Errors:
 based on Hessian 

Error Analysis:
        Estimate  Std. Error  t value Pr(&gt;|t|)    
mu     1.362e-03   1.128e-03    1.208   0.2272    
omega  3.525e-04   5.129e-05    6.872 6.32e-12 ***
alpha1 4.075e-01   1.595e-01    2.554   0.0106 *  
beta1  1.000e-08   8.128e-02    0.000   1.0000    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Log Likelihood:
 802.5053    normalized:  2.402711 

Description:
 Tue Dec  5 06:52:56 2023 by user: pedro </code></pre>
</div>
<div class="sourceCode cell-code" id="cb403"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb403-1"><a href="#cb403-1" aria-hidden="true" tabindex="-1"></a>previsao <span class="ot">&lt;-</span> <span class="fu">predict</span>(dolar.bitcoin_log_diff.ts.arima2.garch, <span class="at">n.ahead =</span> <span class="dv">14</span>)</span>
<span id="cb403-2"><a href="#cb403-2" aria-hidden="true" tabindex="-1"></a>previsao</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   meanForecast  meanError standardDeviation
1   0.001361703 0.02430875        0.02430875
2   0.001361703 0.02435738        0.02435738
3   0.001361703 0.02437717        0.02437717
4   0.001361703 0.02438522        0.02438522
5   0.001361703 0.02438851        0.02438851
6   0.001361703 0.02438985        0.02438985
7   0.001361703 0.02439039        0.02439039
8   0.001361703 0.02439061        0.02439061
9   0.001361703 0.02439070        0.02439070
10  0.001361703 0.02439074        0.02439074
11  0.001361703 0.02439076        0.02439076
12  0.001361703 0.02439076        0.02439076
13  0.001361703 0.02439077        0.02439077
14  0.001361703 0.02439077        0.02439077</code></pre>
</div>
</div>
</section>
</section>
<section id="questão-02-dados-com-sazonalidade" class="level2">
<h2 class="anchored" data-anchor-id="questão-02-dados-com-sazonalidade">Questão 02 [Dados com Sazonalidade]</h2>
<section id="importar-os-dados-do-excel-com-cada-aba-sendo-uma-série-temporal" class="level3">
<h3 class="anchored" data-anchor-id="importar-os-dados-do-excel-com-cada-aba-sendo-uma-série-temporal">importar os dados do excel com cada aba sendo uma série temporal</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb405"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb405-1"><a href="#cb405-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'readxl' was built under R version 4.3.2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb407"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb407-1"><a href="#cb407-1" aria-hidden="true" tabindex="-1"></a>dados_sazonalidade_uva <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"DADOS___EXERCICIO___2___SAZONALIDADE.xlsx"</span>, <span class="at">sheet =</span> <span class="st">'UVA'</span>)</span>
<span id="cb407-2"><a href="#cb407-2" aria-hidden="true" tabindex="-1"></a>dados_sazonalidade_mamao <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"DADOS___EXERCICIO___2___SAZONALIDADE.xlsx"</span>, <span class="at">sheet =</span> <span class="st">'MAMÃO'</span>)</span>
<span id="cb407-3"><a href="#cb407-3" aria-hidden="true" tabindex="-1"></a>dados_sazonalidade_manga <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"DADOS___EXERCICIO___2___SAZONALIDADE.xlsx"</span>, <span class="at">sheet =</span> <span class="st">'MANGA'</span>)</span>
<span id="cb407-4"><a href="#cb407-4" aria-hidden="true" tabindex="-1"></a>dados_sazonalidade_uva</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 67 × 7
   Produto           Região                Mês   Ano Moeda Unidade    Preço
   &lt;chr&gt;             &lt;chr&gt;               &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;
 1 Niagara - atacado São Paulo (capital)     6  2021 R$    quilograma  5.94
 2 Niagara - atacado São Paulo (capital)     5  2021 R$    quilograma  4.71
 3 Niagara - atacado São Paulo (capital)     4  2021 R$    quilograma  5.86
 4 Niagara - atacado São Paulo (capital)     3  2021 R$    quilograma  7.38
 5 Niagara - atacado São Paulo (capital)     2  2021 R$    quilograma  6.29
 6 Niagara - atacado São Paulo (capital)     1  2021 R$    quilograma  5.77
 7 Niagara - atacado São Paulo (capital)    12  2020 R$    quilograma  5.87
 8 Niagara - atacado São Paulo (capital)    11  2020 R$    quilograma  7.68
 9 Niagara - atacado São Paulo (capital)    10  2020 R$    quilograma  8.65
10 Niagara - atacado São Paulo (capital)     9  2020 R$    quilograma  8.05
# ℹ 57 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb409"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb409-1"><a href="#cb409-1" aria-hidden="true" tabindex="-1"></a>dados_sazonalidade_mamao</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 66 × 7
   Produto           Região                Mês   Ano Moeda Unidade        Preço
   &lt;chr&gt;             &lt;chr&gt;               &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;          &lt;dbl&gt;
 1 Formosa - atacado São Paulo (capital)     6  2021 R$    Caixa de 13 Kg  18.0
 2 Formosa - atacado São Paulo (capital)     5  2021 R$    Caixa de 13 Kg  17.1
 3 Formosa - atacado São Paulo (capital)     4  2021 R$    Caixa de 13 Kg  22.6
 4 Formosa - atacado São Paulo (capital)     3  2021 R$    Caixa de 13 Kg  34.8
 5 Formosa - atacado São Paulo (capital)     2  2021 R$    Caixa de 13 Kg  16.5
 6 Formosa - atacado São Paulo (capital)     1  2021 R$    Caixa de 13 Kg  14.6
 7 Formosa - atacado São Paulo (capital)    12  2020 R$    Caixa de 13 Kg  22.1
 8 Formosa - atacado São Paulo (capital)    11  2020 R$    Caixa de 13 Kg  27.9
 9 Formosa - atacado São Paulo (capital)    10  2020 R$    Caixa de 13 Kg  27.3
10 Formosa - atacado São Paulo (capital)     9  2020 R$    Caixa de 13 Kg  14.9
# ℹ 56 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb411"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb411-1"><a href="#cb411-1" aria-hidden="true" tabindex="-1"></a>dados_sazonalidade_manga</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 66 × 7
   Produto         Região                Mês   Ano Moeda Unidade    Preço
   &lt;chr&gt;           &lt;chr&gt;               &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;
 1 Tommy - atacado São Paulo (capital)     6  2021 R$    quilograma  3   
 2 Tommy - atacado São Paulo (capital)     5  2021 R$    quilograma  3.19
 3 Tommy - atacado São Paulo (capital)     4  2021 R$    quilograma  3.5 
 4 Tommy - atacado São Paulo (capital)     3  2021 R$    quilograma  4.69
 5 Tommy - atacado São Paulo (capital)     2  2021 R$    quilograma  4.41
 6 Tommy - atacado São Paulo (capital)     1  2021 R$    quilograma  3.55
 7 Tommy - atacado São Paulo (capital)    12  2020 R$    quilograma  2.9 
 8 Tommy - atacado São Paulo (capital)    11  2020 R$    quilograma  2.98
 9 Tommy - atacado São Paulo (capital)    10  2020 R$    quilograma  3.39
10 Tommy - atacado São Paulo (capital)     9  2020 R$    quilograma  4.1 
# ℹ 56 more rows</code></pre>
</div>
</div>
</section>
<section id="plotar-as-séries-dos-dados-de-cada-commodity" class="level3">
<h3 class="anchored" data-anchor-id="plotar-as-séries-dos-dados-de-cada-commodity">Plotar as séries dos dados de cada commodity;</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb413"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb413-1"><a href="#cb413-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(dados_sazonalidade_uva<span class="sc">$</span>Preço, <span class="at">xlab =</span> <span class="st">"Tempo"</span>, <span class="at">ylab =</span> <span class="st">"preço"</span>, <span class="at">main =</span> <span class="st">"UVA"</span>, <span class="at">type =</span> <span class="st">"l"</span>, )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-116-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb414"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb414-1"><a href="#cb414-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(dados_sazonalidade_mamao<span class="sc">$</span>Preço, <span class="at">xlab =</span> <span class="st">"Tempo"</span>, <span class="at">ylab =</span> <span class="st">"preço"</span>, <span class="at">main =</span> <span class="st">"MAMAO"</span>, <span class="at">type =</span> <span class="st">"l"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-116-2.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb415"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb415-1"><a href="#cb415-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(dados_sazonalidade_manga<span class="sc">$</span>Preço, <span class="at">xlab =</span> <span class="st">"Tempo"</span>, <span class="at">ylab =</span> <span class="st">"preço"</span>, <span class="at">main =</span> <span class="st">"MANGA"</span>, <span class="at">type =</span> <span class="st">"l"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-116-3.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="crie-a-série-da-diferença-sazonal-lag-12-da-série-da-diferença-não-sazonal-do-log-de-cada-commodity" class="level3">
<h3 class="anchored" data-anchor-id="crie-a-série-da-diferença-sazonal-lag-12-da-série-da-diferença-não-sazonal-do-log-de-cada-commodity">Crie a série da diferença sazonal [lag 12] da série da diferença [não sazonal] do log de cada commodity;</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb416"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb416-1"><a href="#cb416-1" aria-hidden="true" tabindex="-1"></a>dados_sazonalidade_uva_log <span class="ot">&lt;-</span> <span class="fu">log</span>(dados_sazonalidade_uva<span class="sc">$</span>Preço)</span>
<span id="cb416-2"><a href="#cb416-2" aria-hidden="true" tabindex="-1"></a>dados_sazonalidade_uva_log_diff <span class="ot">&lt;-</span> <span class="fu">diff</span>(dados_sazonalidade_uva_log)</span>
<span id="cb416-3"><a href="#cb416-3" aria-hidden="true" tabindex="-1"></a>dados_sazonalidade_uva_log_diff_sazonal <span class="ot">&lt;-</span> <span class="fu">diff</span>(dados_sazonalidade_uva_log_diff, <span class="at">lag =</span> <span class="dv">12</span>)</span>
<span id="cb416-4"><a href="#cb416-4" aria-hidden="true" tabindex="-1"></a>dados_sazonalidade_mamao_log <span class="ot">&lt;-</span> <span class="fu">log</span>(dados_sazonalidade_mamao<span class="sc">$</span>Preço)</span>
<span id="cb416-5"><a href="#cb416-5" aria-hidden="true" tabindex="-1"></a>dados_sazonalidade_mamao_log_diff <span class="ot">&lt;-</span> <span class="fu">diff</span>(dados_sazonalidade_mamao_log)</span>
<span id="cb416-6"><a href="#cb416-6" aria-hidden="true" tabindex="-1"></a>dados_sazonalidade_mamao_log_diff_sazonal <span class="ot">&lt;-</span> <span class="fu">diff</span>(dados_sazonalidade_mamao_log_diff, <span class="at">lag =</span> <span class="dv">12</span>)</span>
<span id="cb416-7"><a href="#cb416-7" aria-hidden="true" tabindex="-1"></a>dados_sazonalidade_manga_log <span class="ot">&lt;-</span> <span class="fu">log</span>(dados_sazonalidade_manga<span class="sc">$</span>Preço)</span>
<span id="cb416-8"><a href="#cb416-8" aria-hidden="true" tabindex="-1"></a>dados_sazonalidade_manga_log_diff <span class="ot">&lt;-</span> <span class="fu">diff</span>(dados_sazonalidade_manga_log)</span>
<span id="cb416-9"><a href="#cb416-9" aria-hidden="true" tabindex="-1"></a>dados_sazonalidade_manga_log_diff_sazonal <span class="ot">&lt;-</span> <span class="fu">diff</span>(dados_sazonalidade_manga_log_diff, <span class="at">lag =</span> <span class="dv">12</span>)</span>
<span id="cb416-10"><a href="#cb416-10" aria-hidden="true" tabindex="-1"></a>dados_sazonalidade_uva_log_diff_sazonal <span class="ot">&lt;-</span> <span class="fu">ts</span>(dados_sazonalidade_uva_log_diff_sazonal)</span>
<span id="cb416-11"><a href="#cb416-11" aria-hidden="true" tabindex="-1"></a>dados_sazonalidade_mamao_log_diff_sazonal <span class="ot">&lt;-</span> <span class="fu">ts</span>(dados_sazonalidade_mamao_log_diff_sazonal)</span>
<span id="cb416-12"><a href="#cb416-12" aria-hidden="true" tabindex="-1"></a>dados_sazonalidade_manga_log_diff_sazonal <span class="ot">&lt;-</span> <span class="fu">ts</span>(dados_sazonalidade_manga_log_diff_sazonal)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="construa-a-fac-e-a-facp-correlograma-para-cada-série-e-identifique-o-modelo-mais-adequado-para-cada-caso" class="level3">
<h3 class="anchored" data-anchor-id="construa-a-fac-e-a-facp-correlograma-para-cada-série-e-identifique-o-modelo-mais-adequado-para-cada-caso">Construa a FAC e a FACP [correlograma] para cada série e identifique o modelo mais adequado para cada caso;</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb417"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb417-1"><a href="#cb417-1" aria-hidden="true" tabindex="-1"></a><span class="fu">acf</span>(dados_sazonalidade_uva_log_diff_sazonal,<span class="at">lag.max=</span><span class="dv">50</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-118-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb418"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb418-1"><a href="#cb418-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pacf</span>(dados_sazonalidade_uva_log_diff_sazonal,<span class="at">lag.max=</span><span class="dv">50</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-118-2.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb419"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb419-1"><a href="#cb419-1" aria-hidden="true" tabindex="-1"></a><span class="fu">acf</span>(dados_sazonalidade_mamao_log_diff_sazonal,<span class="at">lag.max=</span><span class="dv">50</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-118-3.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb420"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb420-1"><a href="#cb420-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pacf</span>(dados_sazonalidade_mamao_log_diff_sazonal,<span class="at">lag.max=</span><span class="dv">50</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-118-4.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb421"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb421-1"><a href="#cb421-1" aria-hidden="true" tabindex="-1"></a><span class="fu">acf</span>(dados_sazonalidade_manga_log_diff_sazonal,<span class="at">lag.max=</span><span class="dv">50</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-118-5.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb422"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb422-1"><a href="#cb422-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pacf</span>(dados_sazonalidade_manga_log_diff_sazonal,<span class="at">lag.max=</span><span class="dv">50</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="prova01_files/figure-html/unnamed-chunk-118-6.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>